./NewUI/src/app/roleplay/page.tsx:  //             text: `Hello${currentUser.displayName ? ', ' + currentUser.displayName : ''}! I'll be your conversation partner for this ${parsedScenario.title} scenario. How can I help you today?`, 
./NewUI/src/app/roleplay/page.tsx:  //             text: `Welcome to the ${parsedScenario.title} scenario! I'll be your conversation partner. How would you like to start?`, 
./NewUI/src/app/scenario/custom/[id]/page.tsx:            text: `Welcome to your "${selectedScenario.title}" scenario! I'll be your conversation partner. How would you like to start?`, 
./NewUI/.next/server/app/roleplay/page.js:eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/image */ \"(ssr)/./node_modules/next/dist/api/image.js\");\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/navigation */ \"(ssr)/./node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var _server_firebase__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../server/firebase */ \"(ssr)/./server/firebase.js\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! firebase/auth */ \"(ssr)/./node_modules/firebase/auth/dist/index.mjs\");\n/* harmony import */ var _services_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/services/api */ \"(ssr)/./src/services/api.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\n\n\n\nconst RoleplayPage = ()=>{\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [showProfileMenu, setShowProfileMenu] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [userLanguage, setUserLanguage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('en');\n    const [inputText, setInputText] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [scenario, setScenario] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isPlaying, setIsPlaying] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [showModal, setShowModal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isRecording, setIsRecording] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [suggestionList, setSuggestionList] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const profileMenuRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const messagesEndRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const audioRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const router = (0,next_navigation__WEBPACK_IMPORTED_MODULE_3__.useRouter)();\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"RoleplayPage.useEffect\": ()=>{\n            scrollToBottom();\n        }\n    }[\"RoleplayPage.useEffect\"], [\n        messages\n    ]);\n    const scrollToBottom = ()=>{\n        messagesEndRef.current?.scrollIntoView({\n            behavior: \"smooth\"\n        });\n    };\n    const initializeConversation = async (username)=>{\n        try {\n            // Call backend to set scenario & get response\n            // const scenarioResponse = await setScenario(username);\n            // Fetch initial response from backend\n            const response = await fetch(\"/api/get_scenario_response\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    username\n                })\n            });\n            const data = await response.json();\n            console.log(\"ðŸ¤– LLM Response:\", data.response);\n            // Set initial message from backend\n            setMessages([\n                {\n                    text: data.response,\n                    sender: \"bot\"\n                }\n            ]);\n            // Fetch initial suggestions\n            fetchSuggestions(username);\n        } catch (error) {\n            console.error(\"Error initializing conversation:\", error);\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"RoleplayPage.useEffect\": ()=>{\n            setLoading(true);\n            const fetchUserAndScenario = {\n                \"RoleplayPage.useEffect.fetchUserAndScenario\": async ()=>{\n                    try {\n                        // Load scenario from localStorage\n                        const savedScenario = localStorage.getItem(\"currentScenario\");\n                        if (!savedScenario) {\n                            alert(\"No scenario selected. Please select a scenario first.\");\n                            router.push(\"/scenario\");\n                            return;\n                        }\n                        const parsedScenario = JSON.parse(savedScenario);\n                        setScenario(parsedScenario);\n                        // Authenticate user\n                        const unsubscribe = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_5__.onAuthStateChanged)(_server_firebase__WEBPACK_IMPORTED_MODULE_4__.auth, {\n                            \"RoleplayPage.useEffect.fetchUserAndScenario.unsubscribe\": async (currentUser)=>{\n                                setUser(currentUser);\n                                // Get language preference (from localStorage or backend)\n                                const savedLocale = localStorage.getItem(\"locale\") || \"en\";\n                                setUserLanguage(savedLocale);\n                                if (currentUser) {\n                                    const username = currentUser.displayName || currentUser.email?.split(\"@\")[0] || \"Guest\";\n                                    console.log(\"ðŸ‘¤ User authenticated:\", username);\n                                    // Initialize conversation (calls backend for scenario & LLM response)\n                                    await initializeConversation(username);\n                                }\n                                setLoading(false);\n                            }\n                        }[\"RoleplayPage.useEffect.fetchUserAndScenario.unsubscribe\"]);\n                        return ({\n                            \"RoleplayPage.useEffect.fetchUserAndScenario\": ()=>unsubscribe()\n                        })[\"RoleplayPage.useEffect.fetchUserAndScenario\"];\n                    } catch (error) {\n                        console.error(\"Error loading user scenario:\", error);\n                        alert(\"There was a problem loading the scenario. Please try again.\");\n                        router.push(\"/scenario\");\n                    }\n                }\n            }[\"RoleplayPage.useEffect.fetchUserAndScenario\"];\n            fetchUserAndScenario();\n        }\n    }[\"RoleplayPage.useEffect\"], []);\n    // // Initialize scenario conversation with backend\n    // const initializeConversation = async (username: string, scenarioTitle: string) => {\n    //   try {\n    //     const scenarioResponse = await setScenario(username, scenarioTitle);\n    //     fetchSuggestions(username); // Initial suggestions\n    //   } catch (error) {\n    //     console.error(\"Error initializing conversation:\", error);\n    //   }\n    // };\n    // useEffect(() => {\n    //   // Load the scenario from localStorage\n    //   const savedScenario = localStorage.getItem('currentScenario');\n    //   if (!savedScenario) {\n    //     // If no scenario is found, redirect back to scenario selection\n    //     alert(\"No scenario selected. Please select a scenario first.\");\n    //     router.push('/scenario');\n    //     return;\n    //   }\n    //   try {\n    //     const parsedScenario = JSON.parse(savedScenario);\n    //     setScenario(parsedScenario);\n    //     const unsubscribe = onAuthStateChanged(auth, async (currentUser) => {\n    //       setUser(currentUser);\n    //       const savedLocale = localStorage.getItem('locale') || 'en';\n    //       setUserLanguage(savedLocale);\n    //       if (currentUser) {\n    //         const username = currentUser.displayName || currentUser.email?.split('@')[0] || 'Guest';\n    //         await initializeConversation(username, parsedScenario.title);\n    //         setMessages([\n    //           { \n    //             text: `Hello${currentUser.displayName ? ', ' + currentUser.displayName : ''}! I'll be your conversation partner for this ${parsedScenario.title} scenario. How can I help you today?`, \n    //             sender: 'bot' \n    //           }\n    //         ]);\n    //       } else {\n    //         setMessages([\n    //           { \n    //             text: `Welcome to the ${parsedScenario.title} scenario! I'll be your conversation partner. How would you like to start?`, \n    //             sender: 'bot' \n    //           }\n    //         ]);\n    //       }\n    //       setLoading(false);\n    //     });\n    //     return () => unsubscribe();\n    //   } catch (error) {\n    //     console.error(\"Error parsing scenario:\", error);\n    //     alert(\"There was a problem loading the scenario. Please try again.\");\n    //     router.push('/scenario');\n    //   }\n    // }, []);\n    // Fetch updated conversation suggestions from backend\n    const fetchSuggestions = async (username)=>{\n        try {\n            const response = await (0,_services_api__WEBPACK_IMPORTED_MODULE_6__.getSuggestions)(username);\n            if (response && response.data && !response.error) {\n                setSuggestionList(response.data.suggestions);\n            } else if (response && response.error) {\n                console.error(\"Error fetching suggestions:\", response.error);\n            }\n        } catch (error) {\n            console.error(\"Error fetching suggestions:\", error);\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"RoleplayPage.useEffect\": ()=>{\n            function handleClickOutside(event) {\n                if (profileMenuRef.current && !profileMenuRef.current.contains(event.target)) {\n                    setShowProfileMenu(false);\n                }\n            }\n            document.addEventListener(\"mousedown\", handleClickOutside);\n            return ({\n                \"RoleplayPage.useEffect\": ()=>document.removeEventListener(\"mousedown\", handleClickOutside)\n            })[\"RoleplayPage.useEffect\"];\n        }\n    }[\"RoleplayPage.useEffect\"], []);\n    const handleBackClick = ()=>{\n        router.push('/scenario');\n    };\n    const navigateToDashboard = ()=>{\n        router.push('/dashboard');\n        setShowProfileMenu(false);\n    };\n    const handleInputChange = (event)=>{\n        setInputText(event.target.value);\n    };\n    const handleKeyPress = (event)=>{\n        if (event.key === 'Enter') {\n            handleSendMessage();\n        }\n    };\n    // Play audio when speaker button is clicked\n    const playMessageAudio = (messageId, audioUrl)=>{\n        if (!audioUrl) return;\n        // Stop any currently playing audio\n        if (audioRef.current) {\n            audioRef.current.pause();\n            audioRef.current.currentTime = 0;\n            setIsPlaying(null);\n        }\n        // If clicking on the currently playing audio, just stop it\n        if (isPlaying === `message-${messageId}`) {\n            setIsPlaying(null);\n            return;\n        }\n        // Create and play new audio\n        const audio = new Audio(`http://localhost:8000${audioUrl}`);\n        audioRef.current = audio;\n        // Set the currently playing message ID\n        setIsPlaying(`message-${messageId}`);\n        // When audio ends, reset the playing state\n        audio.addEventListener('ended', ()=>{\n            setIsPlaying(null);\n        });\n        audio.play().catch((e)=>{\n            console.error(\"Audio playback error:\", e);\n            setIsPlaying(null);\n        });\n    };\n    const handleSendMessage = async ()=>{\n        if (!inputText.trim() || !scenario) return;\n        const userMessage = inputText.trim();\n        setMessages((prev)=>[\n                ...prev,\n                {\n                    text: userMessage,\n                    sender: 'user'\n                }\n            ]);\n        setInputText('');\n        setIsLoading(true);\n        try {\n            const username = user ? user.displayName || user.email?.split('@')[0] || 'Guest' : 'Guest';\n            const response = await (0,_services_api__WEBPACK_IMPORTED_MODULE_6__.sendChatMessage)(username, userMessage, scenario.title, undefined, userLanguage);\n            if (response && response.error) {\n                throw new Error(response.error);\n            }\n            if (response && response.data) {\n                setMessages((prev)=>[\n                        ...prev,\n                        {\n                            text: response.data.response,\n                            sender: 'bot',\n                            audio_url: response.data.audio_url\n                        }\n                    ]);\n                if (response.data.audio_url) {\n                    // Click the speaker button to play message audio\n                    playMessageAudio(messages.length, response.data.audio_url);\n                }\n            }\n            // Fetch updated suggestions after message\n            await fetchSuggestions(username);\n        } catch (error) {\n            console.error('Error sending message:', error);\n            setMessages((prev)=>[\n                    ...prev,\n                    {\n                        text: \"Sorry, I'm having trouble connecting. Please try again.\",\n                        sender: 'bot'\n                    }\n                ]);\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    const handleEndScenario = ()=>{\n        setShowModal(true);\n    };\n    const handleSaveConversation = async ()=>{\n        try {\n            if (!scenario) return;\n            const scenarioType = scenario.title.toLowerCase().replace(/\\s+/g, '_');\n            const savedConversations = JSON.parse(localStorage.getItem(scenarioType) || '[]');\n            savedConversations.push({\n                id: Date.now(),\n                date: new Date().toISOString(),\n                scenario: scenario.title,\n                messages: messages,\n                userName: user ? user.displayName || user.email?.split('@')[0] || 'Guest' : 'Guest',\n                language: userLanguage\n            });\n            localStorage.setItem(scenarioType, JSON.stringify(savedConversations));\n            router.push('/text');\n        } catch (error) {\n            console.error(\"Error saving conversation:\", error);\n            router.push('/text');\n        }\n    };\n    const handleDiscardConversation = ()=>{\n        router.push('/text');\n    };\n    // Apply suggestion to input\n    const handleSuggestionClick = (suggestion)=>{\n        setInputText(suggestion);\n    };\n    // Toggle voice recording (placeholder)\n    const toggleRecording = ()=>{\n        setIsRecording(!isRecording);\n    // Add actual recording logic here\n    };\n    if (loading) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"min-h-screen flex items-center justify-center\",\n            style: {\n                backgroundImage: \"url('/icons/background1.jpg')\",\n                backgroundSize: \"cover\"\n            },\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#48d1cc]\"\n            }, void 0, false, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 362,\n                columnNumber: 9\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n            lineNumber: 360,\n            columnNumber: 7\n        }, undefined);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"min-h-screen bg-gray-900 text-white relative\",\n        style: {\n            backgroundImage: \"url('/icons/background1.jpg')\"\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute top-8 left-8 z-10\",\n                ref: profileMenuRef,\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>setShowProfileMenu(!showProfileMenu),\n                        className: \"w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 transition-colors duration-200 flex items-center justify-center overflow-hidden\",\n                        children: user?.photoURL ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                            src: user.photoURL,\n                            alt: \"Profile\",\n                            width: 40,\n                            height: 40,\n                            className: \"object-cover\"\n                        }, void 0, false, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 377,\n                            columnNumber: 13\n                        }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"w-full h-full bg-[#48d1cc] flex items-center justify-center text-white font-semibold text-sm\",\n                            children: user?.displayName ? user.displayName.charAt(0).toUpperCase() : user?.email ? user.email.charAt(0).toUpperCase() : \"G\"\n                        }, void 0, false, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 385,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                        lineNumber: 372,\n                        columnNumber: 9\n                    }, undefined),\n                    showProfileMenu && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"absolute top-12 left-0 bg-white rounded-lg shadow-lg py-2 min-w-[180px] text-gray-800 z-20\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"px-4 py-2 border-b border-gray-200\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        className: \"font-medium\",\n                                        children: user?.displayName || \"Guest\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 395,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    user?.email && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        className: \"text-xs text-gray-500\",\n                                        children: user.email\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 397,\n                                        columnNumber: 17\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                lineNumber: 394,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"px-4 py-2 border-b border-gray-200\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-xs text-gray-500\",\n                                    children: [\n                                        \"Language: \",\n                                        userLanguage === 'en' ? 'English' : userLanguage === 'zh-CN' ? 'Chinese' : 'Japanese'\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                    lineNumber: 401,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                lineNumber: 400,\n                                columnNumber: 13\n                            }, undefined),\n                            user ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: navigateToDashboard,\n                                className: \"w-full text-left px-4 py-2 hover:bg-gray-100 transition-colors flex items-center\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        className: \"w-4 h-4 mr-2\",\n                                        fill: \"none\",\n                                        stroke: \"currentColor\",\n                                        viewBox: \"0 0 24 24\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\",\n                                            strokeWidth: \"2\",\n                                            d: \"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 409,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 408,\n                                        columnNumber: 17\n                                    }, undefined),\n                                    \"Profile Dashboard\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                lineNumber: 404,\n                                columnNumber: 15\n                            }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>router.push('/login'),\n                                className: \"w-full text-left px-4 py-2 hover:bg-gray-100 transition-colors flex items-center\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        className: \"w-4 h-4 mr-2\",\n                                        fill: \"none\",\n                                        stroke: \"currentColor\",\n                                        viewBox: \"0 0 24 24\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\",\n                                            strokeWidth: \"2\",\n                                            d: \"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 419,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 418,\n                                        columnNumber: 17\n                                    }, undefined),\n                                    \"Sign In\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                lineNumber: 414,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                        lineNumber: 393,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 371,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: handleBackClick,\n                className: \"absolute top-8 left-24 w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 transition-colors duration-200 flex items-center justify-center\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                    src: \"/icons/back.png\",\n                    alt: \"Back\",\n                    width: 24,\n                    height: 24,\n                    className: \"text-white\"\n                }, void 0, false, {\n                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                    lineNumber: 432,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 428,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: handleEndScenario,\n                className: \"absolute top-8 right-8 bg-[#20b2aa] hover:bg-[#008080] px-6 py-2 rounded-lg transition-colors duration-200\",\n                children: \"End Scenario\"\n            }, void 0, false, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 441,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"pt-24 px-4 max-w-6xl mx-auto\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex gap-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"w-[65%]\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"h-[70vh] bg-[#f0f8ff] rounded-xl p-6 overflow-y-auto mb-4\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex flex-col space-y-4\",\n                                        children: [\n                                            messages.map((message, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: `flex ${message.sender === 'user' ? 'justify-end' : 'justify-start'}`,\n                                                    children: [\n                                                        message.sender === 'bot' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"w-8 h-8 mr-2 flex-shrink-0 rounded-full overflow-hidden\",\n                                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                                                src: \"/icons/robot.jpg\",\n                                                                alt: \"Robot\",\n                                                                width: 32,\n                                                                height: 32,\n                                                                className: \"object-cover\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                lineNumber: 461,\n                                                                columnNumber: 25\n                                                            }, undefined)\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 460,\n                                                            columnNumber: 23\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: `max-w-sm rounded-lg px-4 py-2 ${message.sender === 'user' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-800'} group relative`,\n                                                            children: [\n                                                                message.text,\n                                                                message.sender === 'bot' && message.audio_url && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                                    onClick: ()=>playMessageAudio(index, message.audio_url),\n                                                                    className: \"absolute -right-10 top-1/2 transform -translate-y-1/2 w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200 transition-colors\",\n                                                                    \"aria-label\": \"Play message audio\",\n                                                                    children: isPlaying === `message-${index}` ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                        className: \"animate-pulse\",\n                                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                                                            src: \"/icons/speaker.jpg\",\n                                                                            alt: \"Speaker\",\n                                                                            width: 24,\n                                                                            height: 24\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                            lineNumber: 488,\n                                                                            columnNumber: 31\n                                                                        }, undefined)\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                        lineNumber: 487,\n                                                                        columnNumber: 29\n                                                                    }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                                                        src: \"/icons/speaker.jpg\",\n                                                                        alt: \"Speaker\",\n                                                                        width: 24,\n                                                                        height: 24\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                        lineNumber: 491,\n                                                                        columnNumber: 29\n                                                                    }, undefined)\n                                                                }, void 0, false, {\n                                                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                    lineNumber: 481,\n                                                                    columnNumber: 25\n                                                                }, undefined)\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 470,\n                                                            columnNumber: 21\n                                                        }, undefined),\n                                                        message.sender === 'user' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"w-8 h-8 ml-2 flex-shrink-0 rounded-full overflow-hidden bg-blue-100 flex items-center justify-center\",\n                                                            children: user?.photoURL ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                                                src: user.photoURL,\n                                                                alt: \"User\",\n                                                                width: 32,\n                                                                height: 32,\n                                                                className: \"object-cover\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                lineNumber: 499,\n                                                                columnNumber: 27\n                                                            }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"w-full h-full bg-[#48d1cc] flex items-center justify-center text-white font-semibold text-xs\",\n                                                                children: user?.displayName ? user.displayName.charAt(0).toUpperCase() : user?.email ? user.email.charAt(0).toUpperCase() : \"U\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                lineNumber: 507,\n                                                                columnNumber: 27\n                                                            }, undefined)\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 497,\n                                                            columnNumber: 23\n                                                        }, undefined)\n                                                    ]\n                                                }, index, true, {\n                                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                    lineNumber: 455,\n                                                    columnNumber: 19\n                                                }, undefined)),\n                                            isLoading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex justify-start\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex items-center space-x-2 bg-gray-100 rounded-lg px-4 py-2\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",\n                                                            style: {\n                                                                animationDelay: '0s'\n                                                            }\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 519,\n                                                            columnNumber: 23\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",\n                                                            style: {\n                                                                animationDelay: '0.2s'\n                                                            }\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 520,\n                                                            columnNumber: 23\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",\n                                                            style: {\n                                                                animationDelay: '0.4s'\n                                                            }\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 521,\n                                                            columnNumber: 23\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                    lineNumber: 518,\n                                                    columnNumber: 21\n                                                }, undefined)\n                                            }, void 0, false, {\n                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                lineNumber: 517,\n                                                columnNumber: 19\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                ref: messagesEndRef\n                                            }, void 0, false, {\n                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                lineNumber: 525,\n                                                columnNumber: 17\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 453,\n                                        columnNumber: 15\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                    lineNumber: 452,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex gap-2\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: toggleRecording,\n                                            className: `${isRecording ? 'bg-red-500 hover:bg-red-600' : 'bg-gray-200 hover:bg-gray-300'} px-3 py-3 rounded-lg transition-colors duration-200 flex items-center justify-center relative`,\n                                            \"aria-label\": \"Start voice recording\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                    xmlns: \"http://www.w3.org/2000/svg\",\n                                                    className: \"h-6 w-6\",\n                                                    fill: \"none\",\n                                                    viewBox: \"0 0 24 24\",\n                                                    stroke: isRecording ? \"white\" : \"black\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                        strokeLinecap: \"round\",\n                                                        strokeLinejoin: \"round\",\n                                                        strokeWidth: 2,\n                                                        d: \"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                        lineNumber: 540,\n                                                        columnNumber: 19\n                                                    }, undefined)\n                                                }, void 0, false, {\n                                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                    lineNumber: 539,\n                                                    columnNumber: 17\n                                                }, undefined),\n                                                isRecording && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"absolute top-0 right-0 flex h-3 w-3\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 544,\n                                                            columnNumber: 21\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"relative inline-flex rounded-full h-3 w-3 bg-red-500\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 545,\n                                                            columnNumber: 21\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                    lineNumber: 543,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 530,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                            type: \"text\",\n                                            value: inputText,\n                                            onChange: handleInputChange,\n                                            onKeyPress: handleKeyPress,\n                                            placeholder: isRecording ? \"Listening...\" : \"Type your message...\",\n                                            className: `flex-1 bg-white text-black px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${isRecording ? 'animate-pulse border-2 border-red-400' : ''}`,\n                                            disabled: isRecording || isLoading\n                                        }, void 0, false, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 550,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: handleSendMessage,\n                                            disabled: isRecording || isLoading || !inputText.trim(),\n                                            className: \"bg-[#20b2aa] hover:bg-[#008080] px-4 py-2 rounded-lg transition-colors duration-200 flex items-center justify-center disabled:opacity-50\",\n                                            children: isLoading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                lineNumber: 568,\n                                                columnNumber: 19\n                                            }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                                src: \"/icons/send.png\",\n                                                alt: \"Send\",\n                                                width: 24,\n                                                height: 24\n                                            }, void 0, false, {\n                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                lineNumber: 570,\n                                                columnNumber: 19\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 562,\n                                            columnNumber: 15\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                    lineNumber: 529,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 451,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"w-[35%]\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"h-[70vh] bg-[#f0f8ff] rounded-xl p-6 overflow-y-auto mb-4\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                        className: \"text-lg font-semibold text-gray-800 mb-3\",\n                                        children: \"Suggested Responses\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 580,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    suggestionList.length > 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"space-y-3\",\n                                        children: suggestionList.map((suggestion, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                className: \"w-full bg-white rounded-lg p-3 shadow-sm hover:bg-gray-50 transition-colors text-left flex items-center\",\n                                                onClick: ()=>handleSuggestionClick(suggestion),\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"flex-shrink-0 w-6 h-6 bg-[#20b2aa] rounded-full flex items-center justify-center text-white text-xs mr-3\",\n                                                        children: index + 1\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                        lineNumber: 590,\n                                                        columnNumber: 23\n                                                    }, undefined),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                        className: \"text-gray-700\",\n                                                        children: suggestion\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                        lineNumber: 593,\n                                                        columnNumber: 23\n                                                    }, undefined)\n                                                ]\n                                            }, index, true, {\n                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                lineNumber: 585,\n                                                columnNumber: 21\n                                            }, undefined))\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 583,\n                                        columnNumber: 17\n                                    }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"bg-gray-50 rounded-lg p-4 text-center\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                            className: \"text-gray-500\",\n                                            children: \"Suggestions will appear here after you start chatting.\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 599,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 598,\n                                        columnNumber: 17\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                lineNumber: 578,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 577,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                    lineNumber: 449,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 448,\n                columnNumber: 7\n            }, undefined),\n            showModal && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"fixed inset-0 bg-black/70 flex items-center justify-center z-50\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"bg-white rounded-xl p-6 max-w-md w-full mx-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                            className: \"text-xl font-bold text-gray-800 mb-4\",\n                            children: \"End Scenario\"\n                        }, void 0, false, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 610,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-gray-600 mb-6\",\n                            children: \"Your practice session will be closed. Do you want to save this conversation to your profile?\"\n                        }, void 0, false, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 611,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex gap-4 justify-end\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: handleDiscardConversation,\n                                    className: \"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg transition-colors\",\n                                    children: \"Don't Save\"\n                                }, void 0, false, {\n                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                    lineNumber: 614,\n                                    columnNumber: 15\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: handleSaveConversation,\n                                    className: \"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors\",\n                                    children: \"Save\"\n                                }, void 0, false, {\n                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                    lineNumber: 620,\n                                    columnNumber: 15\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 613,\n                            columnNumber: 13\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                    lineNumber: 609,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 608,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n        lineNumber: 368,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RoleplayPage);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O2dEQUVDTCxXQUFVO2dEQUNWTSxTQUFTLElBQU1WLHNCQUFzQkM7O2tFQUVyQyw4REFBQ2lDO3dEQUFLOUIsV0FBVTtrRUFDYjBCLFFBQVE7Ozs7OztrRUFFWCw4REFBQ1o7d0RBQUVkLFdBQVU7a0VBQWlCSDs7Ozs7OzsrQ0FQekI2Qjs7Ozs7Ozs7O2tFQVlYLDhEQUFDM0I7d0NBQUlDLFdBQVU7a0RBQ2IsNEVBQUNjOzRDQUFFZCxXQUFVO3NEQUFnQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O1lBUXhDakcsMkJBQ0MsOERBQUNnRztnQkFBSUMsV0FBVTswQkFDYiw0RUFBQ0Q7b0JBQUlDLFdBQVU7O3NDQUNiLDhEQUFDcUM7NEJBQUdyQyxXQUFVO3NDQUF1Qzs7Ozs7O3NDQUNyRCw4REFBQ2M7NEJBQUVkLFdBQVU7c0NBQXFCOzs7Ozs7c0NBRWxDLDhEQUFDRDs0QkFBSUMsV0FBVTs7OENBQ2IsOERBQUNLO29DQUNDQyxTQUFTWDtvQ0FDVEssV0FBVTs4Q0FDWDs7Ozs7OzhDQUdELDhEQUFDSztvQ0FDQ0MsU0FBU3hCO29DQUNUa0IsV0FBVTs4Q0FDWDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFTZjtBQUVBLGlFQUFlcEgsWUFBWUEsRUFBQyIsInNvdXJjZXMiOlsiL2hvbWUvaHlhbmcvQ1MyMzlfbmV3L05ld1VJK0JhY2tlbmQvTmV3VUkvc3JjL2FwcC9yb2xlcGxheS9wYWdlLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIlxuaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBJbWFnZSBmcm9tICduZXh0L2ltYWdlJztcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvbmF2aWdhdGlvbic7XG5pbXBvcnQgeyBhdXRoIH0gZnJvbSBcIi4uLy4uLy4uL3NlcnZlci9maXJlYmFzZVwiO1xuaW1wb3J0IHsgb25BdXRoU3RhdGVDaGFuZ2VkLCBVc2VyIH0gZnJvbSBcImZpcmViYXNlL2F1dGhcIjtcbmltcG9ydCB7IHNlbmRDaGF0TWVzc2FnZSwgZ2V0U3VnZ2VzdGlvbnMsIHNldFNjZW5hcmlvIH0gZnJvbSAnQC9zZXJ2aWNlcy9hcGknO1xuXG5pbnRlcmZhY2UgU2NlbmFyaW8ge1xuICBpZDogc3RyaW5nO1xuICB0aXRsZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIGN1c3RvbTogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIE1lc3NhZ2Uge1xuICB0ZXh0OiBzdHJpbmc7XG4gIHNlbmRlcjogJ3VzZXInIHwgJ2JvdCc7XG4gIGF1ZGlvX3VybD86IHN0cmluZztcbn1cblxuY29uc3QgUm9sZXBsYXlQYWdlID0gKCkgPT4ge1xuICBjb25zdCBbdXNlciwgc2V0VXNlcl0gPSB1c2VTdGF0ZTxVc2VyIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbc2hvd1Byb2ZpbGVNZW51LCBzZXRTaG93UHJvZmlsZU1lbnVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdXNlckxhbmd1YWdlLCBzZXRVc2VyTGFuZ3VhZ2VdID0gdXNlU3RhdGU8c3RyaW5nPignZW4nKTtcbiAgY29uc3QgW2lucHV0VGV4dCwgc2V0SW5wdXRUZXh0XSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW21lc3NhZ2VzLCBzZXRNZXNzYWdlc10gPSB1c2VTdGF0ZTxNZXNzYWdlW10+KFtdKTtcbiAgY29uc3QgW2lzTG9hZGluZywgc2V0SXNMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3NjZW5hcmlvLCBzZXRTY2VuYXJpb10gPSB1c2VTdGF0ZTxTY2VuYXJpbyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbaXNQbGF5aW5nLCBzZXRJc1BsYXlpbmddID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtzaG93TW9kYWwsIHNldFNob3dNb2RhbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpc1JlY29yZGluZywgc2V0SXNSZWNvcmRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc3VnZ2VzdGlvbkxpc3QsIHNldFN1Z2dlc3Rpb25MaXN0XSA9IHVzZVN0YXRlPHN0cmluZ1tdPihbXSk7XG4gIFxuICBjb25zdCBwcm9maWxlTWVudVJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCk7XG4gIGNvbnN0IG1lc3NhZ2VzRW5kUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgYXVkaW9SZWYgPSB1c2VSZWY8SFRNTEF1ZGlvRWxlbWVudCB8IG51bGw+KG51bGwpO1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNjcm9sbFRvQm90dG9tKCk7XG4gIH0sIFttZXNzYWdlc10pO1xuICBcbiAgY29uc3Qgc2Nyb2xsVG9Cb3R0b20gPSAoKSA9PiB7XG4gICAgbWVzc2FnZXNFbmRSZWYuY3VycmVudD8uc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogXCJzbW9vdGhcIiB9KTtcbiAgfTtcbiAgY29uc3QgaW5pdGlhbGl6ZUNvbnZlcnNhdGlvbiA9IGFzeW5jICh1c2VybmFtZTogc3RyaW5nKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENhbGwgYmFja2VuZCB0byBzZXQgc2NlbmFyaW8gJiBnZXQgcmVzcG9uc2VcbiAgICAgIC8vIGNvbnN0IHNjZW5hcmlvUmVzcG9uc2UgPSBhd2FpdCBzZXRTY2VuYXJpbyh1c2VybmFtZSk7XG4gICAgICBcbiAgICAgIC8vIEZldGNoIGluaXRpYWwgcmVzcG9uc2UgZnJvbSBiYWNrZW5kXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiL2FwaS9nZXRfc2NlbmFyaW9fcmVzcG9uc2VcIiwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgdXNlcm5hbWUgfSksXG4gICAgICB9KTtcbiAgXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgY29uc29sZS5sb2coXCLwn6SWIExMTSBSZXNwb25zZTpcIiwgZGF0YS5yZXNwb25zZSk7XG4gIFxuICAgICAgLy8gU2V0IGluaXRpYWwgbWVzc2FnZSBmcm9tIGJhY2tlbmRcbiAgICAgIHNldE1lc3NhZ2VzKFt7IHRleHQ6IGRhdGEucmVzcG9uc2UsIHNlbmRlcjogXCJib3RcIiB9XSk7XG4gIFxuICAgICAgLy8gRmV0Y2ggaW5pdGlhbCBzdWdnZXN0aW9uc1xuICAgICAgZmV0Y2hTdWdnZXN0aW9ucyh1c2VybmFtZSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbml0aWFsaXppbmcgY29udmVyc2F0aW9uOlwiLCBlcnJvcik7XG4gICAgfVxuICB9O1xuICBcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRMb2FkaW5nKHRydWUpO1xuICBcbiAgICBjb25zdCBmZXRjaFVzZXJBbmRTY2VuYXJpbyA9IGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIExvYWQgc2NlbmFyaW8gZnJvbSBsb2NhbFN0b3JhZ2VcbiAgICAgICAgY29uc3Qgc2F2ZWRTY2VuYXJpbyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY3VycmVudFNjZW5hcmlvXCIpO1xuICBcbiAgICAgICAgaWYgKCFzYXZlZFNjZW5hcmlvKSB7XG4gICAgICAgICAgYWxlcnQoXCJObyBzY2VuYXJpbyBzZWxlY3RlZC4gUGxlYXNlIHNlbGVjdCBhIHNjZW5hcmlvIGZpcnN0LlwiKTtcbiAgICAgICAgICByb3V0ZXIucHVzaChcIi9zY2VuYXJpb1wiKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgXG4gICAgICAgIGNvbnN0IHBhcnNlZFNjZW5hcmlvID0gSlNPTi5wYXJzZShzYXZlZFNjZW5hcmlvKTtcbiAgICAgICAgc2V0U2NlbmFyaW8ocGFyc2VkU2NlbmFyaW8pO1xuICBcbiAgICAgICAgLy8gQXV0aGVudGljYXRlIHVzZXJcbiAgICAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSBvbkF1dGhTdGF0ZUNoYW5nZWQoYXV0aCwgYXN5bmMgKGN1cnJlbnRVc2VyKSA9PiB7XG4gICAgICAgICAgc2V0VXNlcihjdXJyZW50VXNlcik7XG4gIFxuICAgICAgICAgIC8vIEdldCBsYW5ndWFnZSBwcmVmZXJlbmNlIChmcm9tIGxvY2FsU3RvcmFnZSBvciBiYWNrZW5kKVxuICAgICAgICAgIGNvbnN0IHNhdmVkTG9jYWxlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJsb2NhbGVcIikgfHwgXCJlblwiO1xuICAgICAgICAgIHNldFVzZXJMYW5ndWFnZShzYXZlZExvY2FsZSk7XG4gIFxuICAgICAgICAgIGlmIChjdXJyZW50VXNlcikge1xuICAgICAgICAgICAgY29uc3QgdXNlcm5hbWUgPVxuICAgICAgICAgICAgICBjdXJyZW50VXNlci5kaXNwbGF5TmFtZSB8fFxuICAgICAgICAgICAgICBjdXJyZW50VXNlci5lbWFpbD8uc3BsaXQoXCJAXCIpWzBdIHx8XG4gICAgICAgICAgICAgIFwiR3Vlc3RcIjtcbiAgXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIvCfkaQgVXNlciBhdXRoZW50aWNhdGVkOlwiLCB1c2VybmFtZSk7XG4gIFxuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBjb252ZXJzYXRpb24gKGNhbGxzIGJhY2tlbmQgZm9yIHNjZW5hcmlvICYgTExNIHJlc3BvbnNlKVxuICAgICAgICAgICAgYXdhaXQgaW5pdGlhbGl6ZUNvbnZlcnNhdGlvbih1c2VybmFtZSk7XG4gICAgICAgICAgfVxuICBcbiAgICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgfSk7XG4gIFxuICAgICAgICByZXR1cm4gKCkgPT4gdW5zdWJzY3JpYmUoKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBsb2FkaW5nIHVzZXIgc2NlbmFyaW86XCIsIGVycm9yKTtcbiAgICAgICAgYWxlcnQoXCJUaGVyZSB3YXMgYSBwcm9ibGVtIGxvYWRpbmcgdGhlIHNjZW5hcmlvLiBQbGVhc2UgdHJ5IGFnYWluLlwiKTtcbiAgICAgICAgcm91dGVyLnB1c2goXCIvc2NlbmFyaW9cIik7XG4gICAgICB9XG4gICAgfTtcbiAgXG4gICAgZmV0Y2hVc2VyQW5kU2NlbmFyaW8oKTtcbiAgfSwgW10pO1xuICBcbiAgLy8gLy8gSW5pdGlhbGl6ZSBzY2VuYXJpbyBjb252ZXJzYXRpb24gd2l0aCBiYWNrZW5kXG4gIC8vIGNvbnN0IGluaXRpYWxpemVDb252ZXJzYXRpb24gPSBhc3luYyAodXNlcm5hbWU6IHN0cmluZywgc2NlbmFyaW9UaXRsZTogc3RyaW5nKSA9PiB7XG4gIC8vICAgdHJ5IHtcbiAgLy8gICAgIGNvbnN0IHNjZW5hcmlvUmVzcG9uc2UgPSBhd2FpdCBzZXRTY2VuYXJpbyh1c2VybmFtZSwgc2NlbmFyaW9UaXRsZSk7XG4gIC8vICAgICBmZXRjaFN1Z2dlc3Rpb25zKHVzZXJuYW1lKTsgLy8gSW5pdGlhbCBzdWdnZXN0aW9uc1xuICAvLyAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gIC8vICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW5pdGlhbGl6aW5nIGNvbnZlcnNhdGlvbjpcIiwgZXJyb3IpO1xuICAvLyAgIH1cbiAgLy8gfTtcblxuICAvLyB1c2VFZmZlY3QoKCkgPT4ge1xuICAvLyAgIC8vIExvYWQgdGhlIHNjZW5hcmlvIGZyb20gbG9jYWxTdG9yYWdlXG4gIC8vICAgY29uc3Qgc2F2ZWRTY2VuYXJpbyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjdXJyZW50U2NlbmFyaW8nKTtcbiAgICBcbiAgLy8gICBpZiAoIXNhdmVkU2NlbmFyaW8pIHtcbiAgLy8gICAgIC8vIElmIG5vIHNjZW5hcmlvIGlzIGZvdW5kLCByZWRpcmVjdCBiYWNrIHRvIHNjZW5hcmlvIHNlbGVjdGlvblxuICAvLyAgICAgYWxlcnQoXCJObyBzY2VuYXJpbyBzZWxlY3RlZC4gUGxlYXNlIHNlbGVjdCBhIHNjZW5hcmlvIGZpcnN0LlwiKTtcbiAgLy8gICAgIHJvdXRlci5wdXNoKCcvc2NlbmFyaW8nKTtcbiAgLy8gICAgIHJldHVybjtcbiAgLy8gICB9XG4gICAgXG4gIC8vICAgdHJ5IHtcbiAgLy8gICAgIGNvbnN0IHBhcnNlZFNjZW5hcmlvID0gSlNPTi5wYXJzZShzYXZlZFNjZW5hcmlvKTtcbiAgLy8gICAgIHNldFNjZW5hcmlvKHBhcnNlZFNjZW5hcmlvKTtcbiAgICAgIFxuICAvLyAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSBvbkF1dGhTdGF0ZUNoYW5nZWQoYXV0aCwgYXN5bmMgKGN1cnJlbnRVc2VyKSA9PiB7XG4gIC8vICAgICAgIHNldFVzZXIoY3VycmVudFVzZXIpO1xuICAgICAgICBcbiAgLy8gICAgICAgY29uc3Qgc2F2ZWRMb2NhbGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbG9jYWxlJykgfHwgJ2VuJztcbiAgLy8gICAgICAgc2V0VXNlckxhbmd1YWdlKHNhdmVkTG9jYWxlKTtcbiAgICAgICAgXG4gIC8vICAgICAgIGlmIChjdXJyZW50VXNlcikge1xuICAvLyAgICAgICAgIGNvbnN0IHVzZXJuYW1lID0gY3VycmVudFVzZXIuZGlzcGxheU5hbWUgfHwgY3VycmVudFVzZXIuZW1haWw/LnNwbGl0KCdAJylbMF0gfHwgJ0d1ZXN0JztcbiAgICAgICAgICBcbiAgLy8gICAgICAgICBhd2FpdCBpbml0aWFsaXplQ29udmVyc2F0aW9uKHVzZXJuYW1lLCBwYXJzZWRTY2VuYXJpby50aXRsZSk7XG4gIC8vICAgICAgICAgc2V0TWVzc2FnZXMoW1xuICAvLyAgICAgICAgICAgeyBcbiAgLy8gICAgICAgICAgICAgdGV4dDogYEhlbGxvJHtjdXJyZW50VXNlci5kaXNwbGF5TmFtZSA/ICcsICcgKyBjdXJyZW50VXNlci5kaXNwbGF5TmFtZSA6ICcnfSEgSSdsbCBiZSB5b3VyIGNvbnZlcnNhdGlvbiBwYXJ0bmVyIGZvciB0aGlzICR7cGFyc2VkU2NlbmFyaW8udGl0bGV9IHNjZW5hcmlvLiBIb3cgY2FuIEkgaGVscCB5b3UgdG9kYXk/YCwgXG4gIC8vICAgICAgICAgICAgIHNlbmRlcjogJ2JvdCcgXG4gIC8vICAgICAgICAgICB9XG4gIC8vICAgICAgICAgXSk7XG4gIC8vICAgICAgIH0gZWxzZSB7XG4gIC8vICAgICAgICAgc2V0TWVzc2FnZXMoW1xuICAvLyAgICAgICAgICAgeyBcbiAgLy8gICAgICAgICAgICAgdGV4dDogYFdlbGNvbWUgdG8gdGhlICR7cGFyc2VkU2NlbmFyaW8udGl0bGV9IHNjZW5hcmlvISBJJ2xsIGJlIHlvdXIgY29udmVyc2F0aW9uIHBhcnRuZXIuIEhvdyB3b3VsZCB5b3UgbGlrZSB0byBzdGFydD9gLCBcbiAgLy8gICAgICAgICAgICAgc2VuZGVyOiAnYm90JyBcbiAgLy8gICAgICAgICAgIH1cbiAgLy8gICAgICAgICBdKTtcbiAgLy8gICAgICAgfVxuICAgICAgICBcbiAgLy8gICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gIC8vICAgICB9KTtcbiAgICAgIFxuICAvLyAgICAgcmV0dXJuICgpID0+IHVuc3Vic2NyaWJlKCk7XG4gIC8vICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgLy8gICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBwYXJzaW5nIHNjZW5hcmlvOlwiLCBlcnJvcik7XG4gIC8vICAgICBhbGVydChcIlRoZXJlIHdhcyBhIHByb2JsZW0gbG9hZGluZyB0aGUgc2NlbmFyaW8uIFBsZWFzZSB0cnkgYWdhaW4uXCIpO1xuICAvLyAgICAgcm91dGVyLnB1c2goJy9zY2VuYXJpbycpO1xuICAvLyAgIH1cbiAgLy8gfSwgW10pO1xuXG4gIC8vIEZldGNoIHVwZGF0ZWQgY29udmVyc2F0aW9uIHN1Z2dlc3Rpb25zIGZyb20gYmFja2VuZFxuICBjb25zdCBmZXRjaFN1Z2dlc3Rpb25zID0gYXN5bmMgKHVzZXJuYW1lOiBzdHJpbmcpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXRTdWdnZXN0aW9ucyh1c2VybmFtZSk7XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5kYXRhICYmICFyZXNwb25zZS5lcnJvcikge1xuICAgICAgICBzZXRTdWdnZXN0aW9uTGlzdChyZXNwb25zZS5kYXRhLnN1Z2dlc3Rpb25zKTtcbiAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHN1Z2dlc3Rpb25zOlwiLCByZXNwb25zZS5lcnJvcik7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBzdWdnZXN0aW9uczpcIiwgZXJyb3IpO1xuICAgIH1cbiAgfTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZ1bmN0aW9uIGhhbmRsZUNsaWNrT3V0c2lkZShldmVudDogTW91c2VFdmVudCkge1xuICAgICAgaWYgKHByb2ZpbGVNZW51UmVmLmN1cnJlbnQgJiYgIXByb2ZpbGVNZW51UmVmLmN1cnJlbnQuY29udGFpbnMoZXZlbnQudGFyZ2V0IGFzIE5vZGUpKSB7XG4gICAgICAgIHNldFNob3dQcm9maWxlTWVudShmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgaGFuZGxlQ2xpY2tPdXRzaWRlKTtcbiAgICByZXR1cm4gKCkgPT4gZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBoYW5kbGVDbGlja091dHNpZGUpO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgaGFuZGxlQmFja0NsaWNrID0gKCkgPT4ge1xuICAgIHJvdXRlci5wdXNoKCcvc2NlbmFyaW8nKTtcbiAgfTtcbiAgXG4gIGNvbnN0IG5hdmlnYXRlVG9EYXNoYm9hcmQgPSAoKSA9PiB7XG4gICAgcm91dGVyLnB1c2goJy9kYXNoYm9hcmQnKTtcbiAgICBzZXRTaG93UHJvZmlsZU1lbnUoZmFsc2UpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUlucHV0Q2hhbmdlID0gKGV2ZW50OiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgIHNldElucHV0VGV4dChldmVudC50YXJnZXQudmFsdWUpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUtleVByZXNzID0gKGV2ZW50OiBSZWFjdC5LZXlib2FyZEV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB7XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgaGFuZGxlU2VuZE1lc3NhZ2UoKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gUGxheSBhdWRpbyB3aGVuIHNwZWFrZXIgYnV0dG9uIGlzIGNsaWNrZWRcbiAgY29uc3QgcGxheU1lc3NhZ2VBdWRpbyA9IChtZXNzYWdlSWQ6IG51bWJlciwgYXVkaW9Vcmw/OiBzdHJpbmcpID0+IHtcbiAgICBpZiAoIWF1ZGlvVXJsKSByZXR1cm47XG4gICAgXG4gICAgLy8gU3RvcCBhbnkgY3VycmVudGx5IHBsYXlpbmcgYXVkaW9cbiAgICBpZiAoYXVkaW9SZWYuY3VycmVudCkge1xuICAgICAgYXVkaW9SZWYuY3VycmVudC5wYXVzZSgpO1xuICAgICAgYXVkaW9SZWYuY3VycmVudC5jdXJyZW50VGltZSA9IDA7XG4gICAgICBzZXRJc1BsYXlpbmcobnVsbCk7XG4gICAgfVxuICAgIFxuICAgIC8vIElmIGNsaWNraW5nIG9uIHRoZSBjdXJyZW50bHkgcGxheWluZyBhdWRpbywganVzdCBzdG9wIGl0XG4gICAgaWYgKGlzUGxheWluZyA9PT0gYG1lc3NhZ2UtJHttZXNzYWdlSWR9YCkge1xuICAgICAgc2V0SXNQbGF5aW5nKG51bGwpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICAvLyBDcmVhdGUgYW5kIHBsYXkgbmV3IGF1ZGlvXG4gICAgY29uc3QgYXVkaW8gPSBuZXcgQXVkaW8oYGh0dHA6Ly9sb2NhbGhvc3Q6ODAwMCR7YXVkaW9Vcmx9YCk7XG4gICAgYXVkaW9SZWYuY3VycmVudCA9IGF1ZGlvO1xuICAgIFxuICAgIC8vIFNldCB0aGUgY3VycmVudGx5IHBsYXlpbmcgbWVzc2FnZSBJRFxuICAgIHNldElzUGxheWluZyhgbWVzc2FnZS0ke21lc3NhZ2VJZH1gKTtcbiAgICBcbiAgICAvLyBXaGVuIGF1ZGlvIGVuZHMsIHJlc2V0IHRoZSBwbGF5aW5nIHN0YXRlXG4gICAgYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCAoKSA9PiB7XG4gICAgICBzZXRJc1BsYXlpbmcobnVsbCk7XG4gICAgfSk7XG4gICAgXG4gICAgYXVkaW8ucGxheSgpLmNhdGNoKGUgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihcIkF1ZGlvIHBsYXliYWNrIGVycm9yOlwiLCBlKTtcbiAgICAgIHNldElzUGxheWluZyhudWxsKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVTZW5kTWVzc2FnZSA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoIWlucHV0VGV4dC50cmltKCkgfHwgIXNjZW5hcmlvKSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgdXNlck1lc3NhZ2UgPSBpbnB1dFRleHQudHJpbSgpO1xuICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gWy4uLnByZXYsIHsgdGV4dDogdXNlck1lc3NhZ2UsIHNlbmRlcjogJ3VzZXInIH1dKTtcbiAgICBzZXRJbnB1dFRleHQoJycpO1xuICAgIHNldElzTG9hZGluZyh0cnVlKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VybmFtZSA9IHVzZXIgPyAodXNlci5kaXNwbGF5TmFtZSB8fCB1c2VyLmVtYWlsPy5zcGxpdCgnQCcpWzBdIHx8ICdHdWVzdCcpIDogJ0d1ZXN0JztcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzZW5kQ2hhdE1lc3NhZ2UoXG4gICAgICAgIHVzZXJuYW1lLFxuICAgICAgICB1c2VyTWVzc2FnZSxcbiAgICAgICAgc2NlbmFyaW8udGl0bGUsIC8vIFVzaW5nIHRoZSBzY2VuYXJpbyB0aXRsZVxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHVzZXJMYW5ndWFnZVxuICAgICAgKTtcblxuICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZS5lcnJvcik7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gWy4uLnByZXYsIHsgXG4gICAgICAgICAgdGV4dDogcmVzcG9uc2UuZGF0YS5yZXNwb25zZSwgXG4gICAgICAgICAgc2VuZGVyOiAnYm90JyxcbiAgICAgICAgICBhdWRpb191cmw6IHJlc3BvbnNlLmRhdGEuYXVkaW9fdXJsXG4gICAgICAgIH1dKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmF1ZGlvX3VybCkge1xuICAgICAgICAgIC8vIENsaWNrIHRoZSBzcGVha2VyIGJ1dHRvbiB0byBwbGF5IG1lc3NhZ2UgYXVkaW9cbiAgICAgICAgICBwbGF5TWVzc2FnZUF1ZGlvKG1lc3NhZ2VzLmxlbmd0aCwgcmVzcG9uc2UuZGF0YS5hdWRpb191cmwpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEZldGNoIHVwZGF0ZWQgc3VnZ2VzdGlvbnMgYWZ0ZXIgbWVzc2FnZVxuICAgICAgYXdhaXQgZmV0Y2hTdWdnZXN0aW9ucyh1c2VybmFtZSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlbmRpbmcgbWVzc2FnZTonLCBlcnJvcik7XG4gICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFtcbiAgICAgICAgLi4ucHJldixcbiAgICAgICAgeyB0ZXh0OiBcIlNvcnJ5LCBJJ20gaGF2aW5nIHRyb3VibGUgY29ubmVjdGluZy4gUGxlYXNlIHRyeSBhZ2Fpbi5cIiwgc2VuZGVyOiAnYm90JyB9XG4gICAgICBdKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlRW5kU2NlbmFyaW8gPSAoKSA9PiB7XG4gICAgc2V0U2hvd01vZGFsKHRydWUpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVNhdmVDb252ZXJzYXRpb24gPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghc2NlbmFyaW8pIHJldHVybjtcbiAgICAgIFxuICAgICAgY29uc3Qgc2NlbmFyaW9UeXBlID0gc2NlbmFyaW8udGl0bGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMrL2csICdfJyk7XG4gICAgICBjb25zdCBzYXZlZENvbnZlcnNhdGlvbnMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKHNjZW5hcmlvVHlwZSkgfHwgJ1tdJyk7XG4gICAgICBcbiAgICAgIHNhdmVkQ29udmVyc2F0aW9ucy5wdXNoKHtcbiAgICAgICAgaWQ6IERhdGUubm93KCksXG4gICAgICAgIGRhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgc2NlbmFyaW86IHNjZW5hcmlvLnRpdGxlLFxuICAgICAgICBtZXNzYWdlczogbWVzc2FnZXMsXG4gICAgICAgIHVzZXJOYW1lOiB1c2VyID8gKHVzZXIuZGlzcGxheU5hbWUgfHwgdXNlci5lbWFpbD8uc3BsaXQoJ0AnKVswXSB8fCAnR3Vlc3QnKSA6ICdHdWVzdCcsXG4gICAgICAgIGxhbmd1YWdlOiB1c2VyTGFuZ3VhZ2VcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShzY2VuYXJpb1R5cGUsIEpTT04uc3RyaW5naWZ5KHNhdmVkQ29udmVyc2F0aW9ucykpO1xuICAgICAgcm91dGVyLnB1c2goJy90ZXh0Jyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBzYXZpbmcgY29udmVyc2F0aW9uOlwiLCBlcnJvcik7XG4gICAgICByb3V0ZXIucHVzaCgnL3RleHQnKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlRGlzY2FyZENvbnZlcnNhdGlvbiA9ICgpID0+IHtcbiAgICByb3V0ZXIucHVzaCgnL3RleHQnKTtcbiAgfTtcblxuICAvLyBBcHBseSBzdWdnZXN0aW9uIHRvIGlucHV0XG4gIGNvbnN0IGhhbmRsZVN1Z2dlc3Rpb25DbGljayA9IChzdWdnZXN0aW9uOiBzdHJpbmcpID0+IHtcbiAgICBzZXRJbnB1dFRleHQoc3VnZ2VzdGlvbik7XG4gIH07XG5cbiAgLy8gVG9nZ2xlIHZvaWNlIHJlY29yZGluZyAocGxhY2Vob2xkZXIpXG4gIGNvbnN0IHRvZ2dsZVJlY29yZGluZyA9ICgpID0+IHtcbiAgICBzZXRJc1JlY29yZGluZyghaXNSZWNvcmRpbmcpO1xuICAgIC8vIEFkZCBhY3R1YWwgcmVjb3JkaW5nIGxvZ2ljIGhlcmVcbiAgfTtcblxuICBpZiAobG9hZGluZykge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1pbi1oLXNjcmVlbiBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiXG4gICAgICAgIHN0eWxlPXt7IGJhY2tncm91bmRJbWFnZTogXCJ1cmwoJy9pY29ucy9iYWNrZ3JvdW5kMS5qcGcnKVwiLCBiYWNrZ3JvdW5kU2l6ZTogXCJjb3ZlclwiIH19PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFuaW1hdGUtc3BpbiByb3VuZGVkLWZ1bGwgaC0xMiB3LTEyIGJvcmRlci10LTIgYm9yZGVyLWItMiBib3JkZXItWyM0OGQxY2NdXCI+PC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cIm1pbi1oLXNjcmVlbiBiZy1ncmF5LTkwMCB0ZXh0LXdoaXRlIHJlbGF0aXZlXCJcbiAgICAgIHN0eWxlPXt7IGJhY2tncm91bmRJbWFnZTogXCJ1cmwoJy9pY29ucy9iYWNrZ3JvdW5kMS5qcGcnKVwiIH19XG4gICAgPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtOCBsZWZ0LTggei0xMFwiIHJlZj17cHJvZmlsZU1lbnVSZWZ9PlxuICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNob3dQcm9maWxlTWVudSghc2hvd1Byb2ZpbGVNZW51KX1cbiAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEwIGgtMTAgcm91bmRlZC1mdWxsIGJnLXdoaXRlLzEwIGhvdmVyOmJnLXdoaXRlLzIwIHRyYW5zaXRpb24tY29sb3JzIGR1cmF0aW9uLTIwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBvdmVyZmxvdy1oaWRkZW5cIlxuICAgICAgICA+XG4gICAgICAgICAge3VzZXI/LnBob3RvVVJMID8gKFxuICAgICAgICAgICAgPEltYWdlXG4gICAgICAgICAgICAgIHNyYz17dXNlci5waG90b1VSTH1cbiAgICAgICAgICAgICAgYWx0PVwiUHJvZmlsZVwiXG4gICAgICAgICAgICAgIHdpZHRoPXs0MH1cbiAgICAgICAgICAgICAgaGVpZ2h0PXs0MH1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwib2JqZWN0LWNvdmVyXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCBiZy1bIzQ4ZDFjY10gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC13aGl0ZSBmb250LXNlbWlib2xkIHRleHQtc21cIj5cbiAgICAgICAgICAgICAge3VzZXI/LmRpc3BsYXlOYW1lID8gdXNlci5kaXNwbGF5TmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSA6IFxuICAgICAgICAgICAgICAgdXNlcj8uZW1haWwgPyB1c2VyLmVtYWlsLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpIDogXCJHXCJ9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgXG4gICAgICAgIHtzaG93UHJvZmlsZU1lbnUgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTEyIGxlZnQtMCBiZy13aGl0ZSByb3VuZGVkLWxnIHNoYWRvdy1sZyBweS0yIG1pbi13LVsxODBweF0gdGV4dC1ncmF5LTgwMCB6LTIwXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB4LTQgcHktMiBib3JkZXItYiBib3JkZXItZ3JheS0yMDBcIj5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZm9udC1tZWRpdW1cIj57dXNlcj8uZGlzcGxheU5hbWUgfHwgXCJHdWVzdFwifTwvcD5cbiAgICAgICAgICAgICAge3VzZXI/LmVtYWlsICYmIChcbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj57dXNlci5lbWFpbH08L3A+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHgtNCBweS0yIGJvcmRlci1iIGJvcmRlci1ncmF5LTIwMFwiPlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5MYW5ndWFnZToge3VzZXJMYW5ndWFnZSA9PT0gJ2VuJyA/ICdFbmdsaXNoJyA6IHVzZXJMYW5ndWFnZSA9PT0gJ3poLUNOJyA/ICdDaGluZXNlJyA6ICdKYXBhbmVzZSd9PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICB7dXNlciA/IChcbiAgICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtuYXZpZ2F0ZVRvRGFzaGJvYXJkfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCB0ZXh0LWxlZnQgcHgtNCBweS0yIGhvdmVyOmJnLWdyYXktMTAwIHRyYW5zaXRpb24tY29sb3JzIGZsZXggaXRlbXMtY2VudGVyXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxzdmcgY2xhc3NOYW1lPVwidy00IGgtNCBtci0yXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XG4gICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9XCIyXCIgZD1cIk0xNiA3YTQgNCAwIDExLTggMCA0IDQgMCAwMTggMHpNMTIgMTRhNyA3IDAgMDAtNyA3aDE0YTcgNyAwIDAwLTctN3pcIiAvPlxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgIFByb2ZpbGUgRGFzaGJvYXJkXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiByb3V0ZXIucHVzaCgnL2xvZ2luJyl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHRleHQtbGVmdCBweC00IHB5LTIgaG92ZXI6YmctZ3JheS0xMDAgdHJhbnNpdGlvbi1jb2xvcnMgZmxleCBpdGVtcy1jZW50ZXJcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJ3LTQgaC00IG1yLTJcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cbiAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD1cIjJcIiBkPVwiTTExIDE2bC00LTRtMCAwbDQtNG0tNCA0aDE0bS01IDR2MWEzIDMgMCAwMS0zIDNINmEzIDMgMCAwMS0zLTNWN2EzIDMgMCAwMTMtM2g3YTMgMyAwIDAxMyAzdjFcIiAvPlxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgIFNpZ24gSW5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICBcbiAgICAgIDxidXR0b24gXG4gICAgICAgIG9uQ2xpY2s9e2hhbmRsZUJhY2tDbGlja31cbiAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTggbGVmdC0yNCB3LTEwIGgtMTAgcm91bmRlZC1mdWxsIGJnLXdoaXRlLzEwIGhvdmVyOmJnLXdoaXRlLzIwIHRyYW5zaXRpb24tY29sb3JzIGR1cmF0aW9uLTIwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiXG4gICAgICA+XG4gICAgICAgIDxJbWFnZVxuICAgICAgICAgIHNyYz1cIi9pY29ucy9iYWNrLnBuZ1wiXG4gICAgICAgICAgYWx0PVwiQmFja1wiXG4gICAgICAgICAgd2lkdGg9ezI0fVxuICAgICAgICAgIGhlaWdodD17MjR9XG4gICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC13aGl0ZVwiXG4gICAgICAgIC8+XG4gICAgICA8L2J1dHRvbj5cbiAgICAgIFxuICAgICAgPGJ1dHRvbiBcbiAgICAgICAgb25DbGljaz17aGFuZGxlRW5kU2NlbmFyaW99XG4gICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC04IHJpZ2h0LTggYmctWyMyMGIyYWFdIGhvdmVyOmJnLVsjMDA4MDgwXSBweC02IHB5LTIgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0yMDBcIlxuICAgICAgPlxuICAgICAgICBFbmQgU2NlbmFyaW9cbiAgICAgIDwvYnV0dG9uPlxuICAgICAgXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInB0LTI0IHB4LTQgbWF4LXctNnhsIG14LWF1dG9cIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGdhcC00XCI+XG4gICAgICAgICAgey8qIENvbnZlcnNhdGlvbiBhcmVhICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1bNjUlXVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLVs3MHZoXSBiZy1bI2YwZjhmZl0gcm91bmRlZC14bCBwLTYgb3ZlcmZsb3cteS1hdXRvIG1iLTRcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIHNwYWNlLXktNFwiPlxuICAgICAgICAgICAgICAgIHttZXNzYWdlcy5tYXAoKG1lc3NhZ2UsIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGtleT17aW5kZXh9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXggJHttZXNzYWdlLnNlbmRlciA9PT0gJ3VzZXInID8gJ2p1c3RpZnktZW5kJyA6ICdqdXN0aWZ5LXN0YXJ0J31gfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7bWVzc2FnZS5zZW5kZXIgPT09ICdib3QnICYmIChcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctOCBoLTggbXItMiBmbGV4LXNocmluay0wIHJvdW5kZWQtZnVsbCBvdmVyZmxvdy1oaWRkZW5cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxJbWFnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM9XCIvaWNvbnMvcm9ib3QuanBnXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0PVwiUm9ib3RcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD17MzJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD17MzJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm9iamVjdC1jb3ZlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgbWF4LXctc20gcm91bmRlZC1sZyBweC00IHB5LTIgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2Uuc2VuZGVyID09PSAndXNlcicgXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gJ2JnLWJsdWUtNTAwIHRleHQtd2hpdGUnIFxuICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdiZy1ncmF5LTIwMCB0ZXh0LWdyYXktODAwJ1xuICAgICAgICAgICAgICAgICAgICAgIH0gZ3JvdXAgcmVsYXRpdmVgfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAge21lc3NhZ2UudGV4dH1cbiAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICB7LyogU3BlYWtlciBidXR0b24gZm9yIGJvdCBtZXNzYWdlcyAqL31cbiAgICAgICAgICAgICAgICAgICAgICB7bWVzc2FnZS5zZW5kZXIgPT09ICdib3QnICYmIG1lc3NhZ2UuYXVkaW9fdXJsICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gcGxheU1lc3NhZ2VBdWRpbyhpbmRleCwgbWVzc2FnZS5hdWRpb191cmwpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSAtcmlnaHQtMTAgdG9wLTEvMiB0cmFuc2Zvcm0gLXRyYW5zbGF0ZS15LTEvMiB3LTggaC04IGJnLWdyYXktMTAwIHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBob3ZlcjpiZy1ncmF5LTIwMCB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJQbGF5IG1lc3NhZ2UgYXVkaW9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7aXNQbGF5aW5nID09PSBgbWVzc2FnZS0ke2luZGV4fWAgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbmltYXRlLXB1bHNlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW1hZ2Ugc3JjPVwiL2ljb25zL3NwZWFrZXIuanBnXCIgYWx0PVwiU3BlYWtlclwiIHdpZHRoPXsyNH0gaGVpZ2h0PXsyNH0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW1hZ2Ugc3JjPVwiL2ljb25zL3NwZWFrZXIuanBnXCIgYWx0PVwiU3BlYWtlclwiIHdpZHRoPXsyNH0gaGVpZ2h0PXsyNH0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICB7bWVzc2FnZS5zZW5kZXIgPT09ICd1c2VyJyAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTggaC04IG1sLTIgZmxleC1zaHJpbmstMCByb3VuZGVkLWZ1bGwgb3ZlcmZsb3ctaGlkZGVuIGJnLWJsdWUtMTAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dXNlcj8ucGhvdG9VUkwgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbWFnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYz17dXNlci5waG90b1VSTH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHQ9XCJVc2VyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD17MzJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PXszMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJvYmplY3QtY292ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1mdWxsIGJnLVsjNDhkMWNjXSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQgdGV4dC14c1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt1c2VyPy5kaXNwbGF5TmFtZSA/IHVzZXIuZGlzcGxheU5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgOiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyPy5lbWFpbCA/IHVzZXIuZW1haWwuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgOiBcIlVcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAge2lzTG9hZGluZyAmJiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1zdGFydFwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMiBiZy1ncmF5LTEwMCByb3VuZGVkLWxnIHB4LTQgcHktMlwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0yIGgtMiBiZy1ncmF5LTQwMCByb3VuZGVkLWZ1bGwgYW5pbWF0ZS1ib3VuY2VcIiBzdHlsZT17eyBhbmltYXRpb25EZWxheTogJzBzJyB9fT48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMiBoLTIgYmctZ3JheS00MDAgcm91bmRlZC1mdWxsIGFuaW1hdGUtYm91bmNlXCIgc3R5bGU9e3sgYW5pbWF0aW9uRGVsYXk6ICcwLjJzJyB9fT48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMiBoLTIgYmctZ3JheS00MDAgcm91bmRlZC1mdWxsIGFuaW1hdGUtYm91bmNlXCIgc3R5bGU9e3sgYW5pbWF0aW9uRGVsYXk6ICcwLjRzJyB9fT48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDxkaXYgcmVmPXttZXNzYWdlc0VuZFJlZn0gLz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGdhcC0yXCI+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXt0b2dnbGVSZWNvcmRpbmd9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtcbiAgICAgICAgICAgICAgICAgIGlzUmVjb3JkaW5nIFxuICAgICAgICAgICAgICAgICAgICA/ICdiZy1yZWQtNTAwIGhvdmVyOmJnLXJlZC02MDAnIFxuICAgICAgICAgICAgICAgICAgICA6ICdiZy1ncmF5LTIwMCBob3ZlcjpiZy1ncmF5LTMwMCdcbiAgICAgICAgICAgICAgICB9IHB4LTMgcHktMyByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzIGR1cmF0aW9uLTIwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciByZWxhdGl2ZWB9XG4gICAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cIlN0YXJ0IHZvaWNlIHJlY29yZGluZ1wiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTYgdy02XCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlPXtpc1JlY29yZGluZyA/IFwid2hpdGVcIiA6IFwiYmxhY2tcIn0+XG4gICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNMTkgMTFhNyA3IDAgMDEtNyA3bTAgMGE3IDcgMCAwMS03LTdtNyA3djRtMCAwSDhtNCAwaDRtLTQtOGEzIDMgMCAwMS0zLTNWNWEzIDMgMCAxMTYgMHY2YTMgMyAwIDAxLTMgM3pcIiAvPlxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgIHtpc1JlY29yZGluZyAmJiAoXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtMCByaWdodC0wIGZsZXggaC0zIHctM1wiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJhbmltYXRlLXBpbmcgYWJzb2x1dGUgaW5saW5lLWZsZXggaC1mdWxsIHctZnVsbCByb3VuZGVkLWZ1bGwgYmctcmVkLTQwMCBvcGFjaXR5LTc1XCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJyZWxhdGl2ZSBpbmxpbmUtZmxleCByb3VuZGVkLWZ1bGwgaC0zIHctMyBiZy1yZWQtNTAwXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuXG4gICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICB2YWx1ZT17aW5wdXRUZXh0fVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVJbnB1dENoYW5nZX1cbiAgICAgICAgICAgICAgICBvbktleVByZXNzPXtoYW5kbGVLZXlQcmVzc31cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17aXNSZWNvcmRpbmcgPyBcIkxpc3RlbmluZy4uLlwiIDogXCJUeXBlIHlvdXIgbWVzc2FnZS4uLlwifVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXgtMSBiZy13aGl0ZSB0ZXh0LWJsYWNrIHB4LTQgcHktMyByb3VuZGVkLWxnIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1ibHVlLTUwMCAke1xuICAgICAgICAgICAgICAgICAgaXNSZWNvcmRpbmcgPyAnYW5pbWF0ZS1wdWxzZSBib3JkZXItMiBib3JkZXItcmVkLTQwMCcgOiAnJ1xuICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc1JlY29yZGluZyB8fCBpc0xvYWRpbmd9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVNlbmRNZXNzYWdlfVxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc1JlY29yZGluZyB8fCBpc0xvYWRpbmcgfHwgIWlucHV0VGV4dC50cmltKCl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctWyMyMGIyYWFdIGhvdmVyOmJnLVsjMDA4MDgwXSBweC00IHB5LTIgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0yMDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZGlzYWJsZWQ6b3BhY2l0eS01MFwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7aXNMb2FkaW5nID8gKFxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbmltYXRlLXNwaW4gcm91bmRlZC1mdWxsIGgtNSB3LTUgYm9yZGVyLXQtMiBib3JkZXItYi0yIGJvcmRlci13aGl0ZVwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICA8SW1hZ2Ugc3JjPVwiL2ljb25zL3NlbmQucG5nXCIgYWx0PVwiU2VuZFwiIHdpZHRoPXsyNH0gaGVpZ2h0PXsyNH0gLz5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgey8qIFN1Z2dlc3Rpb25zIHBhbmVsICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1bMzUlXVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLVs3MHZoXSBiZy1bI2YwZjhmZl0gcm91bmRlZC14bCBwLTYgb3ZlcmZsb3cteS1hdXRvIG1iLTRcIj5cblxuICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtZ3JheS04MDAgbWItM1wiPlN1Z2dlc3RlZCBSZXNwb25zZXM8L2gzPlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAge3N1Z2dlc3Rpb25MaXN0Lmxlbmd0aCA+IDAgPyAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTNcIj5cbiAgICAgICAgICAgICAgICAgIHtzdWdnZXN0aW9uTGlzdC5tYXAoKHN1Z2dlc3Rpb24sIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICBrZXk9e2luZGV4fVxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBiZy13aGl0ZSByb3VuZGVkLWxnIHAtMyBzaGFkb3ctc20gaG92ZXI6YmctZ3JheS01MCB0cmFuc2l0aW9uLWNvbG9ycyB0ZXh0LWxlZnQgZmxleCBpdGVtcy1jZW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZVN1Z2dlc3Rpb25DbGljayhzdWdnZXN0aW9uKX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZsZXgtc2hyaW5rLTAgdy02IGgtNiBiZy1bIzIwYjJhYV0gcm91bmRlZC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtd2hpdGUgdGV4dC14cyBtci0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7aW5kZXggKyAxfVxuICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNzAwXCI+e3N1Z2dlc3Rpb259PC9wPlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctZ3JheS01MCByb3VuZGVkLWxnIHAtNCB0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTUwMFwiPlN1Z2dlc3Rpb25zIHdpbGwgYXBwZWFyIGhlcmUgYWZ0ZXIgeW91IHN0YXJ0IGNoYXR0aW5nLjwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgXG4gICAgICB7c2hvd01vZGFsICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmaXhlZCBpbnNldC0wIGJnLWJsYWNrLzcwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHotNTBcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIHJvdW5kZWQteGwgcC02IG1heC13LW1kIHctZnVsbCBteC00XCI+XG4gICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC14bCBmb250LWJvbGQgdGV4dC1ncmF5LTgwMCBtYi00XCI+RW5kIFNjZW5hcmlvPC9oMz5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtZ3JheS02MDAgbWItNlwiPllvdXIgcHJhY3RpY2Ugc2Vzc2lvbiB3aWxsIGJlIGNsb3NlZC4gRG8geW91IHdhbnQgdG8gc2F2ZSB0aGlzIGNvbnZlcnNhdGlvbiB0byB5b3VyIHByb2ZpbGU/PC9wPlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZ2FwLTQganVzdGlmeS1lbmRcIj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVEaXNjYXJkQ29udmVyc2F0aW9ufVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTQgcHktMiBiZy1ncmF5LTIwMCBob3ZlcjpiZy1ncmF5LTMwMCB0ZXh0LWdyYXktODAwIHJvdW5kZWQtbGcgdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgRG9uJ3QgU2F2ZVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVTYXZlQ29udmVyc2F0aW9ufVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTQgcHktMiBiZy1ibHVlLTUwMCBob3ZlcjpiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtbGcgdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgU2F2ZVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBSb2xlcGxheVBhZ2U7Il0sIm5hbWVzIjpbIlJlYWN0IiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJJbWFnZSIsInVzZVJvdXRlciIsImF1dGgiLCJvbkF1dGhTdGF0ZUNoYW5nZWQiLCJzZW5kQ2hhdE1lc3NhZ2UiLCJnZXRTdWdnZXN0aW9ucyIsIlJvbGVwbGF5UGFnZSIsInVzZXIiLCJzZXRVc2VyIiwibG9hZGluZyIsInNldExvYWRpbmciLCJzaG93UHJvZmlsZU1lbnUiLCJzZXRTaG93UHJvZmlsZU1lbnUiLCJ1c2VyTGFuZ3VhZ2UiLCJzZXRVc2VyTGFuZ3VhZ2UiLCJpbnB1dFRleHQiLCJzZXRJbnB1dFRleHQiLCJtZXNzYWdlcyIsInNldE1lc3NhZ2VzIiwiaXNMb2FkaW5nIiwic2V0SXNMb2FkaW5nIiwic2NlbmFyaW8iLCJzZXRTY2VuYXJpbyIsImlzUGxheWluZyIsInNldElzUGxheWluZyIsInNob3dNb2RhbCIsInNldFNob3dNb2RhbCIsImlzUmVjb3JkaW5nIiwic2V0SXNSZWNvcmRpbmciLCJzdWdnZXN0aW9uTGlzdCIsInNldFN1Z2dlc3Rpb25MaXN0IiwicHJvZmlsZU1lbnVSZWYiLCJtZXNzYWdlc0VuZFJlZiIsImF1ZGlvUmVmIiwicm91dGVyIiwic2Nyb2xsVG9Cb3R0b20iLCJjdXJyZW50Iiwic2Nyb2xsSW50b1ZpZXciLCJiZWhhdmlvciIsImluaXRpYWxpemVDb252ZXJzYXRpb24iLCJ1c2VybmFtZSIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJkYXRhIiwianNvbiIsImNvbnNvbGUiLCJsb2ciLCJ0ZXh0Iiwic2VuZGVyIiwiZmV0Y2hTdWdnZXN0aW9ucyIsImVycm9yIiwiZmV0Y2hVc2VyQW5kU2NlbmFyaW8iLCJzYXZlZFNjZW5hcmlvIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImFsZXJ0IiwicHVzaCIsInBhcnNlZFNjZW5hcmlvIiwicGFyc2UiLCJ1bnN1YnNjcmliZSIsImN1cnJlbnRVc2VyIiwic2F2ZWRMb2NhbGUiLCJkaXNwbGF5TmFtZSIsImVtYWlsIiwic3BsaXQiLCJzdWdnZXN0aW9ucyIsImhhbmRsZUNsaWNrT3V0c2lkZSIsImV2ZW50IiwiY29udGFpbnMiLCJ0YXJnZXQiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaGFuZGxlQmFja0NsaWNrIiwibmF2aWdhdGVUb0Rhc2hib2FyZCIsImhhbmRsZUlucHV0Q2hhbmdlIiwidmFsdWUiLCJoYW5kbGVLZXlQcmVzcyIsImtleSIsImhhbmRsZVNlbmRNZXNzYWdlIiwicGxheU1lc3NhZ2VBdWRpbyIsIm1lc3NhZ2VJZCIsImF1ZGlvVXJsIiwicGF1c2UiLCJjdXJyZW50VGltZSIsImF1ZGlvIiwiQXVkaW8iLCJwbGF5IiwiY2F0Y2giLCJlIiwidHJpbSIsInVzZXJNZXNzYWdlIiwicHJldiIsInRpdGxlIiwidW5kZWZpbmVkIiwiRXJyb3IiLCJhdWRpb191cmwiLCJsZW5ndGgiLCJoYW5kbGVFbmRTY2VuYXJpbyIsImhhbmRsZVNhdmVDb252ZXJzYXRpb24iLCJzY2VuYXJpb1R5cGUiLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJzYXZlZENvbnZlcnNhdGlvbnMiLCJpZCIsIkRhdGUiLCJub3ciLCJkYXRlIiwidG9JU09TdHJpbmciLCJ1c2VyTmFtZSIsImxhbmd1YWdlIiwic2V0SXRlbSIsImhhbmRsZURpc2NhcmRDb252ZXJzYXRpb24iLCJoYW5kbGVTdWdnZXN0aW9uQ2xpY2siLCJzdWdnZXN0aW9uIiwidG9nZ2xlUmVjb3JkaW5nIiwiZGl2IiwiY2xhc3NOYW1lIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJiYWNrZ3JvdW5kU2l6ZSIsInJlZiIsImJ1dHRvbiIsIm9uQ2xpY2siLCJwaG90b1VSTCIsInNyYyIsImFsdCIsIndpZHRoIiwiaGVpZ2h0IiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJwIiwic3ZnIiwiZmlsbCIsInN0cm9rZSIsInZpZXdCb3giLCJwYXRoIiwic3Ryb2tlTGluZWNhcCIsInN0cm9rZUxpbmVqb2luIiwic3Ryb2tlV2lkdGgiLCJkIiwibWFwIiwibWVzc2FnZSIsImluZGV4IiwiYXJpYS1sYWJlbCIsImFuaW1hdGlvbkRlbGF5IiwieG1sbnMiLCJzcGFuIiwiaW5wdXQiLCJ0eXBlIiwib25DaGFuZ2UiLCJvbktleVByZXNzIiwicGxhY2Vob2xkZXIiLCJkaXNhYmxlZCIsImgzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/app/roleplay/page.tsx\n");
./NewUI/.next/static/chunks/app/roleplay/page.js:eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/image */ \"(app-pages-browser)/./node_modules/next/dist/api/image.js\");\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/./node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var _server_firebase__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../server/firebase */ \"(app-pages-browser)/./server/firebase.js\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! firebase/auth */ \"(app-pages-browser)/./node_modules/firebase/auth/dist/esm/index.esm.js\");\n/* harmony import */ var _services_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/services/api */ \"(app-pages-browser)/./src/services/api.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\nconst RoleplayPage = ()=>{\n    _s();\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [showProfileMenu, setShowProfileMenu] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [userLanguage, setUserLanguage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('en');\n    const [inputText, setInputText] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [scenario, setScenario] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isPlaying, setIsPlaying] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [showModal, setShowModal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isRecording, setIsRecording] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [suggestionList, setSuggestionList] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const profileMenuRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const messagesEndRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const audioRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const router = (0,next_navigation__WEBPACK_IMPORTED_MODULE_3__.useRouter)();\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"RoleplayPage.useEffect\": ()=>{\n            scrollToBottom();\n        }\n    }[\"RoleplayPage.useEffect\"], [\n        messages\n    ]);\n    const scrollToBottom = ()=>{\n        var _messagesEndRef_current;\n        (_messagesEndRef_current = messagesEndRef.current) === null || _messagesEndRef_current === void 0 ? void 0 : _messagesEndRef_current.scrollIntoView({\n            behavior: \"smooth\"\n        });\n    };\n    const initializeConversation = async (username)=>{\n        try {\n            // Call backend to set scenario & get response\n            // const scenarioResponse = await setScenario(username);\n            // Fetch initial response from backend\n            const response = await fetch(\"/api/get_scenario_response\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    username\n                })\n            });\n            const data = await response.json();\n            console.log(\"ðŸ¤– LLM Response:\", data.response);\n            // Set initial message from backend\n            setMessages([\n                {\n                    text: data.response,\n                    sender: \"bot\"\n                }\n            ]);\n            // Fetch initial suggestions\n            fetchSuggestions(username);\n        } catch (error) {\n            console.error(\"Error initializing conversation:\", error);\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"RoleplayPage.useEffect\": ()=>{\n            setLoading(true);\n            const fetchUserAndScenario = {\n                \"RoleplayPage.useEffect.fetchUserAndScenario\": async ()=>{\n                    try {\n                        // Load scenario from localStorage\n                        const savedScenario = localStorage.getItem(\"currentScenario\");\n                        if (!savedScenario) {\n                            alert(\"No scenario selected. Please select a scenario first.\");\n                            router.push(\"/scenario\");\n                            return;\n                        }\n                        const parsedScenario = JSON.parse(savedScenario);\n                        setScenario(parsedScenario);\n                        // Authenticate user\n                        const unsubscribe = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_5__.onAuthStateChanged)(_server_firebase__WEBPACK_IMPORTED_MODULE_4__.auth, {\n                            \"RoleplayPage.useEffect.fetchUserAndScenario.unsubscribe\": async (currentUser)=>{\n                                setUser(currentUser);\n                                // Get language preference (from localStorage or backend)\n                                const savedLocale = localStorage.getItem(\"locale\") || \"en\";\n                                setUserLanguage(savedLocale);\n                                if (currentUser) {\n                                    var _currentUser_email;\n                                    const username = currentUser.displayName || ((_currentUser_email = currentUser.email) === null || _currentUser_email === void 0 ? void 0 : _currentUser_email.split(\"@\")[0]) || \"Guest\";\n                                    console.log(\"ðŸ‘¤ User authenticated:\", username);\n                                    // Initialize conversation (calls backend for scenario & LLM response)\n                                    await initializeConversation(username);\n                                }\n                                setLoading(false);\n                            }\n                        }[\"RoleplayPage.useEffect.fetchUserAndScenario.unsubscribe\"]);\n                        return ({\n                            \"RoleplayPage.useEffect.fetchUserAndScenario\": ()=>unsubscribe()\n                        })[\"RoleplayPage.useEffect.fetchUserAndScenario\"];\n                    } catch (error) {\n                        console.error(\"Error loading user scenario:\", error);\n                        alert(\"There was a problem loading the scenario. Please try again.\");\n                        router.push(\"/scenario\");\n                    }\n                }\n            }[\"RoleplayPage.useEffect.fetchUserAndScenario\"];\n            fetchUserAndScenario();\n        }\n    }[\"RoleplayPage.useEffect\"], []);\n    // // Initialize scenario conversation with backend\n    // const initializeConversation = async (username: string, scenarioTitle: string) => {\n    //   try {\n    //     const scenarioResponse = await setScenario(username, scenarioTitle);\n    //     fetchSuggestions(username); // Initial suggestions\n    //   } catch (error) {\n    //     console.error(\"Error initializing conversation:\", error);\n    //   }\n    // };\n    // useEffect(() => {\n    //   // Load the scenario from localStorage\n    //   const savedScenario = localStorage.getItem('currentScenario');\n    //   if (!savedScenario) {\n    //     // If no scenario is found, redirect back to scenario selection\n    //     alert(\"No scenario selected. Please select a scenario first.\");\n    //     router.push('/scenario');\n    //     return;\n    //   }\n    //   try {\n    //     const parsedScenario = JSON.parse(savedScenario);\n    //     setScenario(parsedScenario);\n    //     const unsubscribe = onAuthStateChanged(auth, async (currentUser) => {\n    //       setUser(currentUser);\n    //       const savedLocale = localStorage.getItem('locale') || 'en';\n    //       setUserLanguage(savedLocale);\n    //       if (currentUser) {\n    //         const username = currentUser.displayName || currentUser.email?.split('@')[0] || 'Guest';\n    //         await initializeConversation(username, parsedScenario.title);\n    //         setMessages([\n    //           { \n    //             text: `Hello${currentUser.displayName ? ', ' + currentUser.displayName : ''}! I'll be your conversation partner for this ${parsedScenario.title} scenario. How can I help you today?`, \n    //             sender: 'bot' \n    //           }\n    //         ]);\n    //       } else {\n    //         setMessages([\n    //           { \n    //             text: `Welcome to the ${parsedScenario.title} scenario! I'll be your conversation partner. How would you like to start?`, \n    //             sender: 'bot' \n    //           }\n    //         ]);\n    //       }\n    //       setLoading(false);\n    //     });\n    //     return () => unsubscribe();\n    //   } catch (error) {\n    //     console.error(\"Error parsing scenario:\", error);\n    //     alert(\"There was a problem loading the scenario. Please try again.\");\n    //     router.push('/scenario');\n    //   }\n    // }, []);\n    // Fetch updated conversation suggestions from backend\n    const fetchSuggestions = async (username)=>{\n        try {\n            const response = await (0,_services_api__WEBPACK_IMPORTED_MODULE_6__.getSuggestions)(username);\n            if (response && response.data && !response.error) {\n                setSuggestionList(response.data.suggestions);\n            } else if (response && response.error) {\n                console.error(\"Error fetching suggestions:\", response.error);\n            }\n        } catch (error) {\n            console.error(\"Error fetching suggestions:\", error);\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"RoleplayPage.useEffect\": ()=>{\n            function handleClickOutside(event) {\n                if (profileMenuRef.current && !profileMenuRef.current.contains(event.target)) {\n                    setShowProfileMenu(false);\n                }\n            }\n            document.addEventListener(\"mousedown\", handleClickOutside);\n            return ({\n                \"RoleplayPage.useEffect\": ()=>document.removeEventListener(\"mousedown\", handleClickOutside)\n            })[\"RoleplayPage.useEffect\"];\n        }\n    }[\"RoleplayPage.useEffect\"], []);\n    const handleBackClick = ()=>{\n        router.push('/scenario');\n    };\n    const navigateToDashboard = ()=>{\n        router.push('/dashboard');\n        setShowProfileMenu(false);\n    };\n    const handleInputChange = (event)=>{\n        setInputText(event.target.value);\n    };\n    const handleKeyPress = (event)=>{\n        if (event.key === 'Enter') {\n            handleSendMessage();\n        }\n    };\n    // Play audio when speaker button is clicked\n    const playMessageAudio = (messageId, audioUrl)=>{\n        if (!audioUrl) return;\n        // Stop any currently playing audio\n        if (audioRef.current) {\n            audioRef.current.pause();\n            audioRef.current.currentTime = 0;\n            setIsPlaying(null);\n        }\n        // If clicking on the currently playing audio, just stop it\n        if (isPlaying === \"message-\".concat(messageId)) {\n            setIsPlaying(null);\n            return;\n        }\n        // Create and play new audio\n        const audio = new Audio(\"http://localhost:8000\".concat(audioUrl));\n        audioRef.current = audio;\n        // Set the currently playing message ID\n        setIsPlaying(\"message-\".concat(messageId));\n        // When audio ends, reset the playing state\n        audio.addEventListener('ended', ()=>{\n            setIsPlaying(null);\n        });\n        audio.play().catch((e)=>{\n            console.error(\"Audio playback error:\", e);\n            setIsPlaying(null);\n        });\n    };\n    const handleSendMessage = async ()=>{\n        if (!inputText.trim() || !scenario) return;\n        const userMessage = inputText.trim();\n        setMessages((prev)=>[\n                ...prev,\n                {\n                    text: userMessage,\n                    sender: 'user'\n                }\n            ]);\n        setInputText('');\n        setIsLoading(true);\n        try {\n            var _user_email;\n            const username = user ? user.displayName || ((_user_email = user.email) === null || _user_email === void 0 ? void 0 : _user_email.split('@')[0]) || 'Guest' : 'Guest';\n            const response = await (0,_services_api__WEBPACK_IMPORTED_MODULE_6__.sendChatMessage)(username, userMessage, scenario.title, undefined, userLanguage);\n            if (response && response.error) {\n                throw new Error(response.error);\n            }\n            if (response && response.data) {\n                setMessages((prev)=>[\n                        ...prev,\n                        {\n                            text: response.data.response,\n                            sender: 'bot',\n                            audio_url: response.data.audio_url\n                        }\n                    ]);\n                if (response.data.audio_url) {\n                    // Click the speaker button to play message audio\n                    playMessageAudio(messages.length, response.data.audio_url);\n                }\n            }\n            // Fetch updated suggestions after message\n            await fetchSuggestions(username);\n        } catch (error) {\n            console.error('Error sending message:', error);\n            setMessages((prev)=>[\n                    ...prev,\n                    {\n                        text: \"Sorry, I'm having trouble connecting. Please try again.\",\n                        sender: 'bot'\n                    }\n                ]);\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    const handleEndScenario = ()=>{\n        setShowModal(true);\n    };\n    const handleSaveConversation = async ()=>{\n        try {\n            var _user_email;\n            if (!scenario) return;\n            const scenarioType = scenario.title.toLowerCase().replace(/\\s+/g, '_');\n            const savedConversations = JSON.parse(localStorage.getItem(scenarioType) || '[]');\n            savedConversations.push({\n                id: Date.now(),\n                date: new Date().toISOString(),\n                scenario: scenario.title,\n                messages: messages,\n                userName: user ? user.displayName || ((_user_email = user.email) === null || _user_email === void 0 ? void 0 : _user_email.split('@')[0]) || 'Guest' : 'Guest',\n                language: userLanguage\n            });\n            localStorage.setItem(scenarioType, JSON.stringify(savedConversations));\n            router.push('/text');\n        } catch (error) {\n            console.error(\"Error saving conversation:\", error);\n            router.push('/text');\n        }\n    };\n    const handleDiscardConversation = ()=>{\n        router.push('/text');\n    };\n    // Apply suggestion to input\n    const handleSuggestionClick = (suggestion)=>{\n        setInputText(suggestion);\n    };\n    // Toggle voice recording (placeholder)\n    const toggleRecording = ()=>{\n        setIsRecording(!isRecording);\n    // Add actual recording logic here\n    };\n    if (loading) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"min-h-screen flex items-center justify-center\",\n            style: {\n                backgroundImage: \"url('/icons/background1.jpg')\",\n                backgroundSize: \"cover\"\n            },\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#48d1cc]\"\n            }, void 0, false, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 362,\n                columnNumber: 9\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n            lineNumber: 360,\n            columnNumber: 7\n        }, undefined);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"min-h-screen bg-gray-900 text-white relative\",\n        style: {\n            backgroundImage: \"url('/icons/background1.jpg')\"\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute top-8 left-8 z-10\",\n                ref: profileMenuRef,\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>setShowProfileMenu(!showProfileMenu),\n                        className: \"w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 transition-colors duration-200 flex items-center justify-center overflow-hidden\",\n                        children: (user === null || user === void 0 ? void 0 : user.photoURL) ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                            src: user.photoURL,\n                            alt: \"Profile\",\n                            width: 40,\n                            height: 40,\n                            className: \"object-cover\"\n                        }, void 0, false, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 377,\n                            columnNumber: 13\n                        }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"w-full h-full bg-[#48d1cc] flex items-center justify-center text-white font-semibold text-sm\",\n                            children: (user === null || user === void 0 ? void 0 : user.displayName) ? user.displayName.charAt(0).toUpperCase() : (user === null || user === void 0 ? void 0 : user.email) ? user.email.charAt(0).toUpperCase() : \"G\"\n                        }, void 0, false, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 385,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                        lineNumber: 372,\n                        columnNumber: 9\n                    }, undefined),\n                    showProfileMenu && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"absolute top-12 left-0 bg-white rounded-lg shadow-lg py-2 min-w-[180px] text-gray-800 z-20\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"px-4 py-2 border-b border-gray-200\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        className: \"font-medium\",\n                                        children: (user === null || user === void 0 ? void 0 : user.displayName) || \"Guest\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 395,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    (user === null || user === void 0 ? void 0 : user.email) && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        className: \"text-xs text-gray-500\",\n                                        children: user.email\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 397,\n                                        columnNumber: 17\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                lineNumber: 394,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"px-4 py-2 border-b border-gray-200\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-xs text-gray-500\",\n                                    children: [\n                                        \"Language: \",\n                                        userLanguage === 'en' ? 'English' : userLanguage === 'zh-CN' ? 'Chinese' : 'Japanese'\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                    lineNumber: 401,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                lineNumber: 400,\n                                columnNumber: 13\n                            }, undefined),\n                            user ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: navigateToDashboard,\n                                className: \"w-full text-left px-4 py-2 hover:bg-gray-100 transition-colors flex items-center\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        className: \"w-4 h-4 mr-2\",\n                                        fill: \"none\",\n                                        stroke: \"currentColor\",\n                                        viewBox: \"0 0 24 24\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\",\n                                            strokeWidth: \"2\",\n                                            d: \"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 409,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 408,\n                                        columnNumber: 17\n                                    }, undefined),\n                                    \"Profile Dashboard\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                lineNumber: 404,\n                                columnNumber: 15\n                            }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>router.push('/login'),\n                                className: \"w-full text-left px-4 py-2 hover:bg-gray-100 transition-colors flex items-center\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        className: \"w-4 h-4 mr-2\",\n                                        fill: \"none\",\n                                        stroke: \"currentColor\",\n                                        viewBox: \"0 0 24 24\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\",\n                                            strokeWidth: \"2\",\n                                            d: \"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 419,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 418,\n                                        columnNumber: 17\n                                    }, undefined),\n                                    \"Sign In\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                lineNumber: 414,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                        lineNumber: 393,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 371,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: handleBackClick,\n                className: \"absolute top-8 left-24 w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 transition-colors duration-200 flex items-center justify-center\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                    src: \"/icons/back.png\",\n                    alt: \"Back\",\n                    width: 24,\n                    height: 24,\n                    className: \"text-white\"\n                }, void 0, false, {\n                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                    lineNumber: 432,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 428,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: handleEndScenario,\n                className: \"absolute top-8 right-8 bg-[#20b2aa] hover:bg-[#008080] px-6 py-2 rounded-lg transition-colors duration-200\",\n                children: \"End Scenario\"\n            }, void 0, false, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 441,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"pt-24 px-4 max-w-6xl mx-auto\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex gap-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"w-[65%]\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"h-[70vh] bg-[#f0f8ff] rounded-xl p-6 overflow-y-auto mb-4\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex flex-col space-y-4\",\n                                        children: [\n                                            messages.map((message, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex \".concat(message.sender === 'user' ? 'justify-end' : 'justify-start'),\n                                                    children: [\n                                                        message.sender === 'bot' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"w-8 h-8 mr-2 flex-shrink-0 rounded-full overflow-hidden\",\n                                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                                                src: \"/icons/robot.jpg\",\n                                                                alt: \"Robot\",\n                                                                width: 32,\n                                                                height: 32,\n                                                                className: \"object-cover\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                lineNumber: 461,\n                                                                columnNumber: 25\n                                                            }, undefined)\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 460,\n                                                            columnNumber: 23\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"max-w-sm rounded-lg px-4 py-2 \".concat(message.sender === 'user' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-800', \" group relative\"),\n                                                            children: [\n                                                                message.text,\n                                                                message.sender === 'bot' && message.audio_url && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                                    onClick: ()=>playMessageAudio(index, message.audio_url),\n                                                                    className: \"absolute -right-10 top-1/2 transform -translate-y-1/2 w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200 transition-colors\",\n                                                                    \"aria-label\": \"Play message audio\",\n                                                                    children: isPlaying === \"message-\".concat(index) ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                        className: \"animate-pulse\",\n                                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                                                            src: \"/icons/speaker.jpg\",\n                                                                            alt: \"Speaker\",\n                                                                            width: 24,\n                                                                            height: 24\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                            lineNumber: 488,\n                                                                            columnNumber: 31\n                                                                        }, undefined)\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                        lineNumber: 487,\n                                                                        columnNumber: 29\n                                                                    }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                                                        src: \"/icons/speaker.jpg\",\n                                                                        alt: \"Speaker\",\n                                                                        width: 24,\n                                                                        height: 24\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                        lineNumber: 491,\n                                                                        columnNumber: 29\n                                                                    }, undefined)\n                                                                }, void 0, false, {\n                                                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                    lineNumber: 481,\n                                                                    columnNumber: 25\n                                                                }, undefined)\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 470,\n                                                            columnNumber: 21\n                                                        }, undefined),\n                                                        message.sender === 'user' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"w-8 h-8 ml-2 flex-shrink-0 rounded-full overflow-hidden bg-blue-100 flex items-center justify-center\",\n                                                            children: (user === null || user === void 0 ? void 0 : user.photoURL) ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                                                src: user.photoURL,\n                                                                alt: \"User\",\n                                                                width: 32,\n                                                                height: 32,\n                                                                className: \"object-cover\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                lineNumber: 499,\n                                                                columnNumber: 27\n                                                            }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"w-full h-full bg-[#48d1cc] flex items-center justify-center text-white font-semibold text-xs\",\n                                                                children: (user === null || user === void 0 ? void 0 : user.displayName) ? user.displayName.charAt(0).toUpperCase() : (user === null || user === void 0 ? void 0 : user.email) ? user.email.charAt(0).toUpperCase() : \"U\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                lineNumber: 507,\n                                                                columnNumber: 27\n                                                            }, undefined)\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 497,\n                                                            columnNumber: 23\n                                                        }, undefined)\n                                                    ]\n                                                }, index, true, {\n                                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                    lineNumber: 455,\n                                                    columnNumber: 19\n                                                }, undefined)),\n                                            isLoading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex justify-start\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex items-center space-x-2 bg-gray-100 rounded-lg px-4 py-2\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",\n                                                            style: {\n                                                                animationDelay: '0s'\n                                                            }\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 519,\n                                                            columnNumber: 23\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",\n                                                            style: {\n                                                                animationDelay: '0.2s'\n                                                            }\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 520,\n                                                            columnNumber: 23\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",\n                                                            style: {\n                                                                animationDelay: '0.4s'\n                                                            }\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 521,\n                                                            columnNumber: 23\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                    lineNumber: 518,\n                                                    columnNumber: 21\n                                                }, undefined)\n                                            }, void 0, false, {\n                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                lineNumber: 517,\n                                                columnNumber: 19\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                ref: messagesEndRef\n                                            }, void 0, false, {\n                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                lineNumber: 525,\n                                                columnNumber: 17\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 453,\n                                        columnNumber: 15\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                    lineNumber: 452,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex gap-2\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: toggleRecording,\n                                            className: \"\".concat(isRecording ? 'bg-red-500 hover:bg-red-600' : 'bg-gray-200 hover:bg-gray-300', \" px-3 py-3 rounded-lg transition-colors duration-200 flex items-center justify-center relative\"),\n                                            \"aria-label\": \"Start voice recording\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                    xmlns: \"http://www.w3.org/2000/svg\",\n                                                    className: \"h-6 w-6\",\n                                                    fill: \"none\",\n                                                    viewBox: \"0 0 24 24\",\n                                                    stroke: isRecording ? \"white\" : \"black\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                        strokeLinecap: \"round\",\n                                                        strokeLinejoin: \"round\",\n                                                        strokeWidth: 2,\n                                                        d: \"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                        lineNumber: 540,\n                                                        columnNumber: 19\n                                                    }, undefined)\n                                                }, void 0, false, {\n                                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                    lineNumber: 539,\n                                                    columnNumber: 17\n                                                }, undefined),\n                                                isRecording && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"absolute top-0 right-0 flex h-3 w-3\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 544,\n                                                            columnNumber: 21\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"relative inline-flex rounded-full h-3 w-3 bg-red-500\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 545,\n                                                            columnNumber: 21\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                    lineNumber: 543,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 530,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                            type: \"text\",\n                                            value: inputText,\n                                            onChange: handleInputChange,\n                                            onKeyPress: handleKeyPress,\n                                            placeholder: isRecording ? \"Listening...\" : \"Type your message...\",\n                                            className: \"flex-1 bg-white text-black px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 \".concat(isRecording ? 'animate-pulse border-2 border-red-400' : ''),\n                                            disabled: isRecording || isLoading\n                                        }, void 0, false, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 550,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: handleSendMessage,\n                                            disabled: isRecording || isLoading || !inputText.trim(),\n                                            className: \"bg-[#20b2aa] hover:bg-[#008080] px-4 py-2 rounded-lg transition-colors duration-200 flex items-center justify-center disabled:opacity-50\",\n                                            children: isLoading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                lineNumber: 568,\n                                                columnNumber: 19\n                                            }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                                src: \"/icons/send.png\",\n                                                alt: \"Send\",\n                                                width: 24,\n                                                height: 24\n                                            }, void 0, false, {\n                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                lineNumber: 570,\n                                                columnNumber: 19\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 562,\n                                            columnNumber: 15\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                    lineNumber: 529,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 451,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"w-[35%]\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"h-[70vh] bg-[#f0f8ff] rounded-xl p-6 overflow-y-auto mb-4\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                        className: \"text-lg font-semibold text-gray-800 mb-3\",\n                                        children: \"Suggested Responses\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 580,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    suggestionList.length > 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"space-y-3\",\n                                        children: suggestionList.map((suggestion, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                className: \"w-full bg-white rounded-lg p-3 shadow-sm hover:bg-gray-50 transition-colors text-left flex items-center\",\n                                                onClick: ()=>handleSuggestionClick(suggestion),\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"flex-shrink-0 w-6 h-6 bg-[#20b2aa] rounded-full flex items-center justify-center text-white text-xs mr-3\",\n                                                        children: index + 1\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                        lineNumber: 590,\n                                                        columnNumber: 23\n                                                    }, undefined),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                        className: \"text-gray-700\",\n                                                        children: suggestion\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                        lineNumber: 593,\n                                                        columnNumber: 23\n                                                    }, undefined)\n                                                ]\n                                            }, index, true, {\n                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                lineNumber: 585,\n                                                columnNumber: 21\n                                            }, undefined))\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 583,\n                                        columnNumber: 17\n                                    }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"bg-gray-50 rounded-lg p-4 text-center\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                            className: \"text-gray-500\",\n                                            children: \"Suggestions will appear here after you start chatting.\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 599,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 598,\n                                        columnNumber: 17\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                lineNumber: 578,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 577,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                    lineNumber: 449,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 448,\n                columnNumber: 7\n            }, undefined),\n            showModal && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"fixed inset-0 bg-black/70 flex items-center justify-center z-50\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"bg-white rounded-xl p-6 max-w-md w-full mx-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                            className: \"text-xl font-bold text-gray-800 mb-4\",\n                            children: \"End Scenario\"\n                        }, void 0, false, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 610,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-gray-600 mb-6\",\n                            children: \"Your practice session will be closed. Do you want to save this conversation to your profile?\"\n                        }, void 0, false, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 611,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex gap-4 justify-end\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: handleDiscardConversation,\n                                    className: \"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg transition-colors\",\n                                    children: \"Don't Save\"\n                                }, void 0, false, {\n                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                    lineNumber: 614,\n                                    columnNumber: 15\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: handleSaveConversation,\n                                    className: \"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors\",\n                                    children: \"Save\"\n                                }, void 0, false, {\n                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                    lineNumber: 620,\n                                    columnNumber: 15\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 613,\n                            columnNumber: 13\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                    lineNumber: 609,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 608,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n        lineNumber: 368,\n        columnNumber: 5\n    }, undefined);\n};\n_s(RoleplayPage, \"fANFO5dSlYyXonWO2Eh02d0WKSk=\", false, function() {\n    return [\n        next_navigation__WEBPACK_IMPORTED_MODULE_3__.useRouter\n    ];\n});\n_c = RoleplayPage;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RoleplayPage);\nvar _c;\n$RefreshReg$(_c, \"RoleplayPage\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvcm9sZXBsYXkvcGFnZS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFDMkQ7QUFDNUI7QUFDYTtBQUNJO0FBQ1M7QUFDcUI7QUFnQjlFLE1BQU1VLGVBQWU7O0lBQ25CLE1BQU0sQ0FBQ0MsTUFBTUMsUUFBUSxHQUFHWCwrQ0FBUUEsQ0FBYztJQUM5QyxNQUFNLENBQUNZLFNBQVNDLFdBQVcsR0FBR2IsK0NBQVFBLENBQUM7SUFDdkMsTUFBTSxDQUFDYyxpQkFBaUJDLG1CQUFtQixHQUFHZiwrQ0FBUUEsQ0FBQztJQUN2RCxNQUFNLENBQUNnQixjQUFjQyxnQkFBZ0IsR0FBR2pCLCtDQUFRQSxDQUFTO0lBQ3pELE1BQU0sQ0FBQ2tCLFdBQVdDLGFBQWEsR0FBR25CLCtDQUFRQSxDQUFDO0lBQzNDLE1BQU0sQ0FBQ29CLFVBQVVDLFlBQVksR0FBR3JCLCtDQUFRQSxDQUFZLEVBQUU7SUFDdEQsTUFBTSxDQUFDc0IsV0FBV0MsYUFBYSxHQUFHdkIsK0NBQVFBLENBQUM7SUFDM0MsTUFBTSxDQUFDd0IsVUFBVUMsWUFBWSxHQUFHekIsK0NBQVFBLENBQWtCO0lBQzFELE1BQU0sQ0FBQzBCLFdBQVdDLGFBQWEsR0FBRzNCLCtDQUFRQSxDQUFnQjtJQUMxRCxNQUFNLENBQUM0QixXQUFXQyxhQUFhLEdBQUc3QiwrQ0FBUUEsQ0FBQztJQUMzQyxNQUFNLENBQUM4QixhQUFhQyxlQUFlLEdBQUcvQiwrQ0FBUUEsQ0FBQztJQUMvQyxNQUFNLENBQUNnQyxnQkFBZ0JDLGtCQUFrQixHQUFHakMsK0NBQVFBLENBQVcsRUFBRTtJQUVqRSxNQUFNa0MsaUJBQWlCaEMsNkNBQU1BLENBQWlCO0lBQzlDLE1BQU1pQyxpQkFBaUJqQyw2Q0FBTUEsQ0FBaUI7SUFDOUMsTUFBTWtDLFdBQVdsQyw2Q0FBTUEsQ0FBMEI7SUFDakQsTUFBTW1DLFNBQVNqQywwREFBU0E7SUFFeEJILGdEQUFTQTtrQ0FBQztZQUNScUM7UUFDRjtpQ0FBRztRQUFDbEI7S0FBUztJQUViLE1BQU1rQixpQkFBaUI7WUFDckJIO1NBQUFBLDBCQUFBQSxlQUFlSSxPQUFPLGNBQXRCSiw4Q0FBQUEsd0JBQXdCSyxjQUFjLENBQUM7WUFBRUMsVUFBVTtRQUFTO0lBQzlEO0lBQ0EsTUFBTUMseUJBQXlCLE9BQU9DO1FBQ3BDLElBQUk7WUFDRiw4Q0FBOEM7WUFDOUMsd0RBQXdEO1lBRXhELHNDQUFzQztZQUN0QyxNQUFNQyxXQUFXLE1BQU1DLE1BQU0sOEJBQThCO2dCQUN6REMsUUFBUTtnQkFDUkMsU0FBUztvQkFBRSxnQkFBZ0I7Z0JBQW1CO2dCQUM5Q0MsTUFBTUMsS0FBS0MsU0FBUyxDQUFDO29CQUFFUDtnQkFBUztZQUNsQztZQUVBLE1BQU1RLE9BQU8sTUFBTVAsU0FBU1EsSUFBSTtZQUNoQ0MsUUFBUUMsR0FBRyxDQUFDLG9CQUFvQkgsS0FBS1AsUUFBUTtZQUU3QyxtQ0FBbUM7WUFDbkN2QixZQUFZO2dCQUFDO29CQUFFa0MsTUFBTUosS0FBS1AsUUFBUTtvQkFBRVksUUFBUTtnQkFBTTthQUFFO1lBRXBELDRCQUE0QjtZQUM1QkMsaUJBQWlCZDtRQUNuQixFQUFFLE9BQU9lLE9BQU87WUFDZEwsUUFBUUssS0FBSyxDQUFDLG9DQUFvQ0E7UUFDcEQ7SUFDRjtJQUVBekQsZ0RBQVNBO2tDQUFDO1lBQ1JZLFdBQVc7WUFFWCxNQUFNOEM7K0RBQXVCO29CQUMzQixJQUFJO3dCQUNGLGtDQUFrQzt3QkFDbEMsTUFBTUMsZ0JBQWdCQyxhQUFhQyxPQUFPLENBQUM7d0JBRTNDLElBQUksQ0FBQ0YsZUFBZTs0QkFDbEJHLE1BQU07NEJBQ04xQixPQUFPMkIsSUFBSSxDQUFDOzRCQUNaO3dCQUNGO3dCQUVBLE1BQU1DLGlCQUFpQmhCLEtBQUtpQixLQUFLLENBQUNOO3dCQUNsQ25DLFlBQVl3Qzt3QkFFWixvQkFBb0I7d0JBQ3BCLE1BQU1FLGNBQWM3RCxpRUFBa0JBLENBQUNELGtEQUFJQTt1RkFBRSxPQUFPK0Q7Z0NBQ2xEekQsUUFBUXlEO2dDQUVSLHlEQUF5RDtnQ0FDekQsTUFBTUMsY0FBY1IsYUFBYUMsT0FBTyxDQUFDLGFBQWE7Z0NBQ3REN0MsZ0JBQWdCb0Q7Z0NBRWhCLElBQUlELGFBQWE7d0NBR2JBO29DQUZGLE1BQU16QixXQUNKeUIsWUFBWUUsV0FBVyxNQUN2QkYscUJBQUFBLFlBQVlHLEtBQUssY0FBakJILHlDQUFBQSxtQkFBbUJJLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxLQUNoQztvQ0FFRm5CLFFBQVFDLEdBQUcsQ0FBQywwQkFBMEJYO29DQUV0QyxzRUFBc0U7b0NBQ3RFLE1BQU1ELHVCQUF1QkM7Z0NBQy9CO2dDQUVBOUIsV0FBVzs0QkFDYjs7d0JBRUE7MkVBQU8sSUFBTXNEOztvQkFDZixFQUFFLE9BQU9ULE9BQU87d0JBQ2RMLFFBQVFLLEtBQUssQ0FBQyxnQ0FBZ0NBO3dCQUM5Q0ssTUFBTTt3QkFDTjFCLE9BQU8yQixJQUFJLENBQUM7b0JBQ2Q7Z0JBQ0Y7O1lBRUFMO1FBQ0Y7aUNBQUcsRUFBRTtJQUVMLG1EQUFtRDtJQUNuRCxzRkFBc0Y7SUFDdEYsVUFBVTtJQUNWLDJFQUEyRTtJQUMzRSx5REFBeUQ7SUFDekQsc0JBQXNCO0lBQ3RCLGdFQUFnRTtJQUNoRSxNQUFNO0lBQ04sS0FBSztJQUVMLG9CQUFvQjtJQUNwQiwyQ0FBMkM7SUFDM0MsbUVBQW1FO0lBRW5FLDBCQUEwQjtJQUMxQixzRUFBc0U7SUFDdEUsc0VBQXNFO0lBQ3RFLGdDQUFnQztJQUNoQyxjQUFjO0lBQ2QsTUFBTTtJQUVOLFVBQVU7SUFDVix3REFBd0Q7SUFDeEQsbUNBQW1DO0lBRW5DLDRFQUE0RTtJQUM1RSw4QkFBOEI7SUFFOUIsb0VBQW9FO0lBQ3BFLHNDQUFzQztJQUV0QywyQkFBMkI7SUFDM0IsbUdBQW1HO0lBRW5HLHdFQUF3RTtJQUN4RSx3QkFBd0I7SUFDeEIsZUFBZTtJQUNmLHNNQUFzTTtJQUN0TSw2QkFBNkI7SUFDN0IsY0FBYztJQUNkLGNBQWM7SUFDZCxpQkFBaUI7SUFDakIsd0JBQXdCO0lBQ3hCLGVBQWU7SUFDZix5SUFBeUk7SUFDekksNkJBQTZCO0lBQzdCLGNBQWM7SUFDZCxjQUFjO0lBQ2QsVUFBVTtJQUVWLDJCQUEyQjtJQUMzQixVQUFVO0lBRVYsa0NBQWtDO0lBQ2xDLHNCQUFzQjtJQUN0Qix1REFBdUQ7SUFDdkQsNEVBQTRFO0lBQzVFLGdDQUFnQztJQUNoQyxNQUFNO0lBQ04sVUFBVTtJQUVWLHNEQUFzRDtJQUN0RCxNQUFNRixtQkFBbUIsT0FBT2Q7UUFDOUIsSUFBSTtZQUNGLE1BQU1DLFdBQVcsTUFBTXBDLDZEQUFjQSxDQUFDbUM7WUFFdEMsSUFBSUMsWUFBWUEsU0FBU08sSUFBSSxJQUFJLENBQUNQLFNBQVNjLEtBQUssRUFBRTtnQkFDaER6QixrQkFBa0JXLFNBQVNPLElBQUksQ0FBQ3NCLFdBQVc7WUFDN0MsT0FBTyxJQUFJN0IsWUFBWUEsU0FBU2MsS0FBSyxFQUFFO2dCQUNyQ0wsUUFBUUssS0FBSyxDQUFDLCtCQUErQmQsU0FBU2MsS0FBSztZQUM3RDtRQUNGLEVBQUUsT0FBT0EsT0FBTztZQUNkTCxRQUFRSyxLQUFLLENBQUMsK0JBQStCQTtRQUMvQztJQUNGO0lBRUF6RCxnREFBU0E7a0NBQUM7WUFDUixTQUFTeUUsbUJBQW1CQyxLQUFpQjtnQkFDM0MsSUFBSXpDLGVBQWVLLE9BQU8sSUFBSSxDQUFDTCxlQUFlSyxPQUFPLENBQUNxQyxRQUFRLENBQUNELE1BQU1FLE1BQU0sR0FBVztvQkFDcEY5RCxtQkFBbUI7Z0JBQ3JCO1lBQ0Y7WUFFQStELFNBQVNDLGdCQUFnQixDQUFDLGFBQWFMO1lBQ3ZDOzBDQUFPLElBQU1JLFNBQVNFLG1CQUFtQixDQUFDLGFBQWFOOztRQUN6RDtpQ0FBRyxFQUFFO0lBRUwsTUFBTU8sa0JBQWtCO1FBQ3RCNUMsT0FBTzJCLElBQUksQ0FBQztJQUNkO0lBRUEsTUFBTWtCLHNCQUFzQjtRQUMxQjdDLE9BQU8yQixJQUFJLENBQUM7UUFDWmpELG1CQUFtQjtJQUNyQjtJQUVBLE1BQU1vRSxvQkFBb0IsQ0FBQ1I7UUFDekJ4RCxhQUFhd0QsTUFBTUUsTUFBTSxDQUFDTyxLQUFLO0lBQ2pDO0lBRUEsTUFBTUMsaUJBQWlCLENBQUNWO1FBQ3RCLElBQUlBLE1BQU1XLEdBQUcsS0FBSyxTQUFTO1lBQ3pCQztRQUNGO0lBQ0Y7SUFFQSw0Q0FBNEM7SUFDNUMsTUFBTUMsbUJBQW1CLENBQUNDLFdBQW1CQztRQUMzQyxJQUFJLENBQUNBLFVBQVU7UUFFZixtQ0FBbUM7UUFDbkMsSUFBSXRELFNBQVNHLE9BQU8sRUFBRTtZQUNwQkgsU0FBU0csT0FBTyxDQUFDb0QsS0FBSztZQUN0QnZELFNBQVNHLE9BQU8sQ0FBQ3FELFdBQVcsR0FBRztZQUMvQmpFLGFBQWE7UUFDZjtRQUVBLDJEQUEyRDtRQUMzRCxJQUFJRCxjQUFjLFdBQXFCLE9BQVYrRCxZQUFhO1lBQ3hDOUQsYUFBYTtZQUNiO1FBQ0Y7UUFFQSw0QkFBNEI7UUFDNUIsTUFBTWtFLFFBQVEsSUFBSUMsTUFBTSx3QkFBaUMsT0FBVEo7UUFDaER0RCxTQUFTRyxPQUFPLEdBQUdzRDtRQUVuQix1Q0FBdUM7UUFDdkNsRSxhQUFhLFdBQXFCLE9BQVY4RDtRQUV4QiwyQ0FBMkM7UUFDM0NJLE1BQU1kLGdCQUFnQixDQUFDLFNBQVM7WUFDOUJwRCxhQUFhO1FBQ2Y7UUFFQWtFLE1BQU1FLElBQUksR0FBR0MsS0FBSyxDQUFDQyxDQUFBQTtZQUNqQjVDLFFBQVFLLEtBQUssQ0FBQyx5QkFBeUJ1QztZQUN2Q3RFLGFBQWE7UUFDZjtJQUNGO0lBRUEsTUFBTTRELG9CQUFvQjtRQUN4QixJQUFJLENBQUNyRSxVQUFVZ0YsSUFBSSxNQUFNLENBQUMxRSxVQUFVO1FBRXBDLE1BQU0yRSxjQUFjakYsVUFBVWdGLElBQUk7UUFDbEM3RSxZQUFZK0UsQ0FBQUEsT0FBUTttQkFBSUE7Z0JBQU07b0JBQUU3QyxNQUFNNEM7b0JBQWEzQyxRQUFRO2dCQUFPO2FBQUU7UUFDcEVyQyxhQUFhO1FBQ2JJLGFBQWE7UUFFYixJQUFJO2dCQUMyQ2I7WUFBN0MsTUFBTWlDLFdBQVdqQyxPQUFRQSxLQUFLNEQsV0FBVyxNQUFJNUQsY0FBQUEsS0FBSzZELEtBQUssY0FBVjdELGtDQUFBQSxZQUFZOEQsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLEtBQUksVUFBVztZQUVyRixNQUFNNUIsV0FBVyxNQUFNckMsOERBQWVBLENBQ3BDb0MsVUFDQXdELGFBQ0EzRSxTQUFTNkUsS0FBSyxFQUNkQyxXQUNBdEY7WUFHRixJQUFJNEIsWUFBWUEsU0FBU2MsS0FBSyxFQUFFO2dCQUM5QixNQUFNLElBQUk2QyxNQUFNM0QsU0FBU2MsS0FBSztZQUNoQztZQUVBLElBQUlkLFlBQVlBLFNBQVNPLElBQUksRUFBRTtnQkFDN0I5QixZQUFZK0UsQ0FBQUEsT0FBUTsyQkFBSUE7d0JBQU07NEJBQzVCN0MsTUFBTVgsU0FBU08sSUFBSSxDQUFDUCxRQUFROzRCQUM1QlksUUFBUTs0QkFDUmdELFdBQVc1RCxTQUFTTyxJQUFJLENBQUNxRCxTQUFTO3dCQUNwQztxQkFBRTtnQkFFRixJQUFJNUQsU0FBU08sSUFBSSxDQUFDcUQsU0FBUyxFQUFFO29CQUMzQixpREFBaUQ7b0JBQ2pEaEIsaUJBQWlCcEUsU0FBU3FGLE1BQU0sRUFBRTdELFNBQVNPLElBQUksQ0FBQ3FELFNBQVM7Z0JBQzNEO1lBQ0Y7WUFFQSwwQ0FBMEM7WUFDMUMsTUFBTS9DLGlCQUFpQmQ7UUFDekIsRUFBRSxPQUFPZSxPQUFPO1lBQ2RMLFFBQVFLLEtBQUssQ0FBQywwQkFBMEJBO1lBQ3hDckMsWUFBWStFLENBQUFBLE9BQVE7dUJBQ2ZBO29CQUNIO3dCQUFFN0MsTUFBTTt3QkFBMkRDLFFBQVE7b0JBQU07aUJBQ2xGO1FBQ0gsU0FBVTtZQUNSakMsYUFBYTtRQUNmO0lBQ0Y7SUFFQSxNQUFNbUYsb0JBQW9CO1FBQ3hCN0UsYUFBYTtJQUNmO0lBRUEsTUFBTThFLHlCQUF5QjtRQUM3QixJQUFJO2dCQVdzQ2pHO1lBVnhDLElBQUksQ0FBQ2MsVUFBVTtZQUVmLE1BQU1vRixlQUFlcEYsU0FBUzZFLEtBQUssQ0FBQ1EsV0FBVyxHQUFHQyxPQUFPLENBQUMsUUFBUTtZQUNsRSxNQUFNQyxxQkFBcUI5RCxLQUFLaUIsS0FBSyxDQUFDTCxhQUFhQyxPQUFPLENBQUM4QyxpQkFBaUI7WUFFNUVHLG1CQUFtQi9DLElBQUksQ0FBQztnQkFDdEJnRCxJQUFJQyxLQUFLQyxHQUFHO2dCQUNaQyxNQUFNLElBQUlGLE9BQU9HLFdBQVc7Z0JBQzVCNUYsVUFBVUEsU0FBUzZFLEtBQUs7Z0JBQ3hCakYsVUFBVUE7Z0JBQ1ZpRyxVQUFVM0csT0FBUUEsS0FBSzRELFdBQVcsTUFBSTVELGNBQUFBLEtBQUs2RCxLQUFLLGNBQVY3RCxrQ0FBQUEsWUFBWThELEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxLQUFJLFVBQVc7Z0JBQzlFOEMsVUFBVXRHO1lBQ1o7WUFFQTZDLGFBQWEwRCxPQUFPLENBQUNYLGNBQWMzRCxLQUFLQyxTQUFTLENBQUM2RDtZQUNsRDFFLE9BQU8yQixJQUFJLENBQUM7UUFDZCxFQUFFLE9BQU9OLE9BQU87WUFDZEwsUUFBUUssS0FBSyxDQUFDLDhCQUE4QkE7WUFDNUNyQixPQUFPMkIsSUFBSSxDQUFDO1FBQ2Q7SUFDRjtJQUVBLE1BQU13RCw0QkFBNEI7UUFDaENuRixPQUFPMkIsSUFBSSxDQUFDO0lBQ2Q7SUFFQSw0QkFBNEI7SUFDNUIsTUFBTXlELHdCQUF3QixDQUFDQztRQUM3QnZHLGFBQWF1RztJQUNmO0lBRUEsdUNBQXVDO0lBQ3ZDLE1BQU1DLGtCQUFrQjtRQUN0QjVGLGVBQWUsQ0FBQ0Q7SUFDaEIsa0NBQWtDO0lBQ3BDO0lBRUEsSUFBSWxCLFNBQVM7UUFDWCxxQkFDRSw4REFBQ2dIO1lBQUlDLFdBQVU7WUFDYkMsT0FBTztnQkFBRUMsaUJBQWlCO2dCQUFpQ0MsZ0JBQWdCO1lBQVE7c0JBQ25GLDRFQUFDSjtnQkFBSUMsV0FBVTs7Ozs7Ozs7Ozs7SUFHckI7SUFFQSxxQkFDRSw4REFBQ0Q7UUFBSUMsV0FBVTtRQUNiQyxPQUFPO1lBQUVDLGlCQUFpQjtRQUFnQzs7MEJBRTFELDhEQUFDSDtnQkFBSUMsV0FBVTtnQkFBNkJJLEtBQUsvRjs7a0NBQy9DLDhEQUFDZ0c7d0JBQ0NDLFNBQVMsSUFBTXBILG1CQUFtQixDQUFDRDt3QkFDbkMrRyxXQUFVO2tDQUVUbkgsQ0FBQUEsaUJBQUFBLDJCQUFBQSxLQUFNMEgsUUFBUSxrQkFDYiw4REFBQ2pJLGtEQUFLQTs0QkFDSmtJLEtBQUszSCxLQUFLMEgsUUFBUTs0QkFDbEJFLEtBQUk7NEJBQ0pDLE9BQU87NEJBQ1BDLFFBQVE7NEJBQ1JYLFdBQVU7Ozs7O3NEQUdaLDhEQUFDRDs0QkFBSUMsV0FBVTtzQ0FDWm5ILENBQUFBLGlCQUFBQSwyQkFBQUEsS0FBTTRELFdBQVcsSUFBRzVELEtBQUs0RCxXQUFXLENBQUNtRSxNQUFNLENBQUMsR0FBR0MsV0FBVyxLQUMxRGhJLENBQUFBLGlCQUFBQSwyQkFBQUEsS0FBTTZELEtBQUssSUFBRzdELEtBQUs2RCxLQUFLLENBQUNrRSxNQUFNLENBQUMsR0FBR0MsV0FBVyxLQUFLOzs7Ozs7Ozs7OztvQkFLekQ1SCxpQ0FDQyw4REFBQzhHO3dCQUFJQyxXQUFVOzswQ0FDYiw4REFBQ0Q7Z0NBQUlDLFdBQVU7O2tEQUNiLDhEQUFDYzt3Q0FBRWQsV0FBVTtrREFBZW5ILENBQUFBLGlCQUFBQSwyQkFBQUEsS0FBTTRELFdBQVcsS0FBSTs7Ozs7O29DQUNoRDVELENBQUFBLGlCQUFBQSwyQkFBQUEsS0FBTTZELEtBQUssbUJBQ1YsOERBQUNvRTt3Q0FBRWQsV0FBVTtrREFBeUJuSCxLQUFLNkQsS0FBSzs7Ozs7Ozs7Ozs7OzBDQUdwRCw4REFBQ3FEO2dDQUFJQyxXQUFVOzBDQUNiLDRFQUFDYztvQ0FBRWQsV0FBVTs7d0NBQXdCO3dDQUFXN0csaUJBQWlCLE9BQU8sWUFBWUEsaUJBQWlCLFVBQVUsWUFBWTs7Ozs7Ozs7Ozs7OzRCQUU1SE4scUJBQ0MsOERBQUN3SDtnQ0FDQ0MsU0FBU2pEO2dDQUNUMkMsV0FBVTs7a0RBRVYsOERBQUNlO3dDQUFJZixXQUFVO3dDQUFlZ0IsTUFBSzt3Q0FBT0MsUUFBTzt3Q0FBZUMsU0FBUTtrREFDdEUsNEVBQUNDOzRDQUFLQyxlQUFjOzRDQUFRQyxnQkFBZTs0Q0FBUUMsYUFBWTs0Q0FBSUMsR0FBRTs7Ozs7Ozs7Ozs7b0NBQ2pFOzs7Ozs7MERBSVIsOERBQUNsQjtnQ0FDQ0MsU0FBUyxJQUFNOUYsT0FBTzJCLElBQUksQ0FBQztnQ0FDM0I2RCxXQUFVOztrREFFViw4REFBQ2U7d0NBQUlmLFdBQVU7d0NBQWVnQixNQUFLO3dDQUFPQyxRQUFPO3dDQUFlQyxTQUFRO2tEQUN0RSw0RUFBQ0M7NENBQUtDLGVBQWM7NENBQVFDLGdCQUFlOzRDQUFRQyxhQUFZOzRDQUFJQyxHQUFFOzs7Ozs7Ozs7OztvQ0FDakU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7MEJBUWhCLDhEQUFDbEI7Z0JBQ0NDLFNBQVNsRDtnQkFDVDRDLFdBQVU7MEJBRVYsNEVBQUMxSCxrREFBS0E7b0JBQ0prSSxLQUFJO29CQUNKQyxLQUFJO29CQUNKQyxPQUFPO29CQUNQQyxRQUFRO29CQUNSWCxXQUFVOzs7Ozs7Ozs7OzswQkFJZCw4REFBQ0s7Z0JBQ0NDLFNBQVN6QjtnQkFDVG1CLFdBQVU7MEJBQ1g7Ozs7OzswQkFJRCw4REFBQ0Q7Z0JBQUlDLFdBQVU7MEJBQ2IsNEVBQUNEO29CQUFJQyxXQUFVOztzQ0FFYiw4REFBQ0Q7NEJBQUlDLFdBQVU7OzhDQUNiLDhEQUFDRDtvQ0FBSUMsV0FBVTs4Q0FDYiw0RUFBQ0Q7d0NBQUlDLFdBQVU7OzRDQUNaekcsU0FBU2lJLEdBQUcsQ0FBQyxDQUFDQyxTQUFTQyxzQkFDdEIsOERBQUMzQjtvREFFQ0MsV0FBVyxRQUFvRSxPQUE1RHlCLFFBQVE5RixNQUFNLEtBQUssU0FBUyxnQkFBZ0I7O3dEQUU5RDhGLFFBQVE5RixNQUFNLEtBQUssdUJBQ2xCLDhEQUFDb0U7NERBQUlDLFdBQVU7c0VBQ2IsNEVBQUMxSCxrREFBS0E7Z0VBQ0prSSxLQUFJO2dFQUNKQyxLQUFJO2dFQUNKQyxPQUFPO2dFQUNQQyxRQUFRO2dFQUNSWCxXQUFVOzs7Ozs7Ozs7OztzRUFJaEIsOERBQUNEOzREQUNDQyxXQUFXLGlDQUlWLE9BSEN5QixRQUFROUYsTUFBTSxLQUFLLFNBQ2YsMkJBQ0EsNkJBQ0w7O2dFQUVBOEYsUUFBUS9GLElBQUk7Z0VBR1orRixRQUFROUYsTUFBTSxLQUFLLFNBQVM4RixRQUFROUMsU0FBUyxrQkFDNUMsOERBQUMwQjtvRUFDQ0MsU0FBUyxJQUFNM0MsaUJBQWlCK0QsT0FBT0QsUUFBUTlDLFNBQVM7b0VBQ3hEcUIsV0FBVTtvRUFDVjJCLGNBQVc7OEVBRVY5SCxjQUFjLFdBQWlCLE9BQU42SCx1QkFDeEIsOERBQUMzQjt3RUFBSUMsV0FBVTtrRkFDYiw0RUFBQzFILGtEQUFLQTs0RUFBQ2tJLEtBQUk7NEVBQXFCQyxLQUFJOzRFQUFVQyxPQUFPOzRFQUFJQyxRQUFROzs7Ozs7Ozs7O2tHQUduRSw4REFBQ3JJLGtEQUFLQTt3RUFBQ2tJLEtBQUk7d0VBQXFCQyxLQUFJO3dFQUFVQyxPQUFPO3dFQUFJQyxRQUFROzs7Ozs7Ozs7Ozs7Ozs7Ozt3REFLeEVjLFFBQVE5RixNQUFNLEtBQUssd0JBQ2xCLDhEQUFDb0U7NERBQUlDLFdBQVU7c0VBQ1puSCxDQUFBQSxpQkFBQUEsMkJBQUFBLEtBQU0wSCxRQUFRLGtCQUNiLDhEQUFDakksa0RBQUtBO2dFQUNKa0ksS0FBSzNILEtBQUswSCxRQUFRO2dFQUNsQkUsS0FBSTtnRUFDSkMsT0FBTztnRUFDUEMsUUFBUTtnRUFDUlgsV0FBVTs7Ozs7MEZBR1osOERBQUNEO2dFQUFJQyxXQUFVOzBFQUNabkgsQ0FBQUEsaUJBQUFBLDJCQUFBQSxLQUFNNEQsV0FBVyxJQUFHNUQsS0FBSzRELFdBQVcsQ0FBQ21FLE1BQU0sQ0FBQyxHQUFHQyxXQUFXLEtBQzNEaEksQ0FBQUEsaUJBQUFBLDJCQUFBQSxLQUFNNkQsS0FBSyxJQUFHN0QsS0FBSzZELEtBQUssQ0FBQ2tFLE1BQU0sQ0FBQyxHQUFHQyxXQUFXLEtBQUs7Ozs7Ozs7Ozs7OzttREFyRHREYTs7Ozs7NENBNERSakksMkJBQ0MsOERBQUNzRztnREFBSUMsV0FBVTswREFDYiw0RUFBQ0Q7b0RBQUlDLFdBQVU7O3NFQUNiLDhEQUFDRDs0REFBSUMsV0FBVTs0REFBa0RDLE9BQU87Z0VBQUUyQixnQkFBZ0I7NERBQUs7Ozs7OztzRUFDL0YsOERBQUM3Qjs0REFBSUMsV0FBVTs0REFBa0RDLE9BQU87Z0VBQUUyQixnQkFBZ0I7NERBQU87Ozs7OztzRUFDakcsOERBQUM3Qjs0REFBSUMsV0FBVTs0REFBa0RDLE9BQU87Z0VBQUUyQixnQkFBZ0I7NERBQU87Ozs7Ozs7Ozs7Ozs7Ozs7OzBEQUl2Ryw4REFBQzdCO2dEQUFJSyxLQUFLOUY7Ozs7Ozs7Ozs7Ozs7Ozs7OzhDQUlkLDhEQUFDeUY7b0NBQUlDLFdBQVU7O3NEQUNiLDhEQUFDSzs0Q0FDQ0MsU0FBU1I7NENBQ1RFLFdBQVcsR0FJVixPQUhDL0YsY0FDSSxnQ0FDQSxpQ0FDTDs0Q0FDRDBILGNBQVc7OzhEQUVYLDhEQUFDWjtvREFBSWMsT0FBTTtvREFBNkI3QixXQUFVO29EQUFVZ0IsTUFBSztvREFBT0UsU0FBUTtvREFBWUQsUUFBUWhILGNBQWMsVUFBVTs4REFDMUgsNEVBQUNrSDt3REFBS0MsZUFBYzt3REFBUUMsZ0JBQWU7d0RBQVFDLGFBQWE7d0RBQUdDLEdBQUU7Ozs7Ozs7Ozs7O2dEQUV0RXRILDZCQUNDLDhEQUFDNkg7b0RBQUs5QixXQUFVOztzRUFDZCw4REFBQzhCOzREQUFLOUIsV0FBVTs7Ozs7O3NFQUNoQiw4REFBQzhCOzREQUFLOUIsV0FBVTs7Ozs7Ozs7Ozs7Ozs7Ozs7O3NEQUt0Qiw4REFBQytCOzRDQUNDQyxNQUFLOzRDQUNMekUsT0FBT2xFOzRDQUNQNEksVUFBVTNFOzRDQUNWNEUsWUFBWTFFOzRDQUNaMkUsYUFBYWxJLGNBQWMsaUJBQWlCOzRDQUM1QytGLFdBQVcsdUdBRVYsT0FEQy9GLGNBQWMsMENBQTBDOzRDQUUxRG1JLFVBQVVuSSxlQUFlUjs7Ozs7O3NEQUczQiw4REFBQzRHOzRDQUNDQyxTQUFTNUM7NENBQ1QwRSxVQUFVbkksZUFBZVIsYUFBYSxDQUFDSixVQUFVZ0YsSUFBSTs0Q0FDckQyQixXQUFVO3NEQUVUdkcsMEJBQ0MsOERBQUNzRztnREFBSUMsV0FBVTs7Ozs7MEVBRWYsOERBQUMxSCxrREFBS0E7Z0RBQUNrSSxLQUFJO2dEQUFrQkMsS0FBSTtnREFBT0MsT0FBTztnREFBSUMsUUFBUTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7c0NBT25FLDhEQUFDWjs0QkFBSUMsV0FBVTtzQ0FDYiw0RUFBQ0Q7Z0NBQUlDLFdBQVU7O2tEQUViLDhEQUFDcUM7d0NBQUdyQyxXQUFVO2tEQUEyQzs7Ozs7O29DQUV4RDdGLGVBQWV5RSxNQUFNLEdBQUcsa0JBQ3ZCLDhEQUFDbUI7d0NBQUlDLFdBQVU7a0RBQ1o3RixlQUFlcUgsR0FBRyxDQUFDLENBQUMzQixZQUFZNkIsc0JBQy9CLDhEQUFDckI7Z0RBRUNMLFdBQVU7Z0RBQ1ZNLFNBQVMsSUFBTVYsc0JBQXNCQzs7a0VBRXJDLDhEQUFDaUM7d0RBQUs5QixXQUFVO2tFQUNiMEIsUUFBUTs7Ozs7O2tFQUVYLDhEQUFDWjt3REFBRWQsV0FBVTtrRUFBaUJIOzs7Ozs7OytDQVB6QjZCOzs7Ozs7Ozs7a0VBWVgsOERBQUMzQjt3Q0FBSUMsV0FBVTtrREFDYiw0RUFBQ2M7NENBQUVkLFdBQVU7c0RBQWdCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7WUFReENqRywyQkFDQyw4REFBQ2dHO2dCQUFJQyxXQUFVOzBCQUNiLDRFQUFDRDtvQkFBSUMsV0FBVTs7c0NBQ2IsOERBQUNxQzs0QkFBR3JDLFdBQVU7c0NBQXVDOzs7Ozs7c0NBQ3JELDhEQUFDYzs0QkFBRWQsV0FBVTtzQ0FBcUI7Ozs7OztzQ0FFbEMsOERBQUNEOzRCQUFJQyxXQUFVOzs4Q0FDYiw4REFBQ0s7b0NBQ0NDLFNBQVNYO29DQUNUSyxXQUFVOzhDQUNYOzs7Ozs7OENBR0QsOERBQUNLO29DQUNDQyxTQUFTeEI7b0NBQ1RrQixXQUFVOzhDQUNYOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVNmO0dBam1CTXBIOztRQWlCV0wsc0RBQVNBOzs7S0FqQnBCSztBQW1tQk4saUVBQWVBLFlBQVlBLEVBQUMiLCJzb3VyY2VzIjpbIi9ob21lL2h5YW5nL0NTMjM5X25ldy9OZXdVSStCYWNrZW5kL05ld1VJL3NyYy9hcHAvcm9sZXBsYXkvcGFnZS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCJcbmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgSW1hZ2UgZnJvbSAnbmV4dC9pbWFnZSc7XG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICduZXh0L25hdmlnYXRpb24nO1xuaW1wb3J0IHsgYXV0aCB9IGZyb20gXCIuLi8uLi8uLi9zZXJ2ZXIvZmlyZWJhc2VcIjtcbmltcG9ydCB7IG9uQXV0aFN0YXRlQ2hhbmdlZCwgVXNlciB9IGZyb20gXCJmaXJlYmFzZS9hdXRoXCI7XG5pbXBvcnQgeyBzZW5kQ2hhdE1lc3NhZ2UsIGdldFN1Z2dlc3Rpb25zLCBzZXRTY2VuYXJpbyB9IGZyb20gJ0Avc2VydmljZXMvYXBpJztcblxuaW50ZXJmYWNlIFNjZW5hcmlvIHtcbiAgaWQ6IHN0cmluZztcbiAgdGl0bGU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICBjdXN0b206IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBNZXNzYWdlIHtcbiAgdGV4dDogc3RyaW5nO1xuICBzZW5kZXI6ICd1c2VyJyB8ICdib3QnO1xuICBhdWRpb191cmw/OiBzdHJpbmc7XG59XG5cbmNvbnN0IFJvbGVwbGF5UGFnZSA9ICgpID0+IHtcbiAgY29uc3QgW3VzZXIsIHNldFVzZXJdID0gdXNlU3RhdGU8VXNlciB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW3Nob3dQcm9maWxlTWVudSwgc2V0U2hvd1Byb2ZpbGVNZW51XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3VzZXJMYW5ndWFnZSwgc2V0VXNlckxhbmd1YWdlXSA9IHVzZVN0YXRlPHN0cmluZz4oJ2VuJyk7XG4gIGNvbnN0IFtpbnB1dFRleHQsIHNldElucHV0VGV4dF0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGU8TWVzc2FnZVtdPihbXSk7XG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzY2VuYXJpbywgc2V0U2NlbmFyaW9dID0gdXNlU3RhdGU8U2NlbmFyaW8gfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2lzUGxheWluZywgc2V0SXNQbGF5aW5nXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbc2hvd01vZGFsLCBzZXRTaG93TW9kYWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaXNSZWNvcmRpbmcsIHNldElzUmVjb3JkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3N1Z2dlc3Rpb25MaXN0LCBzZXRTdWdnZXN0aW9uTGlzdF0gPSB1c2VTdGF0ZTxzdHJpbmdbXT4oW10pO1xuICBcbiAgY29uc3QgcHJvZmlsZU1lbnVSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xuICBjb25zdCBtZXNzYWdlc0VuZFJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCk7XG4gIGNvbnN0IGF1ZGlvUmVmID0gdXNlUmVmPEhUTUxBdWRpb0VsZW1lbnQgfCBudWxsPihudWxsKTtcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzY3JvbGxUb0JvdHRvbSgpO1xuICB9LCBbbWVzc2FnZXNdKTtcbiAgXG4gIGNvbnN0IHNjcm9sbFRvQm90dG9tID0gKCkgPT4ge1xuICAgIG1lc3NhZ2VzRW5kUmVmLmN1cnJlbnQ/LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6IFwic21vb3RoXCIgfSk7XG4gIH07XG4gIGNvbnN0IGluaXRpYWxpemVDb252ZXJzYXRpb24gPSBhc3luYyAodXNlcm5hbWU6IHN0cmluZykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBDYWxsIGJhY2tlbmQgdG8gc2V0IHNjZW5hcmlvICYgZ2V0IHJlc3BvbnNlXG4gICAgICAvLyBjb25zdCBzY2VuYXJpb1Jlc3BvbnNlID0gYXdhaXQgc2V0U2NlbmFyaW8odXNlcm5hbWUpO1xuICAgICAgXG4gICAgICAvLyBGZXRjaCBpbml0aWFsIHJlc3BvbnNlIGZyb20gYmFja2VuZFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcIi9hcGkvZ2V0X3NjZW5hcmlvX3Jlc3BvbnNlXCIsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHVzZXJuYW1lIH0pLFxuICAgICAgfSk7XG4gIFxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGNvbnNvbGUubG9nKFwi8J+kliBMTE0gUmVzcG9uc2U6XCIsIGRhdGEucmVzcG9uc2UpO1xuICBcbiAgICAgIC8vIFNldCBpbml0aWFsIG1lc3NhZ2UgZnJvbSBiYWNrZW5kXG4gICAgICBzZXRNZXNzYWdlcyhbeyB0ZXh0OiBkYXRhLnJlc3BvbnNlLCBzZW5kZXI6IFwiYm90XCIgfV0pO1xuICBcbiAgICAgIC8vIEZldGNoIGluaXRpYWwgc3VnZ2VzdGlvbnNcbiAgICAgIGZldGNoU3VnZ2VzdGlvbnModXNlcm5hbWUpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW5pdGlhbGl6aW5nIGNvbnZlcnNhdGlvbjpcIiwgZXJyb3IpO1xuICAgIH1cbiAgfTtcbiAgXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0TG9hZGluZyh0cnVlKTtcbiAgXG4gICAgY29uc3QgZmV0Y2hVc2VyQW5kU2NlbmFyaW8gPSBhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBMb2FkIHNjZW5hcmlvIGZyb20gbG9jYWxTdG9yYWdlXG4gICAgICAgIGNvbnN0IHNhdmVkU2NlbmFyaW8gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImN1cnJlbnRTY2VuYXJpb1wiKTtcbiAgXG4gICAgICAgIGlmICghc2F2ZWRTY2VuYXJpbykge1xuICAgICAgICAgIGFsZXJ0KFwiTm8gc2NlbmFyaW8gc2VsZWN0ZWQuIFBsZWFzZSBzZWxlY3QgYSBzY2VuYXJpbyBmaXJzdC5cIik7XG4gICAgICAgICAgcm91dGVyLnB1c2goXCIvc2NlbmFyaW9cIik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gIFxuICAgICAgICBjb25zdCBwYXJzZWRTY2VuYXJpbyA9IEpTT04ucGFyc2Uoc2F2ZWRTY2VuYXJpbyk7XG4gICAgICAgIHNldFNjZW5hcmlvKHBhcnNlZFNjZW5hcmlvKTtcbiAgXG4gICAgICAgIC8vIEF1dGhlbnRpY2F0ZSB1c2VyXG4gICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gb25BdXRoU3RhdGVDaGFuZ2VkKGF1dGgsIGFzeW5jIChjdXJyZW50VXNlcikgPT4ge1xuICAgICAgICAgIHNldFVzZXIoY3VycmVudFVzZXIpO1xuICBcbiAgICAgICAgICAvLyBHZXQgbGFuZ3VhZ2UgcHJlZmVyZW5jZSAoZnJvbSBsb2NhbFN0b3JhZ2Ugb3IgYmFja2VuZClcbiAgICAgICAgICBjb25zdCBzYXZlZExvY2FsZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwibG9jYWxlXCIpIHx8IFwiZW5cIjtcbiAgICAgICAgICBzZXRVc2VyTGFuZ3VhZ2Uoc2F2ZWRMb2NhbGUpO1xuICBcbiAgICAgICAgICBpZiAoY3VycmVudFVzZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJuYW1lID1cbiAgICAgICAgICAgICAgY3VycmVudFVzZXIuZGlzcGxheU5hbWUgfHxcbiAgICAgICAgICAgICAgY3VycmVudFVzZXIuZW1haWw/LnNwbGl0KFwiQFwiKVswXSB8fFxuICAgICAgICAgICAgICBcIkd1ZXN0XCI7XG4gIFxuICAgICAgICAgICAgY29uc29sZS5sb2coXCLwn5GkIFVzZXIgYXV0aGVudGljYXRlZDpcIiwgdXNlcm5hbWUpO1xuICBcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgY29udmVyc2F0aW9uIChjYWxscyBiYWNrZW5kIGZvciBzY2VuYXJpbyAmIExMTSByZXNwb25zZSlcbiAgICAgICAgICAgIGF3YWl0IGluaXRpYWxpemVDb252ZXJzYXRpb24odXNlcm5hbWUpO1xuICAgICAgICAgIH1cbiAgXG4gICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgIH0pO1xuICBcbiAgICAgICAgcmV0dXJuICgpID0+IHVuc3Vic2NyaWJlKCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbG9hZGluZyB1c2VyIHNjZW5hcmlvOlwiLCBlcnJvcik7XG4gICAgICAgIGFsZXJ0KFwiVGhlcmUgd2FzIGEgcHJvYmxlbSBsb2FkaW5nIHRoZSBzY2VuYXJpby4gUGxlYXNlIHRyeSBhZ2Fpbi5cIik7XG4gICAgICAgIHJvdXRlci5wdXNoKFwiL3NjZW5hcmlvXCIpO1xuICAgICAgfVxuICAgIH07XG4gIFxuICAgIGZldGNoVXNlckFuZFNjZW5hcmlvKCk7XG4gIH0sIFtdKTtcbiAgXG4gIC8vIC8vIEluaXRpYWxpemUgc2NlbmFyaW8gY29udmVyc2F0aW9uIHdpdGggYmFja2VuZFxuICAvLyBjb25zdCBpbml0aWFsaXplQ29udmVyc2F0aW9uID0gYXN5bmMgKHVzZXJuYW1lOiBzdHJpbmcsIHNjZW5hcmlvVGl0bGU6IHN0cmluZykgPT4ge1xuICAvLyAgIHRyeSB7XG4gIC8vICAgICBjb25zdCBzY2VuYXJpb1Jlc3BvbnNlID0gYXdhaXQgc2V0U2NlbmFyaW8odXNlcm5hbWUsIHNjZW5hcmlvVGl0bGUpO1xuICAvLyAgICAgZmV0Y2hTdWdnZXN0aW9ucyh1c2VybmFtZSk7IC8vIEluaXRpYWwgc3VnZ2VzdGlvbnNcbiAgLy8gICB9IGNhdGNoIChlcnJvcikge1xuICAvLyAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluaXRpYWxpemluZyBjb252ZXJzYXRpb246XCIsIGVycm9yKTtcbiAgLy8gICB9XG4gIC8vIH07XG5cbiAgLy8gdXNlRWZmZWN0KCgpID0+IHtcbiAgLy8gICAvLyBMb2FkIHRoZSBzY2VuYXJpbyBmcm9tIGxvY2FsU3RvcmFnZVxuICAvLyAgIGNvbnN0IHNhdmVkU2NlbmFyaW8gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY3VycmVudFNjZW5hcmlvJyk7XG4gICAgXG4gIC8vICAgaWYgKCFzYXZlZFNjZW5hcmlvKSB7XG4gIC8vICAgICAvLyBJZiBubyBzY2VuYXJpbyBpcyBmb3VuZCwgcmVkaXJlY3QgYmFjayB0byBzY2VuYXJpbyBzZWxlY3Rpb25cbiAgLy8gICAgIGFsZXJ0KFwiTm8gc2NlbmFyaW8gc2VsZWN0ZWQuIFBsZWFzZSBzZWxlY3QgYSBzY2VuYXJpbyBmaXJzdC5cIik7XG4gIC8vICAgICByb3V0ZXIucHVzaCgnL3NjZW5hcmlvJyk7XG4gIC8vICAgICByZXR1cm47XG4gIC8vICAgfVxuICAgIFxuICAvLyAgIHRyeSB7XG4gIC8vICAgICBjb25zdCBwYXJzZWRTY2VuYXJpbyA9IEpTT04ucGFyc2Uoc2F2ZWRTY2VuYXJpbyk7XG4gIC8vICAgICBzZXRTY2VuYXJpbyhwYXJzZWRTY2VuYXJpbyk7XG4gICAgICBcbiAgLy8gICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gb25BdXRoU3RhdGVDaGFuZ2VkKGF1dGgsIGFzeW5jIChjdXJyZW50VXNlcikgPT4ge1xuICAvLyAgICAgICBzZXRVc2VyKGN1cnJlbnRVc2VyKTtcbiAgICAgICAgXG4gIC8vICAgICAgIGNvbnN0IHNhdmVkTG9jYWxlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xvY2FsZScpIHx8ICdlbic7XG4gIC8vICAgICAgIHNldFVzZXJMYW5ndWFnZShzYXZlZExvY2FsZSk7XG4gICAgICAgIFxuICAvLyAgICAgICBpZiAoY3VycmVudFVzZXIpIHtcbiAgLy8gICAgICAgICBjb25zdCB1c2VybmFtZSA9IGN1cnJlbnRVc2VyLmRpc3BsYXlOYW1lIHx8IGN1cnJlbnRVc2VyLmVtYWlsPy5zcGxpdCgnQCcpWzBdIHx8ICdHdWVzdCc7XG4gICAgICAgICAgXG4gIC8vICAgICAgICAgYXdhaXQgaW5pdGlhbGl6ZUNvbnZlcnNhdGlvbih1c2VybmFtZSwgcGFyc2VkU2NlbmFyaW8udGl0bGUpO1xuICAvLyAgICAgICAgIHNldE1lc3NhZ2VzKFtcbiAgLy8gICAgICAgICAgIHsgXG4gIC8vICAgICAgICAgICAgIHRleHQ6IGBIZWxsbyR7Y3VycmVudFVzZXIuZGlzcGxheU5hbWUgPyAnLCAnICsgY3VycmVudFVzZXIuZGlzcGxheU5hbWUgOiAnJ30hIEknbGwgYmUgeW91ciBjb252ZXJzYXRpb24gcGFydG5lciBmb3IgdGhpcyAke3BhcnNlZFNjZW5hcmlvLnRpdGxlfSBzY2VuYXJpby4gSG93IGNhbiBJIGhlbHAgeW91IHRvZGF5P2AsIFxuICAvLyAgICAgICAgICAgICBzZW5kZXI6ICdib3QnIFxuICAvLyAgICAgICAgICAgfVxuICAvLyAgICAgICAgIF0pO1xuICAvLyAgICAgICB9IGVsc2Uge1xuICAvLyAgICAgICAgIHNldE1lc3NhZ2VzKFtcbiAgLy8gICAgICAgICAgIHsgXG4gIC8vICAgICAgICAgICAgIHRleHQ6IGBXZWxjb21lIHRvIHRoZSAke3BhcnNlZFNjZW5hcmlvLnRpdGxlfSBzY2VuYXJpbyEgSSdsbCBiZSB5b3VyIGNvbnZlcnNhdGlvbiBwYXJ0bmVyLiBIb3cgd291bGQgeW91IGxpa2UgdG8gc3RhcnQ/YCwgXG4gIC8vICAgICAgICAgICAgIHNlbmRlcjogJ2JvdCcgXG4gIC8vICAgICAgICAgICB9XG4gIC8vICAgICAgICAgXSk7XG4gIC8vICAgICAgIH1cbiAgICAgICAgXG4gIC8vICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAvLyAgICAgfSk7XG4gICAgICBcbiAgLy8gICAgIHJldHVybiAoKSA9PiB1bnN1YnNjcmliZSgpO1xuICAvLyAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gIC8vICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgcGFyc2luZyBzY2VuYXJpbzpcIiwgZXJyb3IpO1xuICAvLyAgICAgYWxlcnQoXCJUaGVyZSB3YXMgYSBwcm9ibGVtIGxvYWRpbmcgdGhlIHNjZW5hcmlvLiBQbGVhc2UgdHJ5IGFnYWluLlwiKTtcbiAgLy8gICAgIHJvdXRlci5wdXNoKCcvc2NlbmFyaW8nKTtcbiAgLy8gICB9XG4gIC8vIH0sIFtdKTtcblxuICAvLyBGZXRjaCB1cGRhdGVkIGNvbnZlcnNhdGlvbiBzdWdnZXN0aW9ucyBmcm9tIGJhY2tlbmRcbiAgY29uc3QgZmV0Y2hTdWdnZXN0aW9ucyA9IGFzeW5jICh1c2VybmFtZTogc3RyaW5nKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0U3VnZ2VzdGlvbnModXNlcm5hbWUpO1xuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuZGF0YSAmJiAhcmVzcG9uc2UuZXJyb3IpIHtcbiAgICAgICAgc2V0U3VnZ2VzdGlvbkxpc3QocmVzcG9uc2UuZGF0YS5zdWdnZXN0aW9ucyk7XG4gICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBzdWdnZXN0aW9uczpcIiwgcmVzcG9uc2UuZXJyb3IpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgc3VnZ2VzdGlvbnM6XCIsIGVycm9yKTtcbiAgICB9XG4gIH07XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmdW5jdGlvbiBoYW5kbGVDbGlja091dHNpZGUoZXZlbnQ6IE1vdXNlRXZlbnQpIHtcbiAgICAgIGlmIChwcm9maWxlTWVudVJlZi5jdXJyZW50ICYmICFwcm9maWxlTWVudVJlZi5jdXJyZW50LmNvbnRhaW5zKGV2ZW50LnRhcmdldCBhcyBOb2RlKSkge1xuICAgICAgICBzZXRTaG93UHJvZmlsZU1lbnUoZmFsc2UpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGhhbmRsZUNsaWNrT3V0c2lkZSk7XG4gICAgcmV0dXJuICgpID0+IGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgaGFuZGxlQ2xpY2tPdXRzaWRlKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IGhhbmRsZUJhY2tDbGljayA9ICgpID0+IHtcbiAgICByb3V0ZXIucHVzaCgnL3NjZW5hcmlvJyk7XG4gIH07XG4gIFxuICBjb25zdCBuYXZpZ2F0ZVRvRGFzaGJvYXJkID0gKCkgPT4ge1xuICAgIHJvdXRlci5wdXNoKCcvZGFzaGJvYXJkJyk7XG4gICAgc2V0U2hvd1Byb2ZpbGVNZW51KGZhbHNlKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVJbnB1dENoYW5nZSA9IChldmVudDogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICBzZXRJbnB1dFRleHQoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVLZXlQcmVzcyA9IChldmVudDogUmVhY3QuS2V5Ym9hcmRFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgIGlmIChldmVudC5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgIGhhbmRsZVNlbmRNZXNzYWdlKCk7XG4gICAgfVxuICB9O1xuXG4gIC8vIFBsYXkgYXVkaW8gd2hlbiBzcGVha2VyIGJ1dHRvbiBpcyBjbGlja2VkXG4gIGNvbnN0IHBsYXlNZXNzYWdlQXVkaW8gPSAobWVzc2FnZUlkOiBudW1iZXIsIGF1ZGlvVXJsPzogc3RyaW5nKSA9PiB7XG4gICAgaWYgKCFhdWRpb1VybCkgcmV0dXJuO1xuICAgIFxuICAgIC8vIFN0b3AgYW55IGN1cnJlbnRseSBwbGF5aW5nIGF1ZGlvXG4gICAgaWYgKGF1ZGlvUmVmLmN1cnJlbnQpIHtcbiAgICAgIGF1ZGlvUmVmLmN1cnJlbnQucGF1c2UoKTtcbiAgICAgIGF1ZGlvUmVmLmN1cnJlbnQuY3VycmVudFRpbWUgPSAwO1xuICAgICAgc2V0SXNQbGF5aW5nKG51bGwpO1xuICAgIH1cbiAgICBcbiAgICAvLyBJZiBjbGlja2luZyBvbiB0aGUgY3VycmVudGx5IHBsYXlpbmcgYXVkaW8sIGp1c3Qgc3RvcCBpdFxuICAgIGlmIChpc1BsYXlpbmcgPT09IGBtZXNzYWdlLSR7bWVzc2FnZUlkfWApIHtcbiAgICAgIHNldElzUGxheWluZyhudWxsKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgLy8gQ3JlYXRlIGFuZCBwbGF5IG5ldyBhdWRpb1xuICAgIGNvbnN0IGF1ZGlvID0gbmV3IEF1ZGlvKGBodHRwOi8vbG9jYWxob3N0OjgwMDAke2F1ZGlvVXJsfWApO1xuICAgIGF1ZGlvUmVmLmN1cnJlbnQgPSBhdWRpbztcbiAgICBcbiAgICAvLyBTZXQgdGhlIGN1cnJlbnRseSBwbGF5aW5nIG1lc3NhZ2UgSURcbiAgICBzZXRJc1BsYXlpbmcoYG1lc3NhZ2UtJHttZXNzYWdlSWR9YCk7XG4gICAgXG4gICAgLy8gV2hlbiBhdWRpbyBlbmRzLCByZXNldCB0aGUgcGxheWluZyBzdGF0ZVxuICAgIGF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgKCkgPT4ge1xuICAgICAgc2V0SXNQbGF5aW5nKG51bGwpO1xuICAgIH0pO1xuICAgIFxuICAgIGF1ZGlvLnBsYXkoKS5jYXRjaChlID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJBdWRpbyBwbGF5YmFjayBlcnJvcjpcIiwgZSk7XG4gICAgICBzZXRJc1BsYXlpbmcobnVsbCk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlU2VuZE1lc3NhZ2UgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFpbnB1dFRleHQudHJpbSgpIHx8ICFzY2VuYXJpbykgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IHVzZXJNZXNzYWdlID0gaW5wdXRUZXh0LnRyaW0oKTtcbiAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCB7IHRleHQ6IHVzZXJNZXNzYWdlLCBzZW5kZXI6ICd1c2VyJyB9XSk7XG4gICAgc2V0SW5wdXRUZXh0KCcnKTtcbiAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlcm5hbWUgPSB1c2VyID8gKHVzZXIuZGlzcGxheU5hbWUgfHwgdXNlci5lbWFpbD8uc3BsaXQoJ0AnKVswXSB8fCAnR3Vlc3QnKSA6ICdHdWVzdCc7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2VuZENoYXRNZXNzYWdlKFxuICAgICAgICB1c2VybmFtZSxcbiAgICAgICAgdXNlck1lc3NhZ2UsXG4gICAgICAgIHNjZW5hcmlvLnRpdGxlLCAvLyBVc2luZyB0aGUgc2NlbmFyaW8gdGl0bGVcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1c2VyTGFuZ3VhZ2VcbiAgICAgICk7XG5cbiAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5lcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2UuZXJyb3IpO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCB7IFxuICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UsIFxuICAgICAgICAgIHNlbmRlcjogJ2JvdCcsXG4gICAgICAgICAgYXVkaW9fdXJsOiByZXNwb25zZS5kYXRhLmF1ZGlvX3VybFxuICAgICAgICB9XSk7XG4gICAgICAgIFxuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5hdWRpb191cmwpIHtcbiAgICAgICAgICAvLyBDbGljayB0aGUgc3BlYWtlciBidXR0b24gdG8gcGxheSBtZXNzYWdlIGF1ZGlvXG4gICAgICAgICAgcGxheU1lc3NhZ2VBdWRpbyhtZXNzYWdlcy5sZW5ndGgsIHJlc3BvbnNlLmRhdGEuYXVkaW9fdXJsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBGZXRjaCB1cGRhdGVkIHN1Z2dlc3Rpb25zIGFmdGVyIG1lc3NhZ2VcbiAgICAgIGF3YWl0IGZldGNoU3VnZ2VzdGlvbnModXNlcm5hbWUpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZW5kaW5nIG1lc3NhZ2U6JywgZXJyb3IpO1xuICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBbXG4gICAgICAgIC4uLnByZXYsXG4gICAgICAgIHsgdGV4dDogXCJTb3JyeSwgSSdtIGhhdmluZyB0cm91YmxlIGNvbm5lY3RpbmcuIFBsZWFzZSB0cnkgYWdhaW4uXCIsIHNlbmRlcjogJ2JvdCcgfVxuICAgICAgXSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUVuZFNjZW5hcmlvID0gKCkgPT4ge1xuICAgIHNldFNob3dNb2RhbCh0cnVlKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVTYXZlQ29udmVyc2F0aW9uID0gYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXNjZW5hcmlvKSByZXR1cm47XG4gICAgICBcbiAgICAgIGNvbnN0IHNjZW5hcmlvVHlwZSA9IHNjZW5hcmlvLnRpdGxlLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzKy9nLCAnXycpO1xuICAgICAgY29uc3Qgc2F2ZWRDb252ZXJzYXRpb25zID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShzY2VuYXJpb1R5cGUpIHx8ICdbXScpO1xuICAgICAgXG4gICAgICBzYXZlZENvbnZlcnNhdGlvbnMucHVzaCh7XG4gICAgICAgIGlkOiBEYXRlLm5vdygpLFxuICAgICAgICBkYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHNjZW5hcmlvOiBzY2VuYXJpby50aXRsZSxcbiAgICAgICAgbWVzc2FnZXM6IG1lc3NhZ2VzLFxuICAgICAgICB1c2VyTmFtZTogdXNlciA/ICh1c2VyLmRpc3BsYXlOYW1lIHx8IHVzZXIuZW1haWw/LnNwbGl0KCdAJylbMF0gfHwgJ0d1ZXN0JykgOiAnR3Vlc3QnLFxuICAgICAgICBsYW5ndWFnZTogdXNlckxhbmd1YWdlXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oc2NlbmFyaW9UeXBlLCBKU09OLnN0cmluZ2lmeShzYXZlZENvbnZlcnNhdGlvbnMpKTtcbiAgICAgIHJvdXRlci5wdXNoKCcvdGV4dCcpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igc2F2aW5nIGNvbnZlcnNhdGlvbjpcIiwgZXJyb3IpO1xuICAgICAgcm91dGVyLnB1c2goJy90ZXh0Jyk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZURpc2NhcmRDb252ZXJzYXRpb24gPSAoKSA9PiB7XG4gICAgcm91dGVyLnB1c2goJy90ZXh0Jyk7XG4gIH07XG5cbiAgLy8gQXBwbHkgc3VnZ2VzdGlvbiB0byBpbnB1dFxuICBjb25zdCBoYW5kbGVTdWdnZXN0aW9uQ2xpY2sgPSAoc3VnZ2VzdGlvbjogc3RyaW5nKSA9PiB7XG4gICAgc2V0SW5wdXRUZXh0KHN1Z2dlc3Rpb24pO1xuICB9O1xuXG4gIC8vIFRvZ2dsZSB2b2ljZSByZWNvcmRpbmcgKHBsYWNlaG9sZGVyKVxuICBjb25zdCB0b2dnbGVSZWNvcmRpbmcgPSAoKSA9PiB7XG4gICAgc2V0SXNSZWNvcmRpbmcoIWlzUmVjb3JkaW5nKTtcbiAgICAvLyBBZGQgYWN0dWFsIHJlY29yZGluZyBsb2dpYyBoZXJlXG4gIH07XG5cbiAgaWYgKGxvYWRpbmcpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtaW4taC1zY3JlZW4gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIlxuICAgICAgICBzdHlsZT17eyBiYWNrZ3JvdW5kSW1hZ2U6IFwidXJsKCcvaWNvbnMvYmFja2dyb3VuZDEuanBnJylcIiwgYmFja2dyb3VuZFNpemU6IFwiY292ZXJcIiB9fT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbmltYXRlLXNwaW4gcm91bmRlZC1mdWxsIGgtMTIgdy0xMiBib3JkZXItdC0yIGJvcmRlci1iLTIgYm9yZGVyLVsjNDhkMWNjXVwiPjwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJtaW4taC1zY3JlZW4gYmctZ3JheS05MDAgdGV4dC13aGl0ZSByZWxhdGl2ZVwiXG4gICAgICBzdHlsZT17eyBiYWNrZ3JvdW5kSW1hZ2U6IFwidXJsKCcvaWNvbnMvYmFja2dyb3VuZDEuanBnJylcIiB9fVxuICAgID5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTggbGVmdC04IHotMTBcIiByZWY9e3Byb2ZpbGVNZW51UmVmfT5cbiAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93UHJvZmlsZU1lbnUoIXNob3dQcm9maWxlTWVudSl9XG4gICAgICAgICAgY2xhc3NOYW1lPVwidy0xMCBoLTEwIHJvdW5kZWQtZnVsbCBiZy13aGl0ZS8xMCBob3ZlcjpiZy13aGl0ZS8yMCB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0yMDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgb3ZlcmZsb3ctaGlkZGVuXCJcbiAgICAgICAgPlxuICAgICAgICAgIHt1c2VyPy5waG90b1VSTCA/IChcbiAgICAgICAgICAgIDxJbWFnZVxuICAgICAgICAgICAgICBzcmM9e3VzZXIucGhvdG9VUkx9XG4gICAgICAgICAgICAgIGFsdD1cIlByb2ZpbGVcIlxuICAgICAgICAgICAgICB3aWR0aD17NDB9XG4gICAgICAgICAgICAgIGhlaWdodD17NDB9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm9iamVjdC1jb3ZlclwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBoLWZ1bGwgYmctWyM0OGQxY2NdIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtd2hpdGUgZm9udC1zZW1pYm9sZCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgIHt1c2VyPy5kaXNwbGF5TmFtZSA/IHVzZXIuZGlzcGxheU5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgOiBcbiAgICAgICAgICAgICAgIHVzZXI/LmVtYWlsID8gdXNlci5lbWFpbC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSA6IFwiR1wifVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9idXR0b24+XG4gICAgICAgIFxuICAgICAgICB7c2hvd1Byb2ZpbGVNZW51ICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0xMiBsZWZ0LTAgYmctd2hpdGUgcm91bmRlZC1sZyBzaGFkb3ctbGcgcHktMiBtaW4tdy1bMTgwcHhdIHRleHQtZ3JheS04MDAgei0yMFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJweC00IHB5LTIgYm9yZGVyLWIgYm9yZGVyLWdyYXktMjAwXCI+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtXCI+e3VzZXI/LmRpc3BsYXlOYW1lIHx8IFwiR3Vlc3RcIn08L3A+XG4gICAgICAgICAgICAgIHt1c2VyPy5lbWFpbCAmJiAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+e3VzZXIuZW1haWx9PC9wPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB4LTQgcHktMiBib3JkZXItYiBib3JkZXItZ3JheS0yMDBcIj5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+TGFuZ3VhZ2U6IHt1c2VyTGFuZ3VhZ2UgPT09ICdlbicgPyAnRW5nbGlzaCcgOiB1c2VyTGFuZ3VhZ2UgPT09ICd6aC1DTicgPyAnQ2hpbmVzZScgOiAnSmFwYW5lc2UnfTwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAge3VzZXIgPyAoXG4gICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgb25DbGljaz17bmF2aWdhdGVUb0Rhc2hib2FyZH1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgdGV4dC1sZWZ0IHB4LTQgcHktMiBob3ZlcjpiZy1ncmF5LTEwMCB0cmFuc2l0aW9uLWNvbG9ycyBmbGV4IGl0ZW1zLWNlbnRlclwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cInctNCBoLTQgbXItMlwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPVwiMlwiIGQ9XCJNMTYgN2E0IDQgMCAxMS04IDAgNCA0IDAgMDE4IDB6TTEyIDE0YTcgNyAwIDAwLTcgN2gxNGE3IDcgMCAwMC03LTd6XCIgLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICBQcm9maWxlIERhc2hib2FyZFxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gcm91dGVyLnB1c2goJy9sb2dpbicpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCB0ZXh0LWxlZnQgcHgtNCBweS0yIGhvdmVyOmJnLWdyYXktMTAwIHRyYW5zaXRpb24tY29sb3JzIGZsZXggaXRlbXMtY2VudGVyXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxzdmcgY2xhc3NOYW1lPVwidy00IGgtNCBtci0yXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XG4gICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9XCIyXCIgZD1cIk0xMSAxNmwtNC00bTAgMGw0LTRtLTQgNGgxNG0tNSA0djFhMyAzIDAgMDEtMyAzSDZhMyAzIDAgMDEtMy0zVjdhMyAzIDAgMDEzLTNoN2EzIDMgMCAwMTMgM3YxXCIgLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICBTaWduIEluXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgICAgXG4gICAgICA8YnV0dG9uIFxuICAgICAgICBvbkNsaWNrPXtoYW5kbGVCYWNrQ2xpY2t9XG4gICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC04IGxlZnQtMjQgdy0xMCBoLTEwIHJvdW5kZWQtZnVsbCBiZy13aGl0ZS8xMCBob3ZlcjpiZy13aGl0ZS8yMCB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0yMDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIlxuICAgICAgPlxuICAgICAgICA8SW1hZ2VcbiAgICAgICAgICBzcmM9XCIvaWNvbnMvYmFjay5wbmdcIlxuICAgICAgICAgIGFsdD1cIkJhY2tcIlxuICAgICAgICAgIHdpZHRoPXsyNH1cbiAgICAgICAgICBoZWlnaHQ9ezI0fVxuICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtd2hpdGVcIlxuICAgICAgICAvPlxuICAgICAgPC9idXR0b24+XG4gICAgICBcbiAgICAgIDxidXR0b24gXG4gICAgICAgIG9uQ2xpY2s9e2hhbmRsZUVuZFNjZW5hcmlvfVxuICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtOCByaWdodC04IGJnLVsjMjBiMmFhXSBob3ZlcjpiZy1bIzAwODA4MF0gcHgtNiBweS0yIHJvdW5kZWQtbGcgdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMjAwXCJcbiAgICAgID5cbiAgICAgICAgRW5kIFNjZW5hcmlvXG4gICAgICA8L2J1dHRvbj5cbiAgICAgIFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwdC0yNCBweC00IG1heC13LTZ4bCBteC1hdXRvXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBnYXAtNFwiPlxuICAgICAgICAgIHsvKiBDb252ZXJzYXRpb24gYXJlYSAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctWzY1JV1cIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1bNzB2aF0gYmctWyNmMGY4ZmZdIHJvdW5kZWQteGwgcC02IG92ZXJmbG93LXktYXV0byBtYi00XCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBzcGFjZS15LTRcIj5cbiAgICAgICAgICAgICAgICB7bWVzc2FnZXMubWFwKChtZXNzYWdlLCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBrZXk9e2luZGV4fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BmbGV4ICR7bWVzc2FnZS5zZW5kZXIgPT09ICd1c2VyJyA/ICdqdXN0aWZ5LWVuZCcgOiAnanVzdGlmeS1zdGFydCd9YH1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge21lc3NhZ2Uuc2VuZGVyID09PSAnYm90JyAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTggaC04IG1yLTIgZmxleC1zaHJpbmstMCByb3VuZGVkLWZ1bGwgb3ZlcmZsb3ctaGlkZGVuXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8SW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPVwiL2ljb25zL3JvYm90LmpwZ1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFsdD1cIlJvYm90XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9ezMyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9ezMyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJvYmplY3QtY292ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YG1heC13LXNtIHJvdW5kZWQtbGcgcHgtNCBweS0yICR7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNlbmRlciA9PT0gJ3VzZXInIFxuICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdiZy1ibHVlLTUwMCB0ZXh0LXdoaXRlJyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnYmctZ3JheS0yMDAgdGV4dC1ncmF5LTgwMCdcbiAgICAgICAgICAgICAgICAgICAgICB9IGdyb3VwIHJlbGF0aXZlYH1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIHttZXNzYWdlLnRleHR9XG4gICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgey8qIFNwZWFrZXIgYnV0dG9uIGZvciBib3QgbWVzc2FnZXMgKi99XG4gICAgICAgICAgICAgICAgICAgICAge21lc3NhZ2Uuc2VuZGVyID09PSAnYm90JyAmJiBtZXNzYWdlLmF1ZGlvX3VybCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHBsYXlNZXNzYWdlQXVkaW8oaW5kZXgsIG1lc3NhZ2UuYXVkaW9fdXJsKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgLXJpZ2h0LTEwIHRvcC0xLzIgdHJhbnNmb3JtIC10cmFuc2xhdGUteS0xLzIgdy04IGgtOCBiZy1ncmF5LTEwMCByb3VuZGVkLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgaG92ZXI6YmctZ3JheS0yMDAgdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwiUGxheSBtZXNzYWdlIGF1ZGlvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2lzUGxheWluZyA9PT0gYG1lc3NhZ2UtJHtpbmRleH1gID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1wdWxzZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEltYWdlIHNyYz1cIi9pY29ucy9zcGVha2VyLmpwZ1wiIGFsdD1cIlNwZWFrZXJcIiB3aWR0aD17MjR9IGhlaWdodD17MjR9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEltYWdlIHNyYz1cIi9pY29ucy9zcGVha2VyLmpwZ1wiIGFsdD1cIlNwZWFrZXJcIiB3aWR0aD17MjR9IGhlaWdodD17MjR9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAge21lc3NhZ2Uuc2VuZGVyID09PSAndXNlcicgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy04IGgtOCBtbC0yIGZsZXgtc2hyaW5rLTAgcm91bmRlZC1mdWxsIG92ZXJmbG93LWhpZGRlbiBiZy1ibHVlLTEwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge3VzZXI/LnBob3RvVVJMID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM9e3VzZXIucGhvdG9VUkx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0PVwiVXNlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9ezMyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD17MzJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwib2JqZWN0LWNvdmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCBiZy1bIzQ4ZDFjY10gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC13aGl0ZSBmb250LXNlbWlib2xkIHRleHQteHNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dXNlcj8uZGlzcGxheU5hbWUgPyB1c2VyLmRpc3BsYXlOYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpIDogXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcj8uZW1haWwgPyB1c2VyLmVtYWlsLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpIDogXCJVXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgIHtpc0xvYWRpbmcgJiYgKFxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktc3RhcnRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTIgYmctZ3JheS0xMDAgcm91bmRlZC1sZyBweC00IHB5LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMiBoLTIgYmctZ3JheS00MDAgcm91bmRlZC1mdWxsIGFuaW1hdGUtYm91bmNlXCIgc3R5bGU9e3sgYW5pbWF0aW9uRGVsYXk6ICcwcycgfX0+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTIgaC0yIGJnLWdyYXktNDAwIHJvdW5kZWQtZnVsbCBhbmltYXRlLWJvdW5jZVwiIHN0eWxlPXt7IGFuaW1hdGlvbkRlbGF5OiAnMC4ycycgfX0+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTIgaC0yIGJnLWdyYXktNDAwIHJvdW5kZWQtZnVsbCBhbmltYXRlLWJvdW5jZVwiIHN0eWxlPXt7IGFuaW1hdGlvbkRlbGF5OiAnMC40cycgfX0+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8ZGl2IHJlZj17bWVzc2FnZXNFbmRSZWZ9IC8+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBnYXAtMlwiPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17dG9nZ2xlUmVjb3JkaW5nfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7XG4gICAgICAgICAgICAgICAgICBpc1JlY29yZGluZyBcbiAgICAgICAgICAgICAgICAgICAgPyAnYmctcmVkLTUwMCBob3ZlcjpiZy1yZWQtNjAwJyBcbiAgICAgICAgICAgICAgICAgICAgOiAnYmctZ3JheS0yMDAgaG92ZXI6YmctZ3JheS0zMDAnXG4gICAgICAgICAgICAgICAgfSBweC0zIHB5LTMgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0yMDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcmVsYXRpdmVgfVxuICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJTdGFydCB2b2ljZSByZWNvcmRpbmdcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3NOYW1lPVwiaC02IHctNlwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZT17aXNSZWNvcmRpbmcgPyBcIndoaXRlXCIgOiBcImJsYWNrXCJ9PlxuICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTE5IDExYTcgNyAwIDAxLTcgN20wIDBhNyA3IDAgMDEtNy03bTcgN3Y0bTAgMEg4bTQgMGg0bS00LThhMyAzIDAgMDEtMy0zVjVhMyAzIDAgMTE2IDB2NmEzIDMgMCAwMS0zIDN6XCIgLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICB7aXNSZWNvcmRpbmcgJiYgKFxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTAgcmlnaHQtMCBmbGV4IGgtMyB3LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYW5pbWF0ZS1waW5nIGFic29sdXRlIGlubGluZS1mbGV4IGgtZnVsbCB3LWZ1bGwgcm91bmRlZC1mdWxsIGJnLXJlZC00MDAgb3BhY2l0eS03NVwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwicmVsYXRpdmUgaW5saW5lLWZsZXggcm91bmRlZC1mdWxsIGgtMyB3LTMgYmctcmVkLTUwMFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cblxuICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgdmFsdWU9e2lucHV0VGV4dH1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlSW5wdXRDaGFuZ2V9XG4gICAgICAgICAgICAgICAgb25LZXlQcmVzcz17aGFuZGxlS2V5UHJlc3N9XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2lzUmVjb3JkaW5nID8gXCJMaXN0ZW5pbmcuLi5cIiA6IFwiVHlwZSB5b3VyIG1lc3NhZ2UuLi5cIn1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BmbGV4LTEgYmctd2hpdGUgdGV4dC1ibGFjayBweC00IHB5LTMgcm91bmRlZC1sZyBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctYmx1ZS01MDAgJHtcbiAgICAgICAgICAgICAgICAgIGlzUmVjb3JkaW5nID8gJ2FuaW1hdGUtcHVsc2UgYm9yZGVyLTIgYm9yZGVyLXJlZC00MDAnIDogJydcbiAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17aXNSZWNvcmRpbmcgfHwgaXNMb2FkaW5nfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVTZW5kTWVzc2FnZX1cbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17aXNSZWNvcmRpbmcgfHwgaXNMb2FkaW5nIHx8ICFpbnB1dFRleHQudHJpbSgpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLVsjMjBiMmFhXSBob3ZlcjpiZy1bIzAwODA4MF0gcHgtNCBweS0yIHJvdW5kZWQtbGcgdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMjAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGRpc2FibGVkOm9wYWNpdHktNTBcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge2lzTG9hZGluZyA/IChcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTUgdy01IGJvcmRlci10LTIgYm9yZGVyLWItMiBib3JkZXItd2hpdGVcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPEltYWdlIHNyYz1cIi9pY29ucy9zZW5kLnBuZ1wiIGFsdD1cIlNlbmRcIiB3aWR0aD17MjR9IGhlaWdodD17MjR9IC8+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIHsvKiBTdWdnZXN0aW9ucyBwYW5lbCAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctWzM1JV1cIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1bNzB2aF0gYmctWyNmMGY4ZmZdIHJvdW5kZWQteGwgcC02IG92ZXJmbG93LXktYXV0byBtYi00XCI+XG5cbiAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktODAwIG1iLTNcIj5TdWdnZXN0ZWQgUmVzcG9uc2VzPC9oMz5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHtzdWdnZXN0aW9uTGlzdC5sZW5ndGggPiAwID8gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0zXCI+XG4gICAgICAgICAgICAgICAgICB7c3VnZ2VzdGlvbkxpc3QubWFwKChzdWdnZXN0aW9uLCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAga2V5PXtpbmRleH1cbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctd2hpdGUgcm91bmRlZC1sZyBwLTMgc2hhZG93LXNtIGhvdmVyOmJnLWdyYXktNTAgdHJhbnNpdGlvbi1jb2xvcnMgdGV4dC1sZWZ0IGZsZXggaXRlbXMtY2VudGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVTdWdnZXN0aW9uQ2xpY2soc3VnZ2VzdGlvbil9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmbGV4LXNocmluay0wIHctNiBoLTYgYmctWyMyMGIyYWFdIHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXdoaXRlIHRleHQteHMgbXItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2luZGV4ICsgMX1cbiAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTcwMFwiPntzdWdnZXN0aW9ufTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWdyYXktNTAgcm91bmRlZC1sZyBwLTQgdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtZ3JheS01MDBcIj5TdWdnZXN0aW9ucyB3aWxsIGFwcGVhciBoZXJlIGFmdGVyIHlvdSBzdGFydCBjaGF0dGluZy48L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIFxuICAgICAge3Nob3dNb2RhbCAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgaW5zZXQtMCBiZy1ibGFjay83MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB6LTUwXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSByb3VuZGVkLXhsIHAtNiBtYXgtdy1tZCB3LWZ1bGwgbXgtNFwiPlxuICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQteGwgZm9udC1ib2xkIHRleHQtZ3JheS04MDAgbWItNFwiPkVuZCBTY2VuYXJpbzwvaDM+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNjAwIG1iLTZcIj5Zb3VyIHByYWN0aWNlIHNlc3Npb24gd2lsbCBiZSBjbG9zZWQuIERvIHlvdSB3YW50IHRvIHNhdmUgdGhpcyBjb252ZXJzYXRpb24gdG8geW91ciBwcm9maWxlPzwvcD5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGdhcC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlRGlzY2FyZENvbnZlcnNhdGlvbn1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC00IHB5LTIgYmctZ3JheS0yMDAgaG92ZXI6YmctZ3JheS0zMDAgdGV4dC1ncmF5LTgwMCByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIERvbid0IFNhdmVcbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlU2F2ZUNvbnZlcnNhdGlvbn1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC00IHB5LTIgYmctYmx1ZS01MDAgaG92ZXI6YmctYmx1ZS02MDAgdGV4dC13aGl0ZSByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIFNhdmVcbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgUm9sZXBsYXlQYWdlOyJdLCJuYW1lcyI6WyJSZWFjdCIsInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlUmVmIiwiSW1hZ2UiLCJ1c2VSb3V0ZXIiLCJhdXRoIiwib25BdXRoU3RhdGVDaGFuZ2VkIiwic2VuZENoYXRNZXNzYWdlIiwiZ2V0U3VnZ2VzdGlvbnMiLCJSb2xlcGxheVBhZ2UiLCJ1c2VyIiwic2V0VXNlciIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwic2hvd1Byb2ZpbGVNZW51Iiwic2V0U2hvd1Byb2ZpbGVNZW51IiwidXNlckxhbmd1YWdlIiwic2V0VXNlckxhbmd1YWdlIiwiaW5wdXRUZXh0Iiwic2V0SW5wdXRUZXh0IiwibWVzc2FnZXMiLCJzZXRNZXNzYWdlcyIsImlzTG9hZGluZyIsInNldElzTG9hZGluZyIsInNjZW5hcmlvIiwic2V0U2NlbmFyaW8iLCJpc1BsYXlpbmciLCJzZXRJc1BsYXlpbmciLCJzaG93TW9kYWwiLCJzZXRTaG93TW9kYWwiLCJpc1JlY29yZGluZyIsInNldElzUmVjb3JkaW5nIiwic3VnZ2VzdGlvbkxpc3QiLCJzZXRTdWdnZXN0aW9uTGlzdCIsInByb2ZpbGVNZW51UmVmIiwibWVzc2FnZXNFbmRSZWYiLCJhdWRpb1JlZiIsInJvdXRlciIsInNjcm9sbFRvQm90dG9tIiwiY3VycmVudCIsInNjcm9sbEludG9WaWV3IiwiYmVoYXZpb3IiLCJpbml0aWFsaXplQ29udmVyc2F0aW9uIiwidXNlcm5hbWUiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0YSIsImpzb24iLCJjb25zb2xlIiwibG9nIiwidGV4dCIsInNlbmRlciIsImZldGNoU3VnZ2VzdGlvbnMiLCJlcnJvciIsImZldGNoVXNlckFuZFNjZW5hcmlvIiwic2F2ZWRTY2VuYXJpbyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJhbGVydCIsInB1c2giLCJwYXJzZWRTY2VuYXJpbyIsInBhcnNlIiwidW5zdWJzY3JpYmUiLCJjdXJyZW50VXNlciIsInNhdmVkTG9jYWxlIiwiZGlzcGxheU5hbWUiLCJlbWFpbCIsInNwbGl0Iiwic3VnZ2VzdGlvbnMiLCJoYW5kbGVDbGlja091dHNpZGUiLCJldmVudCIsImNvbnRhaW5zIiwidGFyZ2V0IiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhbmRsZUJhY2tDbGljayIsIm5hdmlnYXRlVG9EYXNoYm9hcmQiLCJoYW5kbGVJbnB1dENoYW5nZSIsInZhbHVlIiwiaGFuZGxlS2V5UHJlc3MiLCJrZXkiLCJoYW5kbGVTZW5kTWVzc2FnZSIsInBsYXlNZXNzYWdlQXVkaW8iLCJtZXNzYWdlSWQiLCJhdWRpb1VybCIsInBhdXNlIiwiY3VycmVudFRpbWUiLCJhdWRpbyIsIkF1ZGlvIiwicGxheSIsImNhdGNoIiwiZSIsInRyaW0iLCJ1c2VyTWVzc2FnZSIsInByZXYiLCJ0aXRsZSIsInVuZGVmaW5lZCIsIkVycm9yIiwiYXVkaW9fdXJsIiwibGVuZ3RoIiwiaGFuZGxlRW5kU2NlbmFyaW8iLCJoYW5kbGVTYXZlQ29udmVyc2F0aW9uIiwic2NlbmFyaW9UeXBlIiwidG9Mb3dlckNhc2UiLCJyZXBsYWNlIiwic2F2ZWRDb252ZXJzYXRpb25zIiwiaWQiLCJEYXRlIiwibm93IiwiZGF0ZSIsInRvSVNPU3RyaW5nIiwidXNlck5hbWUiLCJsYW5ndWFnZSIsInNldEl0ZW0iLCJoYW5kbGVEaXNjYXJkQ29udmVyc2F0aW9uIiwiaGFuZGxlU3VnZ2VzdGlvbkNsaWNrIiwic3VnZ2VzdGlvbiIsInRvZ2dsZVJlY29yZGluZyIsImRpdiIsImNsYXNzTmFtZSIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiYmFja2dyb3VuZFNpemUiLCJyZWYiLCJidXR0b24iLCJvbkNsaWNrIiwicGhvdG9VUkwiLCJzcmMiLCJhbHQiLCJ3aWR0aCIsImhlaWdodCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwicCIsInN2ZyIsImZpbGwiLCJzdHJva2UiLCJ2aWV3Qm94IiwicGF0aCIsInN0cm9rZUxpbmVjYXAiLCJzdHJva2VMaW5lam9pbiIsInN0cm9rZVdpZHRoIiwiZCIsIm1hcCIsIm1lc3NhZ2UiLCJpbmRleCIsImFyaWEtbGFiZWwiLCJhbmltYXRpb25EZWxheSIsInhtbG5zIiwic3BhbiIsImlucHV0IiwidHlwZSIsIm9uQ2hhbmdlIiwib25LZXlQcmVzcyIsInBsYWNlaG9sZGVyIiwiZGlzYWJsZWQiLCJoMyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/roleplay/page.tsx\n"));
./NewUI/.next/static/webpack/app/roleplay/page.b7dc38ca10ff060b.hot-update.js:eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/image */ \"(app-pages-browser)/./node_modules/next/dist/api/image.js\");\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/./node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var _services_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/services/api */ \"(app-pages-browser)/./src/services/api.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\nconst RoleplayPage = ()=>{\n    _s();\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [showProfileMenu, setShowProfileMenu] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [userLanguage, setUserLanguage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('en');\n    const [inputText, setInputText] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [scenario, setScenario] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isPlaying, setIsPlaying] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [showModal, setShowModal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isRecording, setIsRecording] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [suggestionList, setSuggestionList] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const profileMenuRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const messagesEndRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const audioRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const router = (0,next_navigation__WEBPACK_IMPORTED_MODULE_3__.useRouter)();\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"RoleplayPage.useEffect\": ()=>{\n            scrollToBottom();\n        }\n    }[\"RoleplayPage.useEffect\"], [\n        messages\n    ]);\n    const scrollToBottom = ()=>{\n        var _messagesEndRef_current;\n        (_messagesEndRef_current = messagesEndRef.current) === null || _messagesEndRef_current === void 0 ? void 0 : _messagesEndRef_current.scrollIntoView({\n            behavior: \"smooth\"\n        });\n    };\n    // // Initialize scenario conversation with backend\n    // const initializeConversation = async (username: string, scenarioTitle: string) => {\n    //   try {\n    //     const scenarioResponse = await setScenario(username, scenarioTitle);\n    //     fetchSuggestions(username); // Initial suggestions\n    //   } catch (error) {\n    //     console.error(\"Error initializing conversation:\", error);\n    //   }\n    // };\n    // useEffect(() => {\n    //   // Load the scenario from localStorage\n    //   const savedScenario = localStorage.getItem('currentScenario');\n    //   if (!savedScenario) {\n    //     // If no scenario is found, redirect back to scenario selection\n    //     alert(\"No scenario selected. Please select a scenario first.\");\n    //     router.push('/scenario');\n    //     return;\n    //   }\n    //   try {\n    //     const parsedScenario = JSON.parse(savedScenario);\n    //     setScenario(parsedScenario);\n    //     const unsubscribe = onAuthStateChanged(auth, async (currentUser) => {\n    //       setUser(currentUser);\n    //       const savedLocale = localStorage.getItem('locale') || 'en';\n    //       setUserLanguage(savedLocale);\n    //       if (currentUser) {\n    //         const username = currentUser.displayName || currentUser.email?.split('@')[0] || 'Guest';\n    //         await initializeConversation(username, parsedScenario.title);\n    //         setMessages([\n    //           { \n    //             text: `Hello${currentUser.displayName ? ', ' + currentUser.displayName : ''}! I'll be your conversation partner for this ${parsedScenario.title} scenario. How can I help you today?`, \n    //             sender: 'bot' \n    //           }\n    //         ]);\n    //       } else {\n    //         setMessages([\n    //           { \n    //             text: `Welcome to the ${parsedScenario.title} scenario! I'll be your conversation partner. How would you like to start?`, \n    //             sender: 'bot' \n    //           }\n    //         ]);\n    //       }\n    //       setLoading(false);\n    //     });\n    //     return () => unsubscribe();\n    //   } catch (error) {\n    //     console.error(\"Error parsing scenario:\", error);\n    //     alert(\"There was a problem loading the scenario. Please try again.\");\n    //     router.push('/scenario');\n    //   }\n    // }, []);\n    // Fetch updated conversation suggestions from backend\n    const fetchSuggestions = async (username)=>{\n        try {\n            const response = await (0,_services_api__WEBPACK_IMPORTED_MODULE_4__.getSuggestions)(username);\n            if (response && response.data && !response.error) {\n                setSuggestionList(response.data.suggestions);\n            } else if (response && response.error) {\n                console.error(\"Error fetching suggestions:\", response.error);\n            }\n        } catch (error) {\n            console.error(\"Error fetching suggestions:\", error);\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"RoleplayPage.useEffect\": ()=>{\n            function handleClickOutside(event) {\n                if (profileMenuRef.current && !profileMenuRef.current.contains(event.target)) {\n                    setShowProfileMenu(false);\n                }\n            }\n            document.addEventListener(\"mousedown\", handleClickOutside);\n            return ({\n                \"RoleplayPage.useEffect\": ()=>document.removeEventListener(\"mousedown\", handleClickOutside)\n            })[\"RoleplayPage.useEffect\"];\n        }\n    }[\"RoleplayPage.useEffect\"], []);\n    const handleBackClick = ()=>{\n        router.push('/scenario');\n    };\n    const navigateToDashboard = ()=>{\n        router.push('/dashboard');\n        setShowProfileMenu(false);\n    };\n    const handleInputChange = (event)=>{\n        setInputText(event.target.value);\n    };\n    const handleKeyPress = (event)=>{\n        if (event.key === 'Enter') {\n            handleSendMessage();\n        }\n    };\n    // Play audio when speaker button is clicked\n    const playMessageAudio = (messageId, audioUrl)=>{\n        if (!audioUrl) return;\n        // Stop any currently playing audio\n        if (audioRef.current) {\n            audioRef.current.pause();\n            audioRef.current.currentTime = 0;\n            setIsPlaying(null);\n        }\n        // If clicking on the currently playing audio, just stop it\n        if (isPlaying === \"message-\".concat(messageId)) {\n            setIsPlaying(null);\n            return;\n        }\n        // Create and play new audio\n        const audio = new Audio(\"http://localhost:8000\".concat(audioUrl));\n        audioRef.current = audio;\n        // Set the currently playing message ID\n        setIsPlaying(\"message-\".concat(messageId));\n        // When audio ends, reset the playing state\n        audio.addEventListener('ended', ()=>{\n            setIsPlaying(null);\n        });\n        audio.play().catch((e)=>{\n            console.error(\"Audio playback error:\", e);\n            setIsPlaying(null);\n        });\n    };\n    const handleSendMessage = async ()=>{\n        if (!inputText.trim() || !scenario) return;\n        const userMessage = inputText.trim();\n        setMessages((prev)=>[\n                ...prev,\n                {\n                    text: userMessage,\n                    sender: 'user'\n                }\n            ]);\n        setInputText('');\n        setIsLoading(true);\n        try {\n            var _user_email;\n            const username = user ? user.displayName || ((_user_email = user.email) === null || _user_email === void 0 ? void 0 : _user_email.split('@')[0]) || 'Guest' : 'Guest';\n            const response = await (0,_services_api__WEBPACK_IMPORTED_MODULE_4__.sendChatMessage)(username, userMessage, scenario.title, undefined, userLanguage);\n            if (response && response.error) {\n                throw new Error(response.error);\n            }\n            if (response && response.data) {\n                setMessages((prev)=>[\n                        ...prev,\n                        {\n                            text: response.data.response,\n                            sender: 'bot',\n                            audio_url: response.data.audio_url\n                        }\n                    ]);\n                if (response.data.audio_url) {\n                    // Click the speaker button to play message audio\n                    playMessageAudio(messages.length, response.data.audio_url);\n                }\n            }\n            // Fetch updated suggestions after message\n            await fetchSuggestions(username);\n        } catch (error) {\n            console.error('Error sending message:', error);\n            setMessages((prev)=>[\n                    ...prev,\n                    {\n                        text: \"Sorry, I'm having trouble connecting. Please try again.\",\n                        sender: 'bot'\n                    }\n                ]);\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    const handleEndScenario = ()=>{\n        setShowModal(true);\n    };\n    const handleSaveConversation = async ()=>{\n        try {\n            var _user_email;\n            if (!scenario) return;\n            const scenarioType = scenario.title.toLowerCase().replace(/\\s+/g, '_');\n            const savedConversations = JSON.parse(localStorage.getItem(scenarioType) || '[]');\n            savedConversations.push({\n                id: Date.now(),\n                date: new Date().toISOString(),\n                scenario: scenario.title,\n                messages: messages,\n                userName: user ? user.displayName || ((_user_email = user.email) === null || _user_email === void 0 ? void 0 : _user_email.split('@')[0]) || 'Guest' : 'Guest',\n                language: userLanguage\n            });\n            localStorage.setItem(scenarioType, JSON.stringify(savedConversations));\n            router.push('/text');\n        } catch (error) {\n            console.error(\"Error saving conversation:\", error);\n            router.push('/text');\n        }\n    };\n    const handleDiscardConversation = ()=>{\n        router.push('/text');\n    };\n    // Apply suggestion to input\n    const handleSuggestionClick = (suggestion)=>{\n        setInputText(suggestion);\n    };\n    // Toggle voice recording (placeholder)\n    const toggleRecording = ()=>{\n        setIsRecording(!isRecording);\n    // Add actual recording logic here\n    };\n    if (loading) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"min-h-screen flex items-center justify-center\",\n            style: {\n                backgroundImage: \"url('/icons/background1.jpg')\",\n                backgroundSize: \"cover\"\n            },\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#48d1cc]\"\n            }, void 0, false, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 287,\n                columnNumber: 9\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n            lineNumber: 285,\n            columnNumber: 7\n        }, undefined);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"min-h-screen bg-gray-900 text-white relative\",\n        style: {\n            backgroundImage: \"url('/icons/background1.jpg')\"\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute top-8 left-8 z-10\",\n                ref: profileMenuRef,\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>setShowProfileMenu(!showProfileMenu),\n                        className: \"w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 transition-colors duration-200 flex items-center justify-center overflow-hidden\",\n                        children: (user === null || user === void 0 ? void 0 : user.photoURL) ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                            src: user.photoURL,\n                            alt: \"Profile\",\n                            width: 40,\n                            height: 40,\n                            className: \"object-cover\"\n                        }, void 0, false, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 302,\n                            columnNumber: 13\n                        }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"w-full h-full bg-[#48d1cc] flex items-center justify-center text-white font-semibold text-sm\",\n                            children: (user === null || user === void 0 ? void 0 : user.displayName) ? user.displayName.charAt(0).toUpperCase() : (user === null || user === void 0 ? void 0 : user.email) ? user.email.charAt(0).toUpperCase() : \"G\"\n                        }, void 0, false, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 310,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                        lineNumber: 297,\n                        columnNumber: 9\n                    }, undefined),\n                    showProfileMenu && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"absolute top-12 left-0 bg-white rounded-lg shadow-lg py-2 min-w-[180px] text-gray-800 z-20\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"px-4 py-2 border-b border-gray-200\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        className: \"font-medium\",\n                                        children: (user === null || user === void 0 ? void 0 : user.displayName) || \"Guest\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 320,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    (user === null || user === void 0 ? void 0 : user.email) && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        className: \"text-xs text-gray-500\",\n                                        children: user.email\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 322,\n                                        columnNumber: 17\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                lineNumber: 319,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"px-4 py-2 border-b border-gray-200\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-xs text-gray-500\",\n                                    children: [\n                                        \"Language: \",\n                                        userLanguage === 'en' ? 'English' : userLanguage === 'zh-CN' ? 'Chinese' : 'Japanese'\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                    lineNumber: 326,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                lineNumber: 325,\n                                columnNumber: 13\n                            }, undefined),\n                            user ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: navigateToDashboard,\n                                className: \"w-full text-left px-4 py-2 hover:bg-gray-100 transition-colors flex items-center\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        className: \"w-4 h-4 mr-2\",\n                                        fill: \"none\",\n                                        stroke: \"currentColor\",\n                                        viewBox: \"0 0 24 24\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\",\n                                            strokeWidth: \"2\",\n                                            d: \"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 334,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 333,\n                                        columnNumber: 17\n                                    }, undefined),\n                                    \"Profile Dashboard\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                lineNumber: 329,\n                                columnNumber: 15\n                            }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>router.push('/login'),\n                                className: \"w-full text-left px-4 py-2 hover:bg-gray-100 transition-colors flex items-center\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        className: \"w-4 h-4 mr-2\",\n                                        fill: \"none\",\n                                        stroke: \"currentColor\",\n                                        viewBox: \"0 0 24 24\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\",\n                                            strokeWidth: \"2\",\n                                            d: \"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 344,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 343,\n                                        columnNumber: 17\n                                    }, undefined),\n                                    \"Sign In\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                lineNumber: 339,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                        lineNumber: 318,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 296,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: handleBackClick,\n                className: \"absolute top-8 left-24 w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 transition-colors duration-200 flex items-center justify-center\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                    src: \"/icons/back.png\",\n                    alt: \"Back\",\n                    width: 24,\n                    height: 24,\n                    className: \"text-white\"\n                }, void 0, false, {\n                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                    lineNumber: 357,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 353,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: handleEndScenario,\n                className: \"absolute top-8 right-8 bg-[#20b2aa] hover:bg-[#008080] px-6 py-2 rounded-lg transition-colors duration-200\",\n                children: \"End Scenario\"\n            }, void 0, false, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 366,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"pt-24 px-4 max-w-6xl mx-auto\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex gap-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"w-[65%]\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"h-[70vh] bg-[#f0f8ff] rounded-xl p-6 overflow-y-auto mb-4\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex flex-col space-y-4\",\n                                        children: [\n                                            messages.map((message, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex \".concat(message.sender === 'user' ? 'justify-end' : 'justify-start'),\n                                                    children: [\n                                                        message.sender === 'bot' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"w-8 h-8 mr-2 flex-shrink-0 rounded-full overflow-hidden\",\n                                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                                                src: \"/icons/robot.jpg\",\n                                                                alt: \"Robot\",\n                                                                width: 32,\n                                                                height: 32,\n                                                                className: \"object-cover\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                lineNumber: 386,\n                                                                columnNumber: 25\n                                                            }, undefined)\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 385,\n                                                            columnNumber: 23\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"max-w-sm rounded-lg px-4 py-2 \".concat(message.sender === 'user' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-800', \" group relative\"),\n                                                            children: [\n                                                                message.text,\n                                                                message.sender === 'bot' && message.audio_url && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                                    onClick: ()=>playMessageAudio(index, message.audio_url),\n                                                                    className: \"absolute -right-10 top-1/2 transform -translate-y-1/2 w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200 transition-colors\",\n                                                                    \"aria-label\": \"Play message audio\",\n                                                                    children: isPlaying === \"message-\".concat(index) ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                        className: \"animate-pulse\",\n                                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                                                            src: \"/icons/speaker.jpg\",\n                                                                            alt: \"Speaker\",\n                                                                            width: 24,\n                                                                            height: 24\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                            lineNumber: 413,\n                                                                            columnNumber: 31\n                                                                        }, undefined)\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                        lineNumber: 412,\n                                                                        columnNumber: 29\n                                                                    }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                                                        src: \"/icons/speaker.jpg\",\n                                                                        alt: \"Speaker\",\n                                                                        width: 24,\n                                                                        height: 24\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                        lineNumber: 416,\n                                                                        columnNumber: 29\n                                                                    }, undefined)\n                                                                }, void 0, false, {\n                                                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                    lineNumber: 406,\n                                                                    columnNumber: 25\n                                                                }, undefined)\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 395,\n                                                            columnNumber: 21\n                                                        }, undefined),\n                                                        message.sender === 'user' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"w-8 h-8 ml-2 flex-shrink-0 rounded-full overflow-hidden bg-blue-100 flex items-center justify-center\",\n                                                            children: (user === null || user === void 0 ? void 0 : user.photoURL) ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                                                src: user.photoURL,\n                                                                alt: \"User\",\n                                                                width: 32,\n                                                                height: 32,\n                                                                className: \"object-cover\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                lineNumber: 424,\n                                                                columnNumber: 27\n                                                            }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"w-full h-full bg-[#48d1cc] flex items-center justify-center text-white font-semibold text-xs\",\n                                                                children: (user === null || user === void 0 ? void 0 : user.displayName) ? user.displayName.charAt(0).toUpperCase() : (user === null || user === void 0 ? void 0 : user.email) ? user.email.charAt(0).toUpperCase() : \"U\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                lineNumber: 432,\n                                                                columnNumber: 27\n                                                            }, undefined)\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 422,\n                                                            columnNumber: 23\n                                                        }, undefined)\n                                                    ]\n                                                }, index, true, {\n                                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                    lineNumber: 380,\n                                                    columnNumber: 19\n                                                }, undefined)),\n                                            isLoading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex justify-start\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex items-center space-x-2 bg-gray-100 rounded-lg px-4 py-2\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",\n                                                            style: {\n                                                                animationDelay: '0s'\n                                                            }\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 444,\n                                                            columnNumber: 23\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",\n                                                            style: {\n                                                                animationDelay: '0.2s'\n                                                            }\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 445,\n                                                            columnNumber: 23\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",\n                                                            style: {\n                                                                animationDelay: '0.4s'\n                                                            }\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 446,\n                                                            columnNumber: 23\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                    lineNumber: 443,\n                                                    columnNumber: 21\n                                                }, undefined)\n                                            }, void 0, false, {\n                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                lineNumber: 442,\n                                                columnNumber: 19\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                ref: messagesEndRef\n                                            }, void 0, false, {\n                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                lineNumber: 450,\n                                                columnNumber: 17\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 378,\n                                        columnNumber: 15\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                    lineNumber: 377,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex gap-2\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: toggleRecording,\n                                            className: \"\".concat(isRecording ? 'bg-red-500 hover:bg-red-600' : 'bg-gray-200 hover:bg-gray-300', \" px-3 py-3 rounded-lg transition-colors duration-200 flex items-center justify-center relative\"),\n                                            \"aria-label\": \"Start voice recording\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                    xmlns: \"http://www.w3.org/2000/svg\",\n                                                    className: \"h-6 w-6\",\n                                                    fill: \"none\",\n                                                    viewBox: \"0 0 24 24\",\n                                                    stroke: isRecording ? \"white\" : \"black\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                        strokeLinecap: \"round\",\n                                                        strokeLinejoin: \"round\",\n                                                        strokeWidth: 2,\n                                                        d: \"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                        lineNumber: 465,\n                                                        columnNumber: 19\n                                                    }, undefined)\n                                                }, void 0, false, {\n                                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                    lineNumber: 464,\n                                                    columnNumber: 17\n                                                }, undefined),\n                                                isRecording && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"absolute top-0 right-0 flex h-3 w-3\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 469,\n                                                            columnNumber: 21\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"relative inline-flex rounded-full h-3 w-3 bg-red-500\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 470,\n                                                            columnNumber: 21\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                    lineNumber: 468,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 455,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                            type: \"text\",\n                                            value: inputText,\n                                            onChange: handleInputChange,\n                                            onKeyPress: handleKeyPress,\n                                            placeholder: isRecording ? \"Listening...\" : \"Type your message...\",\n                                            className: \"flex-1 bg-white text-black px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 \".concat(isRecording ? 'animate-pulse border-2 border-red-400' : ''),\n                                            disabled: isRecording || isLoading\n                                        }, void 0, false, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 475,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: handleSendMessage,\n                                            disabled: isRecording || isLoading || !inputText.trim(),\n                                            className: \"bg-[#20b2aa] hover:bg-[#008080] px-4 py-2 rounded-lg transition-colors duration-200 flex items-center justify-center disabled:opacity-50\",\n                                            children: isLoading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                lineNumber: 493,\n                                                columnNumber: 19\n                                            }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                                src: \"/icons/send.png\",\n                                                alt: \"Send\",\n                                                width: 24,\n                                                height: 24\n                                            }, void 0, false, {\n                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                lineNumber: 495,\n                                                columnNumber: 19\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 487,\n                                            columnNumber: 15\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                    lineNumber: 454,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 376,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"w-[35%]\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"h-[70vh] bg-[#f0f8ff] rounded-xl p-6 overflow-y-auto mb-4\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                        className: \"text-lg font-semibold text-gray-800 mb-3\",\n                                        children: \"Suggested Responses\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 505,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    suggestionList.length > 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"space-y-3\",\n                                        children: suggestionList.map((suggestion, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                className: \"w-full bg-white rounded-lg p-3 shadow-sm hover:bg-gray-50 transition-colors text-left flex items-center\",\n                                                onClick: ()=>handleSuggestionClick(suggestion),\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"flex-shrink-0 w-6 h-6 bg-[#20b2aa] rounded-full flex items-center justify-center text-white text-xs mr-3\",\n                                                        children: index + 1\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                        lineNumber: 515,\n                                                        columnNumber: 23\n                                                    }, undefined),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                        className: \"text-gray-700\",\n                                                        children: suggestion\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                        lineNumber: 518,\n                                                        columnNumber: 23\n                                                    }, undefined)\n                                                ]\n                                            }, index, true, {\n                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                lineNumber: 510,\n                                                columnNumber: 21\n                                            }, undefined))\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 508,\n                                        columnNumber: 17\n                                    }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"bg-gray-50 rounded-lg p-4 text-center\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                            className: \"text-gray-500\",\n                                            children: \"Suggestions will appear here after you start chatting.\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 524,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 523,\n                                        columnNumber: 17\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                lineNumber: 503,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 502,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                    lineNumber: 374,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 373,\n                columnNumber: 7\n            }, undefined),\n            showModal && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"fixed inset-0 bg-black/70 flex items-center justify-center z-50\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"bg-white rounded-xl p-6 max-w-md w-full mx-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                            className: \"text-xl font-bold text-gray-800 mb-4\",\n                            children: \"End Scenario\"\n                        }, void 0, false, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 535,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-gray-600 mb-6\",\n                            children: \"Your practice session will be closed. Do you want to save this conversation to your profile?\"\n                        }, void 0, false, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 536,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex gap-4 justify-end\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: handleDiscardConversation,\n                                    className: \"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg transition-colors\",\n                                    children: \"Don't Save\"\n                                }, void 0, false, {\n                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                    lineNumber: 539,\n                                    columnNumber: 15\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: handleSaveConversation,\n                                    className: \"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors\",\n                                    children: \"Save\"\n                                }, void 0, false, {\n                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                    lineNumber: 545,\n                                    columnNumber: 15\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 538,\n                            columnNumber: 13\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                    lineNumber: 534,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 533,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n        lineNumber: 293,\n        columnNumber: 5\n    }, undefined);\n};\n_s(RoleplayPage, \"GF3sgYQ7q5NONHrbrGeVyRaizT0=\", false, function() {\n    return [\n        next_navigation__WEBPACK_IMPORTED_MODULE_3__.useRouter\n    ];\n});\n_c = RoleplayPage;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RoleplayPage);\nvar _c;\n$RefreshReg$(_c, \"RoleplayPage\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvcm9sZXBsYXkvcGFnZS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQzJEO0FBQzVCO0FBQ2E7QUFHa0M7QUFnQjlFLE1BQU1RLGVBQWU7O0lBQ25CLE1BQU0sQ0FBQ0MsTUFBTUMsUUFBUSxHQUFHVCwrQ0FBUUEsQ0FBYztJQUM5QyxNQUFNLENBQUNVLFNBQVNDLFdBQVcsR0FBR1gsK0NBQVFBLENBQUM7SUFDdkMsTUFBTSxDQUFDWSxpQkFBaUJDLG1CQUFtQixHQUFHYiwrQ0FBUUEsQ0FBQztJQUN2RCxNQUFNLENBQUNjLGNBQWNDLGdCQUFnQixHQUFHZiwrQ0FBUUEsQ0FBUztJQUN6RCxNQUFNLENBQUNnQixXQUFXQyxhQUFhLEdBQUdqQiwrQ0FBUUEsQ0FBQztJQUMzQyxNQUFNLENBQUNrQixVQUFVQyxZQUFZLEdBQUduQiwrQ0FBUUEsQ0FBWSxFQUFFO0lBQ3RELE1BQU0sQ0FBQ29CLFdBQVdDLGFBQWEsR0FBR3JCLCtDQUFRQSxDQUFDO0lBQzNDLE1BQU0sQ0FBQ3NCLFVBQVVDLFlBQVksR0FBR3ZCLCtDQUFRQSxDQUFrQjtJQUMxRCxNQUFNLENBQUN3QixXQUFXQyxhQUFhLEdBQUd6QiwrQ0FBUUEsQ0FBZ0I7SUFDMUQsTUFBTSxDQUFDMEIsV0FBV0MsYUFBYSxHQUFHM0IsK0NBQVFBLENBQUM7SUFDM0MsTUFBTSxDQUFDNEIsYUFBYUMsZUFBZSxHQUFHN0IsK0NBQVFBLENBQUM7SUFDL0MsTUFBTSxDQUFDOEIsZ0JBQWdCQyxrQkFBa0IsR0FBRy9CLCtDQUFRQSxDQUFXLEVBQUU7SUFFakUsTUFBTWdDLGlCQUFpQjlCLDZDQUFNQSxDQUFpQjtJQUM5QyxNQUFNK0IsaUJBQWlCL0IsNkNBQU1BLENBQWlCO0lBQzlDLE1BQU1nQyxXQUFXaEMsNkNBQU1BLENBQTBCO0lBQ2pELE1BQU1pQyxTQUFTL0IsMERBQVNBO0lBRXhCSCxnREFBU0E7a0NBQUM7WUFDUm1DO1FBQ0Y7aUNBQUc7UUFBQ2xC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QUFROzs7Ozs7a0VBRVgsOERBQUNaO3dEQUFFZCxXQUFVO2tFQUFpQkg7Ozs7Ozs7K0NBUHpCNkI7Ozs7Ozs7OztrRUFZWCw4REFBQzNCO3dDQUFJQyxXQUFVO2tEQUNiLDRFQUFDYzs0Q0FBRWQsV0FBVTtzREFBZ0I7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztZQVF4Q25GLDJCQUNDLDhEQUFDa0Y7Z0JBQUlDLFdBQVU7MEJBQ2IsNEVBQUNEO29CQUFJQyxXQUFVOztzQ0FDYiw4REFBQ3FDOzRCQUFHckMsV0FBVTtzQ0FBdUM7Ozs7OztzQ0FDckQsOERBQUNjOzRCQUFFZCxXQUFVO3NDQUFxQjs7Ozs7O3NDQUVsQyw4REFBQ0Q7NEJBQUlDLFdBQVU7OzhDQUNiLDhEQUFDSztvQ0FDQ0MsU0FBU1g7b0NBQ1RLLFdBQVU7OENBQ1g7Ozs7Ozs4Q0FHRCw4REFBQ0s7b0NBQ0NDLFNBQVM3QjtvQ0FDVHVCLFdBQVU7OENBQ1g7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBU2Y7R0F0aEJNdEc7O1FBaUJXSCxzREFBU0E7OztLQWpCcEJHO0FBd2hCTixpRUFBZUEsWUFBWUEsRUFBQyIsInNvdXJjZXMiOlsiL2hvbWUvaHlhbmcvQ1MyMzlfbmV3L05ld1VJK0JhY2tlbmQvTmV3VUkvc3JjL2FwcC9yb2xlcGxheS9wYWdlLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIlxuaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBJbWFnZSBmcm9tICduZXh0L2ltYWdlJztcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvbmF2aWdhdGlvbic7XG5pbXBvcnQgeyBhdXRoIH0gZnJvbSBcIi4uLy4uLy4uL3NlcnZlci9maXJlYmFzZVwiO1xuaW1wb3J0IHsgb25BdXRoU3RhdGVDaGFuZ2VkLCBVc2VyIH0gZnJvbSBcImZpcmViYXNlL2F1dGhcIjtcbmltcG9ydCB7IHNlbmRDaGF0TWVzc2FnZSwgZ2V0U3VnZ2VzdGlvbnMsIHNldFNjZW5hcmlvIH0gZnJvbSAnQC9zZXJ2aWNlcy9hcGknO1xuXG5pbnRlcmZhY2UgU2NlbmFyaW8ge1xuICBpZDogc3RyaW5nO1xuICB0aXRsZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIGN1c3RvbTogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIE1lc3NhZ2Uge1xuICB0ZXh0OiBzdHJpbmc7XG4gIHNlbmRlcjogJ3VzZXInIHwgJ2JvdCc7XG4gIGF1ZGlvX3VybD86IHN0cmluZztcbn1cblxuY29uc3QgUm9sZXBsYXlQYWdlID0gKCkgPT4ge1xuICBjb25zdCBbdXNlciwgc2V0VXNlcl0gPSB1c2VTdGF0ZTxVc2VyIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbc2hvd1Byb2ZpbGVNZW51LCBzZXRTaG93UHJvZmlsZU1lbnVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdXNlckxhbmd1YWdlLCBzZXRVc2VyTGFuZ3VhZ2VdID0gdXNlU3RhdGU8c3RyaW5nPignZW4nKTtcbiAgY29uc3QgW2lucHV0VGV4dCwgc2V0SW5wdXRUZXh0XSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW21lc3NhZ2VzLCBzZXRNZXNzYWdlc10gPSB1c2VTdGF0ZTxNZXNzYWdlW10+KFtdKTtcbiAgY29uc3QgW2lzTG9hZGluZywgc2V0SXNMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3NjZW5hcmlvLCBzZXRTY2VuYXJpb10gPSB1c2VTdGF0ZTxTY2VuYXJpbyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbaXNQbGF5aW5nLCBzZXRJc1BsYXlpbmddID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtzaG93TW9kYWwsIHNldFNob3dNb2RhbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpc1JlY29yZGluZywgc2V0SXNSZWNvcmRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc3VnZ2VzdGlvbkxpc3QsIHNldFN1Z2dlc3Rpb25MaXN0XSA9IHVzZVN0YXRlPHN0cmluZ1tdPihbXSk7XG4gIFxuICBjb25zdCBwcm9maWxlTWVudVJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCk7XG4gIGNvbnN0IG1lc3NhZ2VzRW5kUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgYXVkaW9SZWYgPSB1c2VSZWY8SFRNTEF1ZGlvRWxlbWVudCB8IG51bGw+KG51bGwpO1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNjcm9sbFRvQm90dG9tKCk7XG4gIH0sIFttZXNzYWdlc10pO1xuICBcbiAgY29uc3Qgc2Nyb2xsVG9Cb3R0b20gPSAoKSA9PiB7XG4gICAgbWVzc2FnZXNFbmRSZWYuY3VycmVudD8uc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogXCJzbW9vdGhcIiB9KTtcbiAgfTtcblxuICAvLyAvLyBJbml0aWFsaXplIHNjZW5hcmlvIGNvbnZlcnNhdGlvbiB3aXRoIGJhY2tlbmRcbiAgLy8gY29uc3QgaW5pdGlhbGl6ZUNvbnZlcnNhdGlvbiA9IGFzeW5jICh1c2VybmFtZTogc3RyaW5nLCBzY2VuYXJpb1RpdGxlOiBzdHJpbmcpID0+IHtcbiAgLy8gICB0cnkge1xuICAvLyAgICAgY29uc3Qgc2NlbmFyaW9SZXNwb25zZSA9IGF3YWl0IHNldFNjZW5hcmlvKHVzZXJuYW1lLCBzY2VuYXJpb1RpdGxlKTtcbiAgLy8gICAgIGZldGNoU3VnZ2VzdGlvbnModXNlcm5hbWUpOyAvLyBJbml0aWFsIHN1Z2dlc3Rpb25zXG4gIC8vICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgLy8gICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbml0aWFsaXppbmcgY29udmVyc2F0aW9uOlwiLCBlcnJvcik7XG4gIC8vICAgfVxuICAvLyB9O1xuXG4gIC8vIHVzZUVmZmVjdCgoKSA9PiB7XG4gIC8vICAgLy8gTG9hZCB0aGUgc2NlbmFyaW8gZnJvbSBsb2NhbFN0b3JhZ2VcbiAgLy8gICBjb25zdCBzYXZlZFNjZW5hcmlvID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1cnJlbnRTY2VuYXJpbycpO1xuICAgIFxuICAvLyAgIGlmICghc2F2ZWRTY2VuYXJpbykge1xuICAvLyAgICAgLy8gSWYgbm8gc2NlbmFyaW8gaXMgZm91bmQsIHJlZGlyZWN0IGJhY2sgdG8gc2NlbmFyaW8gc2VsZWN0aW9uXG4gIC8vICAgICBhbGVydChcIk5vIHNjZW5hcmlvIHNlbGVjdGVkLiBQbGVhc2Ugc2VsZWN0IGEgc2NlbmFyaW8gZmlyc3QuXCIpO1xuICAvLyAgICAgcm91dGVyLnB1c2goJy9zY2VuYXJpbycpO1xuICAvLyAgICAgcmV0dXJuO1xuICAvLyAgIH1cbiAgICBcbiAgLy8gICB0cnkge1xuICAvLyAgICAgY29uc3QgcGFyc2VkU2NlbmFyaW8gPSBKU09OLnBhcnNlKHNhdmVkU2NlbmFyaW8pO1xuICAvLyAgICAgc2V0U2NlbmFyaW8ocGFyc2VkU2NlbmFyaW8pO1xuICAgICAgXG4gIC8vICAgICBjb25zdCB1bnN1YnNjcmliZSA9IG9uQXV0aFN0YXRlQ2hhbmdlZChhdXRoLCBhc3luYyAoY3VycmVudFVzZXIpID0+IHtcbiAgLy8gICAgICAgc2V0VXNlcihjdXJyZW50VXNlcik7XG4gICAgICAgIFxuICAvLyAgICAgICBjb25zdCBzYXZlZExvY2FsZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsb2NhbGUnKSB8fCAnZW4nO1xuICAvLyAgICAgICBzZXRVc2VyTGFuZ3VhZ2Uoc2F2ZWRMb2NhbGUpO1xuICAgICAgICBcbiAgLy8gICAgICAgaWYgKGN1cnJlbnRVc2VyKSB7XG4gIC8vICAgICAgICAgY29uc3QgdXNlcm5hbWUgPSBjdXJyZW50VXNlci5kaXNwbGF5TmFtZSB8fCBjdXJyZW50VXNlci5lbWFpbD8uc3BsaXQoJ0AnKVswXSB8fCAnR3Vlc3QnO1xuICAgICAgICAgIFxuICAvLyAgICAgICAgIGF3YWl0IGluaXRpYWxpemVDb252ZXJzYXRpb24odXNlcm5hbWUsIHBhcnNlZFNjZW5hcmlvLnRpdGxlKTtcbiAgLy8gICAgICAgICBzZXRNZXNzYWdlcyhbXG4gIC8vICAgICAgICAgICB7IFxuICAvLyAgICAgICAgICAgICB0ZXh0OiBgSGVsbG8ke2N1cnJlbnRVc2VyLmRpc3BsYXlOYW1lID8gJywgJyArIGN1cnJlbnRVc2VyLmRpc3BsYXlOYW1lIDogJyd9ISBJJ2xsIGJlIHlvdXIgY29udmVyc2F0aW9uIHBhcnRuZXIgZm9yIHRoaXMgJHtwYXJzZWRTY2VuYXJpby50aXRsZX0gc2NlbmFyaW8uIEhvdyBjYW4gSSBoZWxwIHlvdSB0b2RheT9gLCBcbiAgLy8gICAgICAgICAgICAgc2VuZGVyOiAnYm90JyBcbiAgLy8gICAgICAgICAgIH1cbiAgLy8gICAgICAgICBdKTtcbiAgLy8gICAgICAgfSBlbHNlIHtcbiAgLy8gICAgICAgICBzZXRNZXNzYWdlcyhbXG4gIC8vICAgICAgICAgICB7IFxuICAvLyAgICAgICAgICAgICB0ZXh0OiBgV2VsY29tZSB0byB0aGUgJHtwYXJzZWRTY2VuYXJpby50aXRsZX0gc2NlbmFyaW8hIEknbGwgYmUgeW91ciBjb252ZXJzYXRpb24gcGFydG5lci4gSG93IHdvdWxkIHlvdSBsaWtlIHRvIHN0YXJ0P2AsIFxuICAvLyAgICAgICAgICAgICBzZW5kZXI6ICdib3QnIFxuICAvLyAgICAgICAgICAgfVxuICAvLyAgICAgICAgIF0pO1xuICAvLyAgICAgICB9XG4gICAgICAgIFxuICAvLyAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgLy8gICAgIH0pO1xuICAgICAgXG4gIC8vICAgICByZXR1cm4gKCkgPT4gdW5zdWJzY3JpYmUoKTtcbiAgLy8gICB9IGNhdGNoIChlcnJvcikge1xuICAvLyAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHBhcnNpbmcgc2NlbmFyaW86XCIsIGVycm9yKTtcbiAgLy8gICAgIGFsZXJ0KFwiVGhlcmUgd2FzIGEgcHJvYmxlbSBsb2FkaW5nIHRoZSBzY2VuYXJpby4gUGxlYXNlIHRyeSBhZ2Fpbi5cIik7XG4gIC8vICAgICByb3V0ZXIucHVzaCgnL3NjZW5hcmlvJyk7XG4gIC8vICAgfVxuICAvLyB9LCBbXSk7XG5cbiAgLy8gRmV0Y2ggdXBkYXRlZCBjb252ZXJzYXRpb24gc3VnZ2VzdGlvbnMgZnJvbSBiYWNrZW5kXG4gIGNvbnN0IGZldGNoU3VnZ2VzdGlvbnMgPSBhc3luYyAodXNlcm5hbWU6IHN0cmluZykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldFN1Z2dlc3Rpb25zKHVzZXJuYW1lKTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmRhdGEgJiYgIXJlc3BvbnNlLmVycm9yKSB7XG4gICAgICAgIHNldFN1Z2dlc3Rpb25MaXN0KHJlc3BvbnNlLmRhdGEuc3VnZ2VzdGlvbnMpO1xuICAgICAgfSBlbHNlIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5lcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgc3VnZ2VzdGlvbnM6XCIsIHJlc3BvbnNlLmVycm9yKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHN1Z2dlc3Rpb25zOlwiLCBlcnJvcik7XG4gICAgfVxuICB9O1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZnVuY3Rpb24gaGFuZGxlQ2xpY2tPdXRzaWRlKGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gICAgICBpZiAocHJvZmlsZU1lbnVSZWYuY3VycmVudCAmJiAhcHJvZmlsZU1lbnVSZWYuY3VycmVudC5jb250YWlucyhldmVudC50YXJnZXQgYXMgTm9kZSkpIHtcbiAgICAgICAgc2V0U2hvd1Byb2ZpbGVNZW51KGZhbHNlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBoYW5kbGVDbGlja091dHNpZGUpO1xuICAgIHJldHVybiAoKSA9PiBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGhhbmRsZUNsaWNrT3V0c2lkZSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBoYW5kbGVCYWNrQ2xpY2sgPSAoKSA9PiB7XG4gICAgcm91dGVyLnB1c2goJy9zY2VuYXJpbycpO1xuICB9O1xuICBcbiAgY29uc3QgbmF2aWdhdGVUb0Rhc2hib2FyZCA9ICgpID0+IHtcbiAgICByb3V0ZXIucHVzaCgnL2Rhc2hib2FyZCcpO1xuICAgIHNldFNob3dQcm9maWxlTWVudShmYWxzZSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlSW5wdXRDaGFuZ2UgPSAoZXZlbnQ6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB7XG4gICAgc2V0SW5wdXRUZXh0KGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlS2V5UHJlc3MgPSAoZXZlbnQ6IFJlYWN0LktleWJvYXJkRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICBoYW5kbGVTZW5kTWVzc2FnZSgpO1xuICAgIH1cbiAgfTtcblxuICAvLyBQbGF5IGF1ZGlvIHdoZW4gc3BlYWtlciBidXR0b24gaXMgY2xpY2tlZFxuICBjb25zdCBwbGF5TWVzc2FnZUF1ZGlvID0gKG1lc3NhZ2VJZDogbnVtYmVyLCBhdWRpb1VybD86IHN0cmluZykgPT4ge1xuICAgIGlmICghYXVkaW9VcmwpIHJldHVybjtcbiAgICBcbiAgICAvLyBTdG9wIGFueSBjdXJyZW50bHkgcGxheWluZyBhdWRpb1xuICAgIGlmIChhdWRpb1JlZi5jdXJyZW50KSB7XG4gICAgICBhdWRpb1JlZi5jdXJyZW50LnBhdXNlKCk7XG4gICAgICBhdWRpb1JlZi5jdXJyZW50LmN1cnJlbnRUaW1lID0gMDtcbiAgICAgIHNldElzUGxheWluZyhudWxsKTtcbiAgICB9XG4gICAgXG4gICAgLy8gSWYgY2xpY2tpbmcgb24gdGhlIGN1cnJlbnRseSBwbGF5aW5nIGF1ZGlvLCBqdXN0IHN0b3AgaXRcbiAgICBpZiAoaXNQbGF5aW5nID09PSBgbWVzc2FnZS0ke21lc3NhZ2VJZH1gKSB7XG4gICAgICBzZXRJc1BsYXlpbmcobnVsbCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIENyZWF0ZSBhbmQgcGxheSBuZXcgYXVkaW9cbiAgICBjb25zdCBhdWRpbyA9IG5ldyBBdWRpbyhgaHR0cDovL2xvY2FsaG9zdDo4MDAwJHthdWRpb1VybH1gKTtcbiAgICBhdWRpb1JlZi5jdXJyZW50ID0gYXVkaW87XG4gICAgXG4gICAgLy8gU2V0IHRoZSBjdXJyZW50bHkgcGxheWluZyBtZXNzYWdlIElEXG4gICAgc2V0SXNQbGF5aW5nKGBtZXNzYWdlLSR7bWVzc2FnZUlkfWApO1xuICAgIFxuICAgIC8vIFdoZW4gYXVkaW8gZW5kcywgcmVzZXQgdGhlIHBsYXlpbmcgc3RhdGVcbiAgICBhdWRpby5hZGRFdmVudExpc3RlbmVyKCdlbmRlZCcsICgpID0+IHtcbiAgICAgIHNldElzUGxheWluZyhudWxsKTtcbiAgICB9KTtcbiAgICBcbiAgICBhdWRpby5wbGF5KCkuY2F0Y2goZSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiQXVkaW8gcGxheWJhY2sgZXJyb3I6XCIsIGUpO1xuICAgICAgc2V0SXNQbGF5aW5nKG51bGwpO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVNlbmRNZXNzYWdlID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICghaW5wdXRUZXh0LnRyaW0oKSB8fCAhc2NlbmFyaW8pIHJldHVybjtcbiAgICBcbiAgICBjb25zdCB1c2VyTWVzc2FnZSA9IGlucHV0VGV4dC50cmltKCk7XG4gICAgc2V0TWVzc2FnZXMocHJldiA9PiBbLi4ucHJldiwgeyB0ZXh0OiB1c2VyTWVzc2FnZSwgc2VuZGVyOiAndXNlcicgfV0pO1xuICAgIHNldElucHV0VGV4dCgnJyk7XG4gICAgc2V0SXNMb2FkaW5nKHRydWUpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJuYW1lID0gdXNlciA/ICh1c2VyLmRpc3BsYXlOYW1lIHx8IHVzZXIuZW1haWw/LnNwbGl0KCdAJylbMF0gfHwgJ0d1ZXN0JykgOiAnR3Vlc3QnO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNlbmRDaGF0TWVzc2FnZShcbiAgICAgICAgdXNlcm5hbWUsXG4gICAgICAgIHVzZXJNZXNzYWdlLFxuICAgICAgICBzY2VuYXJpby50aXRsZSwgLy8gVXNpbmcgdGhlIHNjZW5hcmlvIHRpdGxlXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdXNlckxhbmd1YWdlXG4gICAgICApO1xuXG4gICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLmVycm9yKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBbLi4ucHJldiwgeyBcbiAgICAgICAgICB0ZXh0OiByZXNwb25zZS5kYXRhLnJlc3BvbnNlLCBcbiAgICAgICAgICBzZW5kZXI6ICdib3QnLFxuICAgICAgICAgIGF1ZGlvX3VybDogcmVzcG9uc2UuZGF0YS5hdWRpb191cmxcbiAgICAgICAgfV0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuYXVkaW9fdXJsKSB7XG4gICAgICAgICAgLy8gQ2xpY2sgdGhlIHNwZWFrZXIgYnV0dG9uIHRvIHBsYXkgbWVzc2FnZSBhdWRpb1xuICAgICAgICAgIHBsYXlNZXNzYWdlQXVkaW8obWVzc2FnZXMubGVuZ3RoLCByZXNwb25zZS5kYXRhLmF1ZGlvX3VybCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gRmV0Y2ggdXBkYXRlZCBzdWdnZXN0aW9ucyBhZnRlciBtZXNzYWdlXG4gICAgICBhd2FpdCBmZXRjaFN1Z2dlc3Rpb25zKHVzZXJuYW1lKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VuZGluZyBtZXNzYWdlOicsIGVycm9yKTtcbiAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gW1xuICAgICAgICAuLi5wcmV2LFxuICAgICAgICB7IHRleHQ6IFwiU29ycnksIEknbSBoYXZpbmcgdHJvdWJsZSBjb25uZWN0aW5nLiBQbGVhc2UgdHJ5IGFnYWluLlwiLCBzZW5kZXI6ICdib3QnIH1cbiAgICAgIF0pO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVFbmRTY2VuYXJpbyA9ICgpID0+IHtcbiAgICBzZXRTaG93TW9kYWwodHJ1ZSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlU2F2ZUNvbnZlcnNhdGlvbiA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFzY2VuYXJpbykgcmV0dXJuO1xuICAgICAgXG4gICAgICBjb25zdCBzY2VuYXJpb1R5cGUgPSBzY2VuYXJpby50aXRsZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccysvZywgJ18nKTtcbiAgICAgIGNvbnN0IHNhdmVkQ29udmVyc2F0aW9ucyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oc2NlbmFyaW9UeXBlKSB8fCAnW10nKTtcbiAgICAgIFxuICAgICAgc2F2ZWRDb252ZXJzYXRpb25zLnB1c2goe1xuICAgICAgICBpZDogRGF0ZS5ub3coKSxcbiAgICAgICAgZGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBzY2VuYXJpbzogc2NlbmFyaW8udGl0bGUsXG4gICAgICAgIG1lc3NhZ2VzOiBtZXNzYWdlcyxcbiAgICAgICAgdXNlck5hbWU6IHVzZXIgPyAodXNlci5kaXNwbGF5TmFtZSB8fCB1c2VyLmVtYWlsPy5zcGxpdCgnQCcpWzBdIHx8ICdHdWVzdCcpIDogJ0d1ZXN0JyxcbiAgICAgICAgbGFuZ3VhZ2U6IHVzZXJMYW5ndWFnZVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHNjZW5hcmlvVHlwZSwgSlNPTi5zdHJpbmdpZnkoc2F2ZWRDb252ZXJzYXRpb25zKSk7XG4gICAgICByb3V0ZXIucHVzaCgnL3RleHQnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHNhdmluZyBjb252ZXJzYXRpb246XCIsIGVycm9yKTtcbiAgICAgIHJvdXRlci5wdXNoKCcvdGV4dCcpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVEaXNjYXJkQ29udmVyc2F0aW9uID0gKCkgPT4ge1xuICAgIHJvdXRlci5wdXNoKCcvdGV4dCcpO1xuICB9O1xuXG4gIC8vIEFwcGx5IHN1Z2dlc3Rpb24gdG8gaW5wdXRcbiAgY29uc3QgaGFuZGxlU3VnZ2VzdGlvbkNsaWNrID0gKHN1Z2dlc3Rpb246IHN0cmluZykgPT4ge1xuICAgIHNldElucHV0VGV4dChzdWdnZXN0aW9uKTtcbiAgfTtcblxuICAvLyBUb2dnbGUgdm9pY2UgcmVjb3JkaW5nIChwbGFjZWhvbGRlcilcbiAgY29uc3QgdG9nZ2xlUmVjb3JkaW5nID0gKCkgPT4ge1xuICAgIHNldElzUmVjb3JkaW5nKCFpc1JlY29yZGluZyk7XG4gICAgLy8gQWRkIGFjdHVhbCByZWNvcmRpbmcgbG9naWMgaGVyZVxuICB9O1xuXG4gIGlmIChsb2FkaW5nKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCJcbiAgICAgICAgc3R5bGU9e3sgYmFja2dyb3VuZEltYWdlOiBcInVybCgnL2ljb25zL2JhY2tncm91bmQxLmpwZycpXCIsIGJhY2tncm91bmRTaXplOiBcImNvdmVyXCIgfX0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTEyIHctMTIgYm9yZGVyLXQtMiBib3JkZXItYi0yIGJvcmRlci1bIzQ4ZDFjY11cIj48L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGJnLWdyYXktOTAwIHRleHQtd2hpdGUgcmVsYXRpdmVcIlxuICAgICAgc3R5bGU9e3sgYmFja2dyb3VuZEltYWdlOiBcInVybCgnL2ljb25zL2JhY2tncm91bmQxLmpwZycpXCIgfX1cbiAgICA+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC04IGxlZnQtOCB6LTEwXCIgcmVmPXtwcm9maWxlTWVudVJlZn0+XG4gICAgICAgIDxidXR0b24gXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2hvd1Byb2ZpbGVNZW51KCFzaG93UHJvZmlsZU1lbnUpfVxuICAgICAgICAgIGNsYXNzTmFtZT1cInctMTAgaC0xMCByb3VuZGVkLWZ1bGwgYmctd2hpdGUvMTAgaG92ZXI6Ymctd2hpdGUvMjAgdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMjAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG92ZXJmbG93LWhpZGRlblwiXG4gICAgICAgID5cbiAgICAgICAgICB7dXNlcj8ucGhvdG9VUkwgPyAoXG4gICAgICAgICAgICA8SW1hZ2VcbiAgICAgICAgICAgICAgc3JjPXt1c2VyLnBob3RvVVJMfVxuICAgICAgICAgICAgICBhbHQ9XCJQcm9maWxlXCJcbiAgICAgICAgICAgICAgd2lkdGg9ezQwfVxuICAgICAgICAgICAgICBoZWlnaHQ9ezQwfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJvYmplY3QtY292ZXJcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1mdWxsIGJnLVsjNDhkMWNjXSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICB7dXNlcj8uZGlzcGxheU5hbWUgPyB1c2VyLmRpc3BsYXlOYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpIDogXG4gICAgICAgICAgICAgICB1c2VyPy5lbWFpbCA/IHVzZXIuZW1haWwuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgOiBcIkdcIn1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgICBcbiAgICAgICAge3Nob3dQcm9maWxlTWVudSAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtMTIgbGVmdC0wIGJnLXdoaXRlIHJvdW5kZWQtbGcgc2hhZG93LWxnIHB5LTIgbWluLXctWzE4MHB4XSB0ZXh0LWdyYXktODAwIHotMjBcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHgtNCBweS0yIGJvcmRlci1iIGJvcmRlci1ncmF5LTIwMFwiPlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJmb250LW1lZGl1bVwiPnt1c2VyPy5kaXNwbGF5TmFtZSB8fCBcIkd1ZXN0XCJ9PC9wPlxuICAgICAgICAgICAgICB7dXNlcj8uZW1haWwgJiYgKFxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMFwiPnt1c2VyLmVtYWlsfTwvcD5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJweC00IHB5LTIgYm9yZGVyLWIgYm9yZGVyLWdyYXktMjAwXCI+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMFwiPkxhbmd1YWdlOiB7dXNlckxhbmd1YWdlID09PSAnZW4nID8gJ0VuZ2xpc2gnIDogdXNlckxhbmd1YWdlID09PSAnemgtQ04nID8gJ0NoaW5lc2UnIDogJ0phcGFuZXNlJ308L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIHt1c2VyID8gKFxuICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e25hdmlnYXRlVG9EYXNoYm9hcmR9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHRleHQtbGVmdCBweC00IHB5LTIgaG92ZXI6YmctZ3JheS0xMDAgdHJhbnNpdGlvbi1jb2xvcnMgZmxleCBpdGVtcy1jZW50ZXJcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJ3LTQgaC00IG1yLTJcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cbiAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD1cIjJcIiBkPVwiTTE2IDdhNCA0IDAgMTEtOCAwIDQgNCAwIDAxOCAwek0xMiAxNGE3IDcgMCAwMC03IDdoMTRhNyA3IDAgMDAtNy03elwiIC8+XG4gICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgUHJvZmlsZSBEYXNoYm9hcmRcbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHJvdXRlci5wdXNoKCcvbG9naW4nKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgdGV4dC1sZWZ0IHB4LTQgcHktMiBob3ZlcjpiZy1ncmF5LTEwMCB0cmFuc2l0aW9uLWNvbG9ycyBmbGV4IGl0ZW1zLWNlbnRlclwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cInctNCBoLTQgbXItMlwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPVwiMlwiIGQ9XCJNMTEgMTZsLTQtNG0wIDBsNC00bS00IDRoMTRtLTUgNHYxYTMgMyAwIDAxLTMgM0g2YTMgMyAwIDAxLTMtM1Y3YTMgMyAwIDAxMy0zaDdhMyAzIDAgMDEzIDN2MVwiIC8+XG4gICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgU2lnbiBJblxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIFxuICAgICAgPGJ1dHRvbiBcbiAgICAgICAgb25DbGljaz17aGFuZGxlQmFja0NsaWNrfVxuICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtOCBsZWZ0LTI0IHctMTAgaC0xMCByb3VuZGVkLWZ1bGwgYmctd2hpdGUvMTAgaG92ZXI6Ymctd2hpdGUvMjAgdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMjAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCJcbiAgICAgID5cbiAgICAgICAgPEltYWdlXG4gICAgICAgICAgc3JjPVwiL2ljb25zL2JhY2sucG5nXCJcbiAgICAgICAgICBhbHQ9XCJCYWNrXCJcbiAgICAgICAgICB3aWR0aD17MjR9XG4gICAgICAgICAgaGVpZ2h0PXsyNH1cbiAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LXdoaXRlXCJcbiAgICAgICAgLz5cbiAgICAgIDwvYnV0dG9uPlxuICAgICAgXG4gICAgICA8YnV0dG9uIFxuICAgICAgICBvbkNsaWNrPXtoYW5kbGVFbmRTY2VuYXJpb31cbiAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTggcmlnaHQtOCBiZy1bIzIwYjJhYV0gaG92ZXI6YmctWyMwMDgwODBdIHB4LTYgcHktMiByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzIGR1cmF0aW9uLTIwMFwiXG4gICAgICA+XG4gICAgICAgIEVuZCBTY2VuYXJpb1xuICAgICAgPC9idXR0b24+XG4gICAgICBcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHQtMjQgcHgtNCBtYXgtdy02eGwgbXgtYXV0b1wiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZ2FwLTRcIj5cbiAgICAgICAgICB7LyogQ29udmVyc2F0aW9uIGFyZWEgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LVs2NSVdXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtWzcwdmhdIGJnLVsjZjBmOGZmXSByb3VuZGVkLXhsIHAtNiBvdmVyZmxvdy15LWF1dG8gbWItNFwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgc3BhY2UteS00XCI+XG4gICAgICAgICAgICAgICAge21lc3NhZ2VzLm1hcCgobWVzc2FnZSwgaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAga2V5PXtpbmRleH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgZmxleCAke21lc3NhZ2Uuc2VuZGVyID09PSAndXNlcicgPyAnanVzdGlmeS1lbmQnIDogJ2p1c3RpZnktc3RhcnQnfWB9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHttZXNzYWdlLnNlbmRlciA9PT0gJ2JvdCcgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy04IGgtOCBtci0yIGZsZXgtc2hyaW5rLTAgcm91bmRlZC1mdWxsIG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEltYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNyYz1cIi9pY29ucy9yb2JvdC5qcGdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBhbHQ9XCJSb2JvdFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPXszMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PXszMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwib2JqZWN0LWNvdmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BtYXgtdy1zbSByb3VuZGVkLWxnIHB4LTQgcHktMiAke1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zZW5kZXIgPT09ICd1c2VyJyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnYmctYmx1ZS01MDAgdGV4dC13aGl0ZScgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogJ2JnLWdyYXktMjAwIHRleHQtZ3JheS04MDAnXG4gICAgICAgICAgICAgICAgICAgICAgfSBncm91cCByZWxhdGl2ZWB9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICB7bWVzc2FnZS50ZXh0fVxuICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgIHsvKiBTcGVha2VyIGJ1dHRvbiBmb3IgYm90IG1lc3NhZ2VzICovfVxuICAgICAgICAgICAgICAgICAgICAgIHttZXNzYWdlLnNlbmRlciA9PT0gJ2JvdCcgJiYgbWVzc2FnZS5hdWRpb191cmwgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBwbGF5TWVzc2FnZUF1ZGlvKGluZGV4LCBtZXNzYWdlLmF1ZGlvX3VybCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIC1yaWdodC0xMCB0b3AtMS8yIHRyYW5zZm9ybSAtdHJhbnNsYXRlLXktMS8yIHctOCBoLTggYmctZ3JheS0xMDAgcm91bmRlZC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGhvdmVyOmJnLWdyYXktMjAwIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cIlBsYXkgbWVzc2FnZSBhdWRpb1wiXG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtpc1BsYXlpbmcgPT09IGBtZXNzYWdlLSR7aW5kZXh9YCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFuaW1hdGUtcHVsc2VcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbWFnZSBzcmM9XCIvaWNvbnMvc3BlYWtlci5qcGdcIiBhbHQ9XCJTcGVha2VyXCIgd2lkdGg9ezI0fSBoZWlnaHQ9ezI0fSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbWFnZSBzcmM9XCIvaWNvbnMvc3BlYWtlci5qcGdcIiBhbHQ9XCJTcGVha2VyXCIgd2lkdGg9ezI0fSBoZWlnaHQ9ezI0fSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIHttZXNzYWdlLnNlbmRlciA9PT0gJ3VzZXInICYmIChcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctOCBoLTggbWwtMiBmbGV4LXNocmluay0wIHJvdW5kZWQtZnVsbCBvdmVyZmxvdy1oaWRkZW4gYmctYmx1ZS0xMDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt1c2VyPy5waG90b1VSTCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEltYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPXt1c2VyLnBob3RvVVJMfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdD1cIlVzZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPXszMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9ezMyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm9iamVjdC1jb3ZlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBoLWZ1bGwgYmctWyM0OGQxY2NdIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtd2hpdGUgZm9udC1zZW1pYm9sZCB0ZXh0LXhzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3VzZXI/LmRpc3BsYXlOYW1lID8gdXNlci5kaXNwbGF5TmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSA6IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXI/LmVtYWlsID8gdXNlci5lbWFpbC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSA6IFwiVVwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICB7aXNMb2FkaW5nICYmIChcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LXN0YXJ0XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yIGJnLWdyYXktMTAwIHJvdW5kZWQtbGcgcHgtNCBweS0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTIgaC0yIGJnLWdyYXktNDAwIHJvdW5kZWQtZnVsbCBhbmltYXRlLWJvdW5jZVwiIHN0eWxlPXt7IGFuaW1hdGlvbkRlbGF5OiAnMHMnIH19PjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0yIGgtMiBiZy1ncmF5LTQwMCByb3VuZGVkLWZ1bGwgYW5pbWF0ZS1ib3VuY2VcIiBzdHlsZT17eyBhbmltYXRpb25EZWxheTogJzAuMnMnIH19PjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0yIGgtMiBiZy1ncmF5LTQwMCByb3VuZGVkLWZ1bGwgYW5pbWF0ZS1ib3VuY2VcIiBzdHlsZT17eyBhbmltYXRpb25EZWxheTogJzAuNHMnIH19PjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPGRpdiByZWY9e21lc3NhZ2VzRW5kUmVmfSAvPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZ2FwLTJcIj5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RvZ2dsZVJlY29yZGluZ31cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake1xuICAgICAgICAgICAgICAgICAgaXNSZWNvcmRpbmcgXG4gICAgICAgICAgICAgICAgICAgID8gJ2JnLXJlZC01MDAgaG92ZXI6YmctcmVkLTYwMCcgXG4gICAgICAgICAgICAgICAgICAgIDogJ2JnLWdyYXktMjAwIGhvdmVyOmJnLWdyYXktMzAwJ1xuICAgICAgICAgICAgICAgIH0gcHgtMyBweS0zIHJvdW5kZWQtbGcgdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMjAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHJlbGF0aXZlYH1cbiAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwiU3RhcnQgdm9pY2UgcmVjb3JkaW5nXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNiB3LTZcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2U9e2lzUmVjb3JkaW5nID8gXCJ3aGl0ZVwiIDogXCJibGFja1wifT5cbiAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD1cIk0xOSAxMWE3IDcgMCAwMS03IDdtMCAwYTcgNyAwIDAxLTctN203IDd2NG0wIDBIOG00IDBoNG0tNC04YTMgMyAwIDAxLTMtM1Y1YTMgMyAwIDExNiAwdjZhMyAzIDAgMDEtMyAzelwiIC8+XG4gICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAge2lzUmVjb3JkaW5nICYmIChcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0wIHJpZ2h0LTAgZmxleCBoLTMgdy0zXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImFuaW1hdGUtcGluZyBhYnNvbHV0ZSBpbmxpbmUtZmxleCBoLWZ1bGwgdy1mdWxsIHJvdW5kZWQtZnVsbCBiZy1yZWQtNDAwIG9wYWNpdHktNzVcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInJlbGF0aXZlIGlubGluZS1mbGV4IHJvdW5kZWQtZnVsbCBoLTMgdy0zIGJnLXJlZC01MDBcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9idXR0b24+XG5cbiAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgIHZhbHVlPXtpbnB1dFRleHR9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUlucHV0Q2hhbmdlfVxuICAgICAgICAgICAgICAgIG9uS2V5UHJlc3M9e2hhbmRsZUtleVByZXNzfVxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtpc1JlY29yZGluZyA/IFwiTGlzdGVuaW5nLi4uXCIgOiBcIlR5cGUgeW91ciBtZXNzYWdlLi4uXCJ9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgZmxleC0xIGJnLXdoaXRlIHRleHQtYmxhY2sgcHgtNCBweS0zIHJvdW5kZWQtbGcgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWJsdWUtNTAwICR7XG4gICAgICAgICAgICAgICAgICBpc1JlY29yZGluZyA/ICdhbmltYXRlLXB1bHNlIGJvcmRlci0yIGJvcmRlci1yZWQtNDAwJyA6ICcnXG4gICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzUmVjb3JkaW5nIHx8IGlzTG9hZGluZ31cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlU2VuZE1lc3NhZ2V9XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzUmVjb3JkaW5nIHx8IGlzTG9hZGluZyB8fCAhaW5wdXRUZXh0LnRyaW0oKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1bIzIwYjJhYV0gaG92ZXI6YmctWyMwMDgwODBdIHB4LTQgcHktMiByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzIGR1cmF0aW9uLTIwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBkaXNhYmxlZDpvcGFjaXR5LTUwXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtpc0xvYWRpbmcgPyAoXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFuaW1hdGUtc3BpbiByb3VuZGVkLWZ1bGwgaC01IHctNSBib3JkZXItdC0yIGJvcmRlci1iLTIgYm9yZGVyLXdoaXRlXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxJbWFnZSBzcmM9XCIvaWNvbnMvc2VuZC5wbmdcIiBhbHQ9XCJTZW5kXCIgd2lkdGg9ezI0fSBoZWlnaHQ9ezI0fSAvPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7LyogU3VnZ2VzdGlvbnMgcGFuZWwgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LVszNSVdXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtWzcwdmhdIGJnLVsjZjBmOGZmXSByb3VuZGVkLXhsIHAtNiBvdmVyZmxvdy15LWF1dG8gbWItNFwiPlxuXG4gICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTgwMCBtYi0zXCI+U3VnZ2VzdGVkIFJlc3BvbnNlczwvaDM+XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICB7c3VnZ2VzdGlvbkxpc3QubGVuZ3RoID4gMCA/IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktM1wiPlxuICAgICAgICAgICAgICAgICAge3N1Z2dlc3Rpb25MaXN0Lm1hcCgoc3VnZ2VzdGlvbiwgaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgIGtleT17aW5kZXh9XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLXdoaXRlIHJvdW5kZWQtbGcgcC0zIHNoYWRvdy1zbSBob3ZlcjpiZy1ncmF5LTUwIHRyYW5zaXRpb24tY29sb3JzIHRleHQtbGVmdCBmbGV4IGl0ZW1zLWNlbnRlclwiXG4gICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlU3VnZ2VzdGlvbkNsaWNrKHN1Z2dlc3Rpb24pfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZmxleC1zaHJpbmstMCB3LTYgaC02IGJnLVsjMjBiMmFhXSByb3VuZGVkLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC13aGl0ZSB0ZXh0LXhzIG1yLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtpbmRleCArIDF9XG4gICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtZ3JheS03MDBcIj57c3VnZ2VzdGlvbn08L3A+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1ncmF5LTUwIHJvdW5kZWQtbGcgcC00IHRleHQtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNTAwXCI+U3VnZ2VzdGlvbnMgd2lsbCBhcHBlYXIgaGVyZSBhZnRlciB5b3Ugc3RhcnQgY2hhdHRpbmcuPC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICBcbiAgICAgIHtzaG93TW9kYWwgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpeGVkIGluc2V0LTAgYmctYmxhY2svNzAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgei01MFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgcm91bmRlZC14bCBwLTYgbWF4LXctbWQgdy1mdWxsIG14LTRcIj5cbiAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LWdyYXktODAwIG1iLTRcIj5FbmQgU2NlbmFyaW88L2gzPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTYwMCBtYi02XCI+WW91ciBwcmFjdGljZSBzZXNzaW9uIHdpbGwgYmUgY2xvc2VkLiBEbyB5b3Ugd2FudCB0byBzYXZlIHRoaXMgY29udmVyc2F0aW9uIHRvIHlvdXIgcHJvZmlsZT88L3A+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBnYXAtNCBqdXN0aWZ5LWVuZFwiPlxuICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZURpc2NhcmRDb252ZXJzYXRpb259XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtNCBweS0yIGJnLWdyYXktMjAwIGhvdmVyOmJnLWdyYXktMzAwIHRleHQtZ3JheS04MDAgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBEb24ndCBTYXZlXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVNhdmVDb252ZXJzYXRpb259XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtNCBweS0yIGJnLWJsdWUtNTAwIGhvdmVyOmJnLWJsdWUtNjAwIHRleHQtd2hpdGUgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBTYXZlXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFJvbGVwbGF5UGFnZTsiXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZVJlZiIsIkltYWdlIiwidXNlUm91dGVyIiwic2VuZENoYXRNZXNzYWdlIiwiZ2V0U3VnZ2VzdGlvbnMiLCJSb2xlcGxheVBhZ2UiLCJ1c2VyIiwic2V0VXNlciIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwic2hvd1Byb2ZpbGVNZW51Iiwic2V0U2hvd1Byb2ZpbGVNZW51IiwidXNlckxhbmd1YWdlIiwic2V0VXNlckxhbmd1YWdlIiwiaW5wdXRUZXh0Iiwic2V0SW5wdXRUZXh0IiwibWVzc2FnZXMiLCJzZXRNZXNzYWdlcyIsImlzTG9hZGluZyIsInNldElzTG9hZGluZyIsInNjZW5hcmlvIiwic2V0U2NlbmFyaW8iLCJpc1BsYXlpbmciLCJzZXRJc1BsYXlpbmciLCJzaG93TW9kYWwiLCJzZXRTaG93TW9kYWwiLCJpc1JlY29yZGluZyIsInNldElzUmVjb3JkaW5nIiwic3VnZ2VzdGlvbkxpc3QiLCJzZXRTdWdnZXN0aW9uTGlzdCIsInByb2ZpbGVNZW51UmVmIiwibWVzc2FnZXNFbmRSZWYiLCJhdWRpb1JlZiIsInJvdXRlciIsInNjcm9sbFRvQm90dG9tIiwiY3VycmVudCIsInNjcm9sbEludG9WaWV3IiwiYmVoYXZpb3IiLCJmZXRjaFN1Z2dlc3Rpb25zIiwidXNlcm5hbWUiLCJyZXNwb25zZSIsImRhdGEiLCJlcnJvciIsInN1Z2dlc3Rpb25zIiwiY29uc29sZSIsImhhbmRsZUNsaWNrT3V0c2lkZSIsImV2ZW50IiwiY29udGFpbnMiLCJ0YXJnZXQiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaGFuZGxlQmFja0NsaWNrIiwicHVzaCIsIm5hdmlnYXRlVG9EYXNoYm9hcmQiLCJoYW5kbGVJbnB1dENoYW5nZSIsInZhbHVlIiwiaGFuZGxlS2V5UHJlc3MiLCJrZXkiLCJoYW5kbGVTZW5kTWVzc2FnZSIsInBsYXlNZXNzYWdlQXVkaW8iLCJtZXNzYWdlSWQiLCJhdWRpb1VybCIsInBhdXNlIiwiY3VycmVudFRpbWUiLCJhdWRpbyIsIkF1ZGlvIiwicGxheSIsImNhdGNoIiwiZSIsInRyaW0iLCJ1c2VyTWVzc2FnZSIsInByZXYiLCJ0ZXh0Iiwic2VuZGVyIiwiZGlzcGxheU5hbWUiLCJlbWFpbCIsInNwbGl0IiwidGl0bGUiLCJ1bmRlZmluZWQiLCJFcnJvciIsImF1ZGlvX3VybCIsImxlbmd0aCIsImhhbmRsZUVuZFNjZW5hcmlvIiwiaGFuZGxlU2F2ZUNvbnZlcnNhdGlvbiIsInNjZW5hcmlvVHlwZSIsInRvTG93ZXJDYXNlIiwicmVwbGFjZSIsInNhdmVkQ29udmVyc2F0aW9ucyIsIkpTT04iLCJwYXJzZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJpZCIsIkRhdGUiLCJub3ciLCJkYXRlIiwidG9JU09TdHJpbmciLCJ1c2VyTmFtZSIsImxhbmd1YWdlIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImhhbmRsZURpc2NhcmRDb252ZXJzYXRpb24iLCJoYW5kbGVTdWdnZXN0aW9uQ2xpY2siLCJzdWdnZXN0aW9uIiwidG9nZ2xlUmVjb3JkaW5nIiwiZGl2IiwiY2xhc3NOYW1lIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJiYWNrZ3JvdW5kU2l6ZSIsInJlZiIsImJ1dHRvbiIsIm9uQ2xpY2siLCJwaG90b1VSTCIsInNyYyIsImFsdCIsIndpZHRoIiwiaGVpZ2h0IiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJwIiwic3ZnIiwiZmlsbCIsInN0cm9rZSIsInZpZXdCb3giLCJwYXRoIiwic3Ryb2tlTGluZWNhcCIsInN0cm9rZUxpbmVqb2luIiwic3Ryb2tlV2lkdGgiLCJkIiwibWFwIiwibWVzc2FnZSIsImluZGV4IiwiYXJpYS1sYWJlbCIsImFuaW1hdGlvbkRlbGF5IiwieG1sbnMiLCJzcGFuIiwiaW5wdXQiLCJ0eXBlIiwib25DaGFuZ2UiLCJvbktleVByZXNzIiwicGxhY2Vob2xkZXIiLCJkaXNhYmxlZCIsImgzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/roleplay/page.tsx\n"));
./NewUI/.next/static/webpack/app/roleplay/page.db92dda9750785f0.hot-update.js:eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/image */ \"(app-pages-browser)/./node_modules/next/dist/api/image.js\");\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/./node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var _server_firebase__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../server/firebase */ \"(app-pages-browser)/./server/firebase.js\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! firebase/auth */ \"(app-pages-browser)/./node_modules/firebase/auth/dist/esm/index.esm.js\");\n/* harmony import */ var _services_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/services/api */ \"(app-pages-browser)/./src/services/api.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\nconst RoleplayPage = ()=>{\n    _s();\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [showProfileMenu, setShowProfileMenu] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [userLanguage, setUserLanguage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('en');\n    const [inputText, setInputText] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [scenario, setScenario] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isPlaying, setIsPlaying] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [showModal, setShowModal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isRecording, setIsRecording] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [suggestionList, setSuggestionList] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const profileMenuRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const messagesEndRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const audioRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const router = (0,next_navigation__WEBPACK_IMPORTED_MODULE_3__.useRouter)();\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"RoleplayPage.useEffect\": ()=>{\n            scrollToBottom();\n        }\n    }[\"RoleplayPage.useEffect\"], [\n        messages\n    ]);\n    const scrollToBottom = ()=>{\n        var _messagesEndRef_current;\n        (_messagesEndRef_current = messagesEndRef.current) === null || _messagesEndRef_current === void 0 ? void 0 : _messagesEndRef_current.scrollIntoView({\n            behavior: \"smooth\"\n        });\n    };\n    const initializeConversation = async (username)=>{\n        try {\n            // Call backend to set scenario & get response\n            const scenarioResponse = await setScenario(username);\n            // Fetch initial response from backend\n            const response = await fetch(\"/api/get_scenario_response\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    username\n                })\n            });\n            const data = await response.json();\n            console.log(\"ðŸ¤– LLM Response:\", data.response);\n            // Set initial message from backend\n            setMessages([\n                {\n                    text: data.response,\n                    sender: \"bot\"\n                }\n            ]);\n            // Fetch initial suggestions\n            fetchSuggestions(username);\n        } catch (error) {\n            console.error(\"Error initializing conversation:\", error);\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"RoleplayPage.useEffect\": ()=>{\n            setLoading(true);\n            const fetchUserAndScenario = {\n                \"RoleplayPage.useEffect.fetchUserAndScenario\": async ()=>{\n                    try {\n                        // Load scenario from localStorage\n                        const savedScenario = localStorage.getItem(\"currentScenario\");\n                        if (!savedScenario) {\n                            alert(\"No scenario selected. Please select a scenario first.\");\n                            router.push(\"/scenario\");\n                            return;\n                        }\n                        const parsedScenario = JSON.parse(savedScenario);\n                        setScenario(parsedScenario);\n                        // Authenticate user\n                        const unsubscribe = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_5__.onAuthStateChanged)(_server_firebase__WEBPACK_IMPORTED_MODULE_4__.auth, {\n                            \"RoleplayPage.useEffect.fetchUserAndScenario.unsubscribe\": async (currentUser)=>{\n                                setUser(currentUser);\n                                // Get language preference (from localStorage or backend)\n                                const savedLocale = localStorage.getItem(\"locale\") || \"en\";\n                                setUserLanguage(savedLocale);\n                                if (currentUser) {\n                                    var _currentUser_email;\n                                    const username = currentUser.displayName || ((_currentUser_email = currentUser.email) === null || _currentUser_email === void 0 ? void 0 : _currentUser_email.split(\"@\")[0]) || \"Guest\";\n                                    console.log(\"ðŸ‘¤ User authenticated:\", username);\n                                    // Initialize conversation (calls backend for scenario & LLM response)\n                                    await initializeConversation(username);\n                                }\n                                setLoading(false);\n                            }\n                        }[\"RoleplayPage.useEffect.fetchUserAndScenario.unsubscribe\"]);\n                        return ({\n                            \"RoleplayPage.useEffect.fetchUserAndScenario\": ()=>unsubscribe()\n                        })[\"RoleplayPage.useEffect.fetchUserAndScenario\"];\n                    } catch (error) {\n                        console.error(\"Error loading user scenario:\", error);\n                        alert(\"There was a problem loading the scenario. Please try again.\");\n                        router.push(\"/scenario\");\n                    }\n                }\n            }[\"RoleplayPage.useEffect.fetchUserAndScenario\"];\n            fetchUserAndScenario();\n        }\n    }[\"RoleplayPage.useEffect\"], []);\n    // // Initialize scenario conversation with backend\n    // const initializeConversation = async (username: string, scenarioTitle: string) => {\n    //   try {\n    //     const scenarioResponse = await setScenario(username, scenarioTitle);\n    //     fetchSuggestions(username); // Initial suggestions\n    //   } catch (error) {\n    //     console.error(\"Error initializing conversation:\", error);\n    //   }\n    // };\n    // useEffect(() => {\n    //   // Load the scenario from localStorage\n    //   const savedScenario = localStorage.getItem('currentScenario');\n    //   if (!savedScenario) {\n    //     // If no scenario is found, redirect back to scenario selection\n    //     alert(\"No scenario selected. Please select a scenario first.\");\n    //     router.push('/scenario');\n    //     return;\n    //   }\n    //   try {\n    //     const parsedScenario = JSON.parse(savedScenario);\n    //     setScenario(parsedScenario);\n    //     const unsubscribe = onAuthStateChanged(auth, async (currentUser) => {\n    //       setUser(currentUser);\n    //       const savedLocale = localStorage.getItem('locale') || 'en';\n    //       setUserLanguage(savedLocale);\n    //       if (currentUser) {\n    //         const username = currentUser.displayName || currentUser.email?.split('@')[0] || 'Guest';\n    //         await initializeConversation(username, parsedScenario.title);\n    //         setMessages([\n    //           { \n    //             text: `Hello${currentUser.displayName ? ', ' + currentUser.displayName : ''}! I'll be your conversation partner for this ${parsedScenario.title} scenario. How can I help you today?`, \n    //             sender: 'bot' \n    //           }\n    //         ]);\n    //       } else {\n    //         setMessages([\n    //           { \n    //             text: `Welcome to the ${parsedScenario.title} scenario! I'll be your conversation partner. How would you like to start?`, \n    //             sender: 'bot' \n    //           }\n    //         ]);\n    //       }\n    //       setLoading(false);\n    //     });\n    //     return () => unsubscribe();\n    //   } catch (error) {\n    //     console.error(\"Error parsing scenario:\", error);\n    //     alert(\"There was a problem loading the scenario. Please try again.\");\n    //     router.push('/scenario');\n    //   }\n    // }, []);\n    // Fetch updated conversation suggestions from backend\n    const fetchSuggestions = async (username)=>{\n        try {\n            const response = await (0,_services_api__WEBPACK_IMPORTED_MODULE_6__.getSuggestions)(username);\n            if (response && response.data && !response.error) {\n                setSuggestionList(response.data.suggestions);\n            } else if (response && response.error) {\n                console.error(\"Error fetching suggestions:\", response.error);\n            }\n        } catch (error) {\n            console.error(\"Error fetching suggestions:\", error);\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"RoleplayPage.useEffect\": ()=>{\n            function handleClickOutside(event) {\n                if (profileMenuRef.current && !profileMenuRef.current.contains(event.target)) {\n                    setShowProfileMenu(false);\n                }\n            }\n            document.addEventListener(\"mousedown\", handleClickOutside);\n            return ({\n                \"RoleplayPage.useEffect\": ()=>document.removeEventListener(\"mousedown\", handleClickOutside)\n            })[\"RoleplayPage.useEffect\"];\n        }\n    }[\"RoleplayPage.useEffect\"], []);\n    const handleBackClick = ()=>{\n        router.push('/scenario');\n    };\n    const navigateToDashboard = ()=>{\n        router.push('/dashboard');\n        setShowProfileMenu(false);\n    };\n    const handleInputChange = (event)=>{\n        setInputText(event.target.value);\n    };\n    const handleKeyPress = (event)=>{\n        if (event.key === 'Enter') {\n            handleSendMessage();\n        }\n    };\n    // Play audio when speaker button is clicked\n    const playMessageAudio = (messageId, audioUrl)=>{\n        if (!audioUrl) return;\n        // Stop any currently playing audio\n        if (audioRef.current) {\n            audioRef.current.pause();\n            audioRef.current.currentTime = 0;\n            setIsPlaying(null);\n        }\n        // If clicking on the currently playing audio, just stop it\n        if (isPlaying === \"message-\".concat(messageId)) {\n            setIsPlaying(null);\n            return;\n        }\n        // Create and play new audio\n        const audio = new Audio(\"http://localhost:8000\".concat(audioUrl));\n        audioRef.current = audio;\n        // Set the currently playing message ID\n        setIsPlaying(\"message-\".concat(messageId));\n        // When audio ends, reset the playing state\n        audio.addEventListener('ended', ()=>{\n            setIsPlaying(null);\n        });\n        audio.play().catch((e)=>{\n            console.error(\"Audio playback error:\", e);\n            setIsPlaying(null);\n        });\n    };\n    const handleSendMessage = async ()=>{\n        if (!inputText.trim() || !scenario) return;\n        const userMessage = inputText.trim();\n        setMessages((prev)=>[\n                ...prev,\n                {\n                    text: userMessage,\n                    sender: 'user'\n                }\n            ]);\n        setInputText('');\n        setIsLoading(true);\n        try {\n            var _user_email;\n            const username = user ? user.displayName || ((_user_email = user.email) === null || _user_email === void 0 ? void 0 : _user_email.split('@')[0]) || 'Guest' : 'Guest';\n            const response = await (0,_services_api__WEBPACK_IMPORTED_MODULE_6__.sendChatMessage)(username, userMessage, scenario.title, undefined, userLanguage);\n            if (response && response.error) {\n                throw new Error(response.error);\n            }\n            if (response && response.data) {\n                setMessages((prev)=>[\n                        ...prev,\n                        {\n                            text: response.data.response,\n                            sender: 'bot',\n                            audio_url: response.data.audio_url\n                        }\n                    ]);\n                if (response.data.audio_url) {\n                    // Click the speaker button to play message audio\n                    playMessageAudio(messages.length, response.data.audio_url);\n                }\n            }\n            // Fetch updated suggestions after message\n            await fetchSuggestions(username);\n        } catch (error) {\n            console.error('Error sending message:', error);\n            setMessages((prev)=>[\n                    ...prev,\n                    {\n                        text: \"Sorry, I'm having trouble connecting. Please try again.\",\n                        sender: 'bot'\n                    }\n                ]);\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    const handleEndScenario = ()=>{\n        setShowModal(true);\n    };\n    const handleSaveConversation = async ()=>{\n        try {\n            var _user_email;\n            if (!scenario) return;\n            const scenarioType = scenario.title.toLowerCase().replace(/\\s+/g, '_');\n            const savedConversations = JSON.parse(localStorage.getItem(scenarioType) || '[]');\n            savedConversations.push({\n                id: Date.now(),\n                date: new Date().toISOString(),\n                scenario: scenario.title,\n                messages: messages,\n                userName: user ? user.displayName || ((_user_email = user.email) === null || _user_email === void 0 ? void 0 : _user_email.split('@')[0]) || 'Guest' : 'Guest',\n                language: userLanguage\n            });\n            localStorage.setItem(scenarioType, JSON.stringify(savedConversations));\n            router.push('/text');\n        } catch (error) {\n            console.error(\"Error saving conversation:\", error);\n            router.push('/text');\n        }\n    };\n    const handleDiscardConversation = ()=>{\n        router.push('/text');\n    };\n    // Apply suggestion to input\n    const handleSuggestionClick = (suggestion)=>{\n        setInputText(suggestion);\n    };\n    // Toggle voice recording (placeholder)\n    const toggleRecording = ()=>{\n        setIsRecording(!isRecording);\n    // Add actual recording logic here\n    };\n    if (loading) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"min-h-screen flex items-center justify-center\",\n            style: {\n                backgroundImage: \"url('/icons/background1.jpg')\",\n                backgroundSize: \"cover\"\n            },\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#48d1cc]\"\n            }, void 0, false, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 362,\n                columnNumber: 9\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n            lineNumber: 360,\n            columnNumber: 7\n        }, undefined);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"min-h-screen bg-gray-900 text-white relative\",\n        style: {\n            backgroundImage: \"url('/icons/background1.jpg')\"\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute top-8 left-8 z-10\",\n                ref: profileMenuRef,\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>setShowProfileMenu(!showProfileMenu),\n                        className: \"w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 transition-colors duration-200 flex items-center justify-center overflow-hidden\",\n                        children: (user === null || user === void 0 ? void 0 : user.photoURL) ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                            src: user.photoURL,\n                            alt: \"Profile\",\n                            width: 40,\n                            height: 40,\n                            className: \"object-cover\"\n                        }, void 0, false, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 377,\n                            columnNumber: 13\n                        }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"w-full h-full bg-[#48d1cc] flex items-center justify-center text-white font-semibold text-sm\",\n                            children: (user === null || user === void 0 ? void 0 : user.displayName) ? user.displayName.charAt(0).toUpperCase() : (user === null || user === void 0 ? void 0 : user.email) ? user.email.charAt(0).toUpperCase() : \"G\"\n                        }, void 0, false, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 385,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                        lineNumber: 372,\n                        columnNumber: 9\n                    }, undefined),\n                    showProfileMenu && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"absolute top-12 left-0 bg-white rounded-lg shadow-lg py-2 min-w-[180px] text-gray-800 z-20\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"px-4 py-2 border-b border-gray-200\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        className: \"font-medium\",\n                                        children: (user === null || user === void 0 ? void 0 : user.displayName) || \"Guest\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 395,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    (user === null || user === void 0 ? void 0 : user.email) && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        className: \"text-xs text-gray-500\",\n                                        children: user.email\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 397,\n                                        columnNumber: 17\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                lineNumber: 394,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"px-4 py-2 border-b border-gray-200\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-xs text-gray-500\",\n                                    children: [\n                                        \"Language: \",\n                                        userLanguage === 'en' ? 'English' : userLanguage === 'zh-CN' ? 'Chinese' : 'Japanese'\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                    lineNumber: 401,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                lineNumber: 400,\n                                columnNumber: 13\n                            }, undefined),\n                            user ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: navigateToDashboard,\n                                className: \"w-full text-left px-4 py-2 hover:bg-gray-100 transition-colors flex items-center\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        className: \"w-4 h-4 mr-2\",\n                                        fill: \"none\",\n                                        stroke: \"currentColor\",\n                                        viewBox: \"0 0 24 24\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\",\n                                            strokeWidth: \"2\",\n                                            d: \"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 409,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 408,\n                                        columnNumber: 17\n                                    }, undefined),\n                                    \"Profile Dashboard\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                lineNumber: 404,\n                                columnNumber: 15\n                            }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>router.push('/login'),\n                                className: \"w-full text-left px-4 py-2 hover:bg-gray-100 transition-colors flex items-center\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        className: \"w-4 h-4 mr-2\",\n                                        fill: \"none\",\n                                        stroke: \"currentColor\",\n                                        viewBox: \"0 0 24 24\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\",\n                                            strokeWidth: \"2\",\n                                            d: \"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 419,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 418,\n                                        columnNumber: 17\n                                    }, undefined),\n                                    \"Sign In\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                lineNumber: 414,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                        lineNumber: 393,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 371,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: handleBackClick,\n                className: \"absolute top-8 left-24 w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 transition-colors duration-200 flex items-center justify-center\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                    src: \"/icons/back.png\",\n                    alt: \"Back\",\n                    width: 24,\n                    height: 24,\n                    className: \"text-white\"\n                }, void 0, false, {\n                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                    lineNumber: 432,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 428,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: handleEndScenario,\n                className: \"absolute top-8 right-8 bg-[#20b2aa] hover:bg-[#008080] px-6 py-2 rounded-lg transition-colors duration-200\",\n                children: \"End Scenario\"\n            }, void 0, false, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 441,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"pt-24 px-4 max-w-6xl mx-auto\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex gap-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"w-[65%]\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"h-[70vh] bg-[#f0f8ff] rounded-xl p-6 overflow-y-auto mb-4\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex flex-col space-y-4\",\n                                        children: [\n                                            messages.map((message, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex \".concat(message.sender === 'user' ? 'justify-end' : 'justify-start'),\n                                                    children: [\n                                                        message.sender === 'bot' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"w-8 h-8 mr-2 flex-shrink-0 rounded-full overflow-hidden\",\n                                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                                                src: \"/icons/robot.jpg\",\n                                                                alt: \"Robot\",\n                                                                width: 32,\n                                                                height: 32,\n                                                                className: \"object-cover\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                lineNumber: 461,\n                                                                columnNumber: 25\n                                                            }, undefined)\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 460,\n                                                            columnNumber: 23\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"max-w-sm rounded-lg px-4 py-2 \".concat(message.sender === 'user' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-800', \" group relative\"),\n                                                            children: [\n                                                                message.text,\n                                                                message.sender === 'bot' && message.audio_url && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                                    onClick: ()=>playMessageAudio(index, message.audio_url),\n                                                                    className: \"absolute -right-10 top-1/2 transform -translate-y-1/2 w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200 transition-colors\",\n                                                                    \"aria-label\": \"Play message audio\",\n                                                                    children: isPlaying === \"message-\".concat(index) ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                        className: \"animate-pulse\",\n                                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                                                            src: \"/icons/speaker.jpg\",\n                                                                            alt: \"Speaker\",\n                                                                            width: 24,\n                                                                            height: 24\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                            lineNumber: 488,\n                                                                            columnNumber: 31\n                                                                        }, undefined)\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                        lineNumber: 487,\n                                                                        columnNumber: 29\n                                                                    }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                                                        src: \"/icons/speaker.jpg\",\n                                                                        alt: \"Speaker\",\n                                                                        width: 24,\n                                                                        height: 24\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                        lineNumber: 491,\n                                                                        columnNumber: 29\n                                                                    }, undefined)\n                                                                }, void 0, false, {\n                                                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                    lineNumber: 481,\n                                                                    columnNumber: 25\n                                                                }, undefined)\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 470,\n                                                            columnNumber: 21\n                                                        }, undefined),\n                                                        message.sender === 'user' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"w-8 h-8 ml-2 flex-shrink-0 rounded-full overflow-hidden bg-blue-100 flex items-center justify-center\",\n                                                            children: (user === null || user === void 0 ? void 0 : user.photoURL) ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                                                src: user.photoURL,\n                                                                alt: \"User\",\n                                                                width: 32,\n                                                                height: 32,\n                                                                className: \"object-cover\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                lineNumber: 499,\n                                                                columnNumber: 27\n                                                            }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"w-full h-full bg-[#48d1cc] flex items-center justify-center text-white font-semibold text-xs\",\n                                                                children: (user === null || user === void 0 ? void 0 : user.displayName) ? user.displayName.charAt(0).toUpperCase() : (user === null || user === void 0 ? void 0 : user.email) ? user.email.charAt(0).toUpperCase() : \"U\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                lineNumber: 507,\n                                                                columnNumber: 27\n                                                            }, undefined)\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 497,\n                                                            columnNumber: 23\n                                                        }, undefined)\n                                                    ]\n                                                }, index, true, {\n                                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                    lineNumber: 455,\n                                                    columnNumber: 19\n                                                }, undefined)),\n                                            isLoading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex justify-start\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex items-center space-x-2 bg-gray-100 rounded-lg px-4 py-2\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",\n                                                            style: {\n                                                                animationDelay: '0s'\n                                                            }\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 519,\n                                                            columnNumber: 23\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",\n                                                            style: {\n                                                                animationDelay: '0.2s'\n                                                            }\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 520,\n                                                            columnNumber: 23\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",\n                                                            style: {\n                                                                animationDelay: '0.4s'\n                                                            }\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 521,\n                                                            columnNumber: 23\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                    lineNumber: 518,\n                                                    columnNumber: 21\n                                                }, undefined)\n                                            }, void 0, false, {\n                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                lineNumber: 517,\n                                                columnNumber: 19\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                ref: messagesEndRef\n                                            }, void 0, false, {\n                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                lineNumber: 525,\n                                                columnNumber: 17\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 453,\n                                        columnNumber: 15\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                    lineNumber: 452,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex gap-2\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: toggleRecording,\n                                            className: \"\".concat(isRecording ? 'bg-red-500 hover:bg-red-600' : 'bg-gray-200 hover:bg-gray-300', \" px-3 py-3 rounded-lg transition-colors duration-200 flex items-center justify-center relative\"),\n                                            \"aria-label\": \"Start voice recording\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                    xmlns: \"http://www.w3.org/2000/svg\",\n                                                    className: \"h-6 w-6\",\n                                                    fill: \"none\",\n                                                    viewBox: \"0 0 24 24\",\n                                                    stroke: isRecording ? \"white\" : \"black\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                        strokeLinecap: \"round\",\n                                                        strokeLinejoin: \"round\",\n                                                        strokeWidth: 2,\n                                                        d: \"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                        lineNumber: 540,\n                                                        columnNumber: 19\n                                                    }, undefined)\n                                                }, void 0, false, {\n                                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                    lineNumber: 539,\n                                                    columnNumber: 17\n                                                }, undefined),\n                                                isRecording && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"absolute top-0 right-0 flex h-3 w-3\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 544,\n                                                            columnNumber: 21\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"relative inline-flex rounded-full h-3 w-3 bg-red-500\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 545,\n                                                            columnNumber: 21\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                    lineNumber: 543,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 530,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                            type: \"text\",\n                                            value: inputText,\n                                            onChange: handleInputChange,\n                                            onKeyPress: handleKeyPress,\n                                            placeholder: isRecording ? \"Listening...\" : \"Type your message...\",\n                                            className: \"flex-1 bg-white text-black px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 \".concat(isRecording ? 'animate-pulse border-2 border-red-400' : ''),\n                                            disabled: isRecording || isLoading\n                                        }, void 0, false, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 550,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: handleSendMessage,\n                                            disabled: isRecording || isLoading || !inputText.trim(),\n                                            className: \"bg-[#20b2aa] hover:bg-[#008080] px-4 py-2 rounded-lg transition-colors duration-200 flex items-center justify-center disabled:opacity-50\",\n                                            children: isLoading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                lineNumber: 568,\n                                                columnNumber: 19\n                                            }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                                src: \"/icons/send.png\",\n                                                alt: \"Send\",\n                                                width: 24,\n                                                height: 24\n                                            }, void 0, false, {\n                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                lineNumber: 570,\n                                                columnNumber: 19\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 562,\n                                            columnNumber: 15\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                    lineNumber: 529,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 451,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"w-[35%]\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"h-[70vh] bg-[#f0f8ff] rounded-xl p-6 overflow-y-auto mb-4\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                        className: \"text-lg font-semibold text-gray-800 mb-3\",\n                                        children: \"Suggested Responses\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 580,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    suggestionList.length > 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"space-y-3\",\n                                        children: suggestionList.map((suggestion, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                className: \"w-full bg-white rounded-lg p-3 shadow-sm hover:bg-gray-50 transition-colors text-left flex items-center\",\n                                                onClick: ()=>handleSuggestionClick(suggestion),\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"flex-shrink-0 w-6 h-6 bg-[#20b2aa] rounded-full flex items-center justify-center text-white text-xs mr-3\",\n                                                        children: index + 1\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                        lineNumber: 590,\n                                                        columnNumber: 23\n                                                    }, undefined),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                        className: \"text-gray-700\",\n                                                        children: suggestion\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                        lineNumber: 593,\n                                                        columnNumber: 23\n                                                    }, undefined)\n                                                ]\n                                            }, index, true, {\n                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                lineNumber: 585,\n                                                columnNumber: 21\n                                            }, undefined))\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 583,\n                                        columnNumber: 17\n                                    }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"bg-gray-50 rounded-lg p-4 text-center\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                            className: \"text-gray-500\",\n                                            children: \"Suggestions will appear here after you start chatting.\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 599,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 598,\n                                        columnNumber: 17\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                lineNumber: 578,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 577,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                    lineNumber: 449,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 448,\n                columnNumber: 7\n            }, undefined),\n            showModal && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"fixed inset-0 bg-black/70 flex items-center justify-center z-50\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"bg-white rounded-xl p-6 max-w-md w-full mx-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                            className: \"text-xl font-bold text-gray-800 mb-4\",\n                            children: \"End Scenario\"\n                        }, void 0, false, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 610,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-gray-600 mb-6\",\n                            children: \"Your practice session will be closed. Do you want to save this conversation to your profile?\"\n                        }, void 0, false, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 611,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex gap-4 justify-end\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: handleDiscardConversation,\n                                    className: \"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg transition-colors\",\n                                    children: \"Don't Save\"\n                                }, void 0, false, {\n                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                    lineNumber: 614,\n                                    columnNumber: 15\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: handleSaveConversation,\n                                    className: \"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors\",\n                                    children: \"Save\"\n                                }, void 0, false, {\n                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                    lineNumber: 620,\n                                    columnNumber: 15\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 613,\n                            columnNumber: 13\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                    lineNumber: 609,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 608,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n        lineNumber: 368,\n        columnNumber: 5\n    }, undefined);\n};\n_s(RoleplayPage, \"fANFO5dSlYyXonWO2Eh02d0WKSk=\", false, function() {\n    return [\n        next_navigation__WEBPACK_IMPORTED_MODULE_3__.useRouter\n    ];\n});\n_c = RoleplayPage;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RoleplayPage);\nvar _c;\n$RefreshReg$(_c, \"RoleplayPage\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvcm9sZXBsYXkvcGFnZS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFDMkQ7QUFDNUI7QUFDYTtBQUNJO0FBQ1M7QUFDcUI7QUFnQjlFLE1BQU1VLGVBQWU7O0lBQ25CLE1BQU0sQ0FBQ0MsTUFBTUMsUUFBUSxHQUFHWCwrQ0FBUUEsQ0FBYztJQUM5QyxNQUFNLENBQUNZLFNBQVNDLFdBQVcsR0FBR2IsK0NBQVFBLENBQUM7SUFDdkMsTUFBTSxDQUFDYyxpQkFBaUJDLG1CQUFtQixHQUFHZiwrQ0FBUUEsQ0FBQztJQUN2RCxNQUFNLENBQUNnQixjQUFjQyxnQkFBZ0IsR0FBR2pCLCtDQUFRQSxDQUFTO0lBQ3pELE1BQU0sQ0FBQ2tCLFdBQVdDLGFBQWEsR0FBR25CLCtDQUFRQSxDQUFDO0lBQzNDLE1BQU0sQ0FBQ29CLFVBQVVDLFlBQVksR0FBR3JCLCtDQUFRQSxDQUFZLEVBQUU7SUFDdEQsTUFBTSxDQUFDc0IsV0FBV0MsYUFBYSxHQUFHdkIsK0NBQVFBLENBQUM7SUFDM0MsTUFBTSxDQUFDd0IsVUFBVUMsWUFBWSxHQUFHekIsK0NBQVFBLENBQWtCO0lBQzFELE1BQU0sQ0FBQzBCLFdBQVdDLGFBQWEsR0FBRzNCLCtDQUFRQSxDQUFnQjtJQUMxRCxNQUFNLENBQUM0QixXQUFXQyxhQUFhLEdBQUc3QiwrQ0FBUUEsQ0FBQztJQUMzQyxNQUFNLENBQUM4QixhQUFhQyxlQUFlLEdBQUcvQiwrQ0FBUUEsQ0FBQztJQUMvQyxNQUFNLENBQUNnQyxnQkFBZ0JDLGtCQUFrQixHQUFHakMsK0NBQVFBLENBQVcsRUFBRTtJQUVqRSxNQUFNa0MsaUJBQWlCaEMsNkNBQU1BLENBQWlCO0lBQzlDLE1BQU1pQyxpQkFBaUJqQyw2Q0FBTUEsQ0FBaUI7SUFDOUMsTUFBTWtDLFdBQVdsQyw2Q0FBTUEsQ0FBMEI7SUFDakQsTUFBTW1DLFNBQVNqQywwREFBU0E7SUFFeEJILGdEQUFTQTtrQ0FBQztZQUNScUM7UUFD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UzIzOV9uZXcvTmV3VUkrQmFja2VuZC9OZXdVSS9zcmMvYXBwL3JvbGVwbGF5L3BhZ2UudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiXG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IEltYWdlIGZyb20gJ25leHQvaW1hZ2UnO1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAnbmV4dC9uYXZpZ2F0aW9uJztcbmltcG9ydCB7IGF1dGggfSBmcm9tIFwiLi4vLi4vLi4vc2VydmVyL2ZpcmViYXNlXCI7XG5pbXBvcnQgeyBvbkF1dGhTdGF0ZUNoYW5nZWQsIFVzZXIgfSBmcm9tIFwiZmlyZWJhc2UvYXV0aFwiO1xuaW1wb3J0IHsgc2VuZENoYXRNZXNzYWdlLCBnZXRTdWdnZXN0aW9ucywgc2V0U2NlbmFyaW8gfSBmcm9tICdAL3NlcnZpY2VzL2FwaSc7XG5cbmludGVyZmFjZSBTY2VuYXJpbyB7XG4gIGlkOiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgY3VzdG9tOiBib29sZWFuO1xufVxuXG5pbnRlcmZhY2UgTWVzc2FnZSB7XG4gIHRleHQ6IHN0cmluZztcbiAgc2VuZGVyOiAndXNlcicgfCAnYm90JztcbiAgYXVkaW9fdXJsPzogc3RyaW5nO1xufVxuXG5jb25zdCBSb2xlcGxheVBhZ2UgPSAoKSA9PiB7XG4gIGNvbnN0IFt1c2VyLCBzZXRVc2VyXSA9IHVzZVN0YXRlPFVzZXIgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtzaG93UHJvZmlsZU1lbnUsIHNldFNob3dQcm9maWxlTWVudV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFt1c2VyTGFuZ3VhZ2UsIHNldFVzZXJMYW5ndWFnZV0gPSB1c2VTdGF0ZTxzdHJpbmc+KCdlbicpO1xuICBjb25zdCBbaW5wdXRUZXh0LCBzZXRJbnB1dFRleHRdID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbbWVzc2FnZXMsIHNldE1lc3NhZ2VzXSA9IHVzZVN0YXRlPE1lc3NhZ2VbXT4oW10pO1xuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2NlbmFyaW8sIHNldFNjZW5hcmlvXSA9IHVzZVN0YXRlPFNjZW5hcmlvIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpc1BsYXlpbmcsIHNldElzUGxheWluZ10gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW3Nob3dNb2RhbCwgc2V0U2hvd01vZGFsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lzUmVjb3JkaW5nLCBzZXRJc1JlY29yZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzdWdnZXN0aW9uTGlzdCwgc2V0U3VnZ2VzdGlvbkxpc3RdID0gdXNlU3RhdGU8c3RyaW5nW10+KFtdKTtcbiAgXG4gIGNvbnN0IHByb2ZpbGVNZW51UmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgbWVzc2FnZXNFbmRSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xuICBjb25zdCBhdWRpb1JlZiA9IHVzZVJlZjxIVE1MQXVkaW9FbGVtZW50IHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2Nyb2xsVG9Cb3R0b20oKTtcbiAgfSwgW21lc3NhZ2VzXSk7XG4gIFxuICBjb25zdCBzY3JvbGxUb0JvdHRvbSA9ICgpID0+IHtcbiAgICBtZXNzYWdlc0VuZFJlZi5jdXJyZW50Py5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiBcInNtb290aFwiIH0pO1xuICB9O1xuICBjb25zdCBpbml0aWFsaXplQ29udmVyc2F0aW9uID0gYXN5bmMgKHVzZXJuYW1lOiBzdHJpbmcpID0+IHtcbiAgICB0cnkge1xuICAgICAgLy8gQ2FsbCBiYWNrZW5kIHRvIHNldCBzY2VuYXJpbyAmIGdldCByZXNwb25zZVxuICAgICAgY29uc3Qgc2NlbmFyaW9SZXNwb25zZSA9IGF3YWl0IHNldFNjZW5hcmlvKHVzZXJuYW1lKTtcbiAgICAgIFxuICAgICAgLy8gRmV0Y2ggaW5pdGlhbCByZXNwb25zZSBmcm9tIGJhY2tlbmRcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXCIvYXBpL2dldF9zY2VuYXJpb19yZXNwb25zZVwiLCB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyB1c2VybmFtZSB9KSxcbiAgICAgIH0pO1xuICBcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBjb25zb2xlLmxvZyhcIvCfpJYgTExNIFJlc3BvbnNlOlwiLCBkYXRhLnJlc3BvbnNlKTtcbiAgXG4gICAgICAvLyBTZXQgaW5pdGlhbCBtZXNzYWdlIGZyb20gYmFja2VuZFxuICAgICAgc2V0TWVzc2FnZXMoW3sgdGV4dDogZGF0YS5yZXNwb25zZSwgc2VuZGVyOiBcImJvdFwiIH1dKTtcbiAgXG4gICAgICAvLyBGZXRjaCBpbml0aWFsIHN1Z2dlc3Rpb25zXG4gICAgICBmZXRjaFN1Z2dlc3Rpb25zKHVzZXJuYW1lKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluaXRpYWxpemluZyBjb252ZXJzYXRpb246XCIsIGVycm9yKTtcbiAgICB9XG4gIH07XG4gIFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldExvYWRpbmcodHJ1ZSk7XG4gIFxuICAgIGNvbnN0IGZldGNoVXNlckFuZFNjZW5hcmlvID0gYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gTG9hZCBzY2VuYXJpbyBmcm9tIGxvY2FsU3RvcmFnZVxuICAgICAgICBjb25zdCBzYXZlZFNjZW5hcmlvID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJjdXJyZW50U2NlbmFyaW9cIik7XG4gIFxuICAgICAgICBpZiAoIXNhdmVkU2NlbmFyaW8pIHtcbiAgICAgICAgICBhbGVydChcIk5vIHNjZW5hcmlvIHNlbGVjdGVkLiBQbGVhc2Ugc2VsZWN0IGEgc2NlbmFyaW8gZmlyc3QuXCIpO1xuICAgICAgICAgIHJvdXRlci5wdXNoKFwiL3NjZW5hcmlvXCIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICBcbiAgICAgICAgY29uc3QgcGFyc2VkU2NlbmFyaW8gPSBKU09OLnBhcnNlKHNhdmVkU2NlbmFyaW8pO1xuICAgICAgICBzZXRTY2VuYXJpbyhwYXJzZWRTY2VuYXJpbyk7XG4gIFxuICAgICAgICAvLyBBdXRoZW50aWNhdGUgdXNlclxuICAgICAgICBjb25zdCB1bnN1YnNjcmliZSA9IG9uQXV0aFN0YXRlQ2hhbmdlZChhdXRoLCBhc3luYyAoY3VycmVudFVzZXIpID0+IHtcbiAgICAgICAgICBzZXRVc2VyKGN1cnJlbnRVc2VyKTtcbiAgXG4gICAgICAgICAgLy8gR2V0IGxhbmd1YWdlIHByZWZlcmVuY2UgKGZyb20gbG9jYWxTdG9yYWdlIG9yIGJhY2tlbmQpXG4gICAgICAgICAgY29uc3Qgc2F2ZWRMb2NhbGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImxvY2FsZVwiKSB8fCBcImVuXCI7XG4gICAgICAgICAgc2V0VXNlckxhbmd1YWdlKHNhdmVkTG9jYWxlKTtcbiAgXG4gICAgICAgICAgaWYgKGN1cnJlbnRVc2VyKSB7XG4gICAgICAgICAgICBjb25zdCB1c2VybmFtZSA9XG4gICAgICAgICAgICAgIGN1cnJlbnRVc2VyLmRpc3BsYXlOYW1lIHx8XG4gICAgICAgICAgICAgIGN1cnJlbnRVc2VyLmVtYWlsPy5zcGxpdChcIkBcIilbMF0gfHxcbiAgICAgICAgICAgICAgXCJHdWVzdFwiO1xuICBcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi8J+RpCBVc2VyIGF1dGhlbnRpY2F0ZWQ6XCIsIHVzZXJuYW1lKTtcbiAgXG4gICAgICAgICAgICAvLyBJbml0aWFsaXplIGNvbnZlcnNhdGlvbiAoY2FsbHMgYmFja2VuZCBmb3Igc2NlbmFyaW8gJiBMTE0gcmVzcG9uc2UpXG4gICAgICAgICAgICBhd2FpdCBpbml0aWFsaXplQ29udmVyc2F0aW9uKHVzZXJuYW1lKTtcbiAgICAgICAgICB9XG4gIFxuICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgICB9KTtcbiAgXG4gICAgICAgIHJldHVybiAoKSA9PiB1bnN1YnNjcmliZSgpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGxvYWRpbmcgdXNlciBzY2VuYXJpbzpcIiwgZXJyb3IpO1xuICAgICAgICBhbGVydChcIlRoZXJlIHdhcyBhIHByb2JsZW0gbG9hZGluZyB0aGUgc2NlbmFyaW8uIFBsZWFzZSB0cnkgYWdhaW4uXCIpO1xuICAgICAgICByb3V0ZXIucHVzaChcIi9zY2VuYXJpb1wiKTtcbiAgICAgIH1cbiAgICB9O1xuICBcbiAgICBmZXRjaFVzZXJBbmRTY2VuYXJpbygpO1xuICB9LCBbXSk7XG4gIFxuICAvLyAvLyBJbml0aWFsaXplIHNjZW5hcmlvIGNvbnZlcnNhdGlvbiB3aXRoIGJhY2tlbmRcbiAgLy8gY29uc3QgaW5pdGlhbGl6ZUNvbnZlcnNhdGlvbiA9IGFzeW5jICh1c2VybmFtZTogc3RyaW5nLCBzY2VuYXJpb1RpdGxlOiBzdHJpbmcpID0+IHtcbiAgLy8gICB0cnkge1xuICAvLyAgICAgY29uc3Qgc2NlbmFyaW9SZXNwb25zZSA9IGF3YWl0IHNldFNjZW5hcmlvKHVzZXJuYW1lLCBzY2VuYXJpb1RpdGxlKTtcbiAgLy8gICAgIGZldGNoU3VnZ2VzdGlvbnModXNlcm5hbWUpOyAvLyBJbml0aWFsIHN1Z2dlc3Rpb25zXG4gIC8vICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgLy8gICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbml0aWFsaXppbmcgY29udmVyc2F0aW9uOlwiLCBlcnJvcik7XG4gIC8vICAgfVxuICAvLyB9O1xuXG4gIC8vIHVzZUVmZmVjdCgoKSA9PiB7XG4gIC8vICAgLy8gTG9hZCB0aGUgc2NlbmFyaW8gZnJvbSBsb2NhbFN0b3JhZ2VcbiAgLy8gICBjb25zdCBzYXZlZFNjZW5hcmlvID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1cnJlbnRTY2VuYXJpbycpO1xuICAgIFxuICAvLyAgIGlmICghc2F2ZWRTY2VuYXJpbykge1xuICAvLyAgICAgLy8gSWYgbm8gc2NlbmFyaW8gaXMgZm91bmQsIHJlZGlyZWN0IGJhY2sgdG8gc2NlbmFyaW8gc2VsZWN0aW9uXG4gIC8vICAgICBhbGVydChcIk5vIHNjZW5hcmlvIHNlbGVjdGVkLiBQbGVhc2Ugc2VsZWN0IGEgc2NlbmFyaW8gZmlyc3QuXCIpO1xuICAvLyAgICAgcm91dGVyLnB1c2goJy9zY2VuYXJpbycpO1xuICAvLyAgICAgcmV0dXJuO1xuICAvLyAgIH1cbiAgICBcbiAgLy8gICB0cnkge1xuICAvLyAgICAgY29uc3QgcGFyc2VkU2NlbmFyaW8gPSBKU09OLnBhcnNlKHNhdmVkU2NlbmFyaW8pO1xuICAvLyAgICAgc2V0U2NlbmFyaW8ocGFyc2VkU2NlbmFyaW8pO1xuICAgICAgXG4gIC8vICAgICBjb25zdCB1bnN1YnNjcmliZSA9IG9uQXV0aFN0YXRlQ2hhbmdlZChhdXRoLCBhc3luYyAoY3VycmVudFVzZXIpID0+IHtcbiAgLy8gICAgICAgc2V0VXNlcihjdXJyZW50VXNlcik7XG4gICAgICAgIFxuICAvLyAgICAgICBjb25zdCBzYXZlZExvY2FsZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsb2NhbGUnKSB8fCAnZW4nO1xuICAvLyAgICAgICBzZXRVc2VyTGFuZ3VhZ2Uoc2F2ZWRMb2NhbGUpO1xuICAgICAgICBcbiAgLy8gICAgICAgaWYgKGN1cnJlbnRVc2VyKSB7XG4gIC8vICAgICAgICAgY29uc3QgdXNlcm5hbWUgPSBjdXJyZW50VXNlci5kaXNwbGF5TmFtZSB8fCBjdXJyZW50VXNlci5lbWFpbD8uc3BsaXQoJ0AnKVswXSB8fCAnR3Vlc3QnO1xuICAgICAgICAgIFxuICAvLyAgICAgICAgIGF3YWl0IGluaXRpYWxpemVDb252ZXJzYXRpb24odXNlcm5hbWUsIHBhcnNlZFNjZW5hcmlvLnRpdGxlKTtcbiAgLy8gICAgICAgICBzZXRNZXNzYWdlcyhbXG4gIC8vICAgICAgICAgICB7IFxuICAvLyAgICAgICAgICAgICB0ZXh0OiBgSGVsbG8ke2N1cnJlbnRVc2VyLmRpc3BsYXlOYW1lID8gJywgJyArIGN1cnJlbnRVc2VyLmRpc3BsYXlOYW1lIDogJyd9ISBJJ2xsIGJlIHlvdXIgY29udmVyc2F0aW9uIHBhcnRuZXIgZm9yIHRoaXMgJHtwYXJzZWRTY2VuYXJpby50aXRsZX0gc2NlbmFyaW8uIEhvdyBjYW4gSSBoZWxwIHlvdSB0b2RheT9gLCBcbiAgLy8gICAgICAgICAgICAgc2VuZGVyOiAnYm90JyBcbiAgLy8gICAgICAgICAgIH1cbiAgLy8gICAgICAgICBdKTtcbiAgLy8gICAgICAgfSBlbHNlIHtcbiAgLy8gICAgICAgICBzZXRNZXNzYWdlcyhbXG4gIC8vICAgICAgICAgICB7IFxuICAvLyAgICAgICAgICAgICB0ZXh0OiBgV2VsY29tZSB0byB0aGUgJHtwYXJzZWRTY2VuYXJpby50aXRsZX0gc2NlbmFyaW8hIEknbGwgYmUgeW91ciBjb252ZXJzYXRpb24gcGFydG5lci4gSG93IHdvdWxkIHlvdSBsaWtlIHRvIHN0YXJ0P2AsIFxuICAvLyAgICAgICAgICAgICBzZW5kZXI6ICdib3QnIFxuICAvLyAgICAgICAgICAgfVxuICAvLyAgICAgICAgIF0pO1xuICAvLyAgICAgICB9XG4gICAgICAgIFxuICAvLyAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgLy8gICAgIH0pO1xuICAgICAgXG4gIC8vICAgICByZXR1cm4gKCkgPT4gdW5zdWJzY3JpYmUoKTtcbiAgLy8gICB9IGNhdGNoIChlcnJvcikge1xuICAvLyAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHBhcnNpbmcgc2NlbmFyaW86XCIsIGVycm9yKTtcbiAgLy8gICAgIGFsZXJ0KFwiVGhlcmUgd2FzIGEgcHJvYmxlbSBsb2FkaW5nIHRoZSBzY2VuYXJpby4gUGxlYXNlIHRyeSBhZ2Fpbi5cIik7XG4gIC8vICAgICByb3V0ZXIucHVzaCgnL3NjZW5hcmlvJyk7XG4gIC8vICAgfVxuICAvLyB9LCBbXSk7XG5cbiAgLy8gRmV0Y2ggdXBkYXRlZCBjb252ZXJzYXRpb24gc3VnZ2VzdGlvbnMgZnJvbSBiYWNrZW5kXG4gIGNvbnN0IGZldGNoU3VnZ2VzdGlvbnMgPSBhc3luYyAodXNlcm5hbWU6IHN0cmluZykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldFN1Z2dlc3Rpb25zKHVzZXJuYW1lKTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmRhdGEgJiYgIXJlc3BvbnNlLmVycm9yKSB7XG4gICAgICAgIHNldFN1Z2dlc3Rpb25MaXN0KHJlc3BvbnNlLmRhdGEuc3VnZ2VzdGlvbnMpO1xuICAgICAgfSBlbHNlIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5lcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgc3VnZ2VzdGlvbnM6XCIsIHJlc3BvbnNlLmVycm9yKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHN1Z2dlc3Rpb25zOlwiLCBlcnJvcik7XG4gICAgfVxuICB9O1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZnVuY3Rpb24gaGFuZGxlQ2xpY2tPdXRzaWRlKGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gICAgICBpZiAocHJvZmlsZU1lbnVSZWYuY3VycmVudCAmJiAhcHJvZmlsZU1lbnVSZWYuY3VycmVudC5jb250YWlucyhldmVudC50YXJnZXQgYXMgTm9kZSkpIHtcbiAgICAgICAgc2V0U2hvd1Byb2ZpbGVNZW51KGZhbHNlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBoYW5kbGVDbGlja091dHNpZGUpO1xuICAgIHJldHVybiAoKSA9PiBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGhhbmRsZUNsaWNrT3V0c2lkZSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBoYW5kbGVCYWNrQ2xpY2sgPSAoKSA9PiB7XG4gICAgcm91dGVyLnB1c2goJy9zY2VuYXJpbycpO1xuICB9O1xuICBcbiAgY29uc3QgbmF2aWdhdGVUb0Rhc2hib2FyZCA9ICgpID0+IHtcbiAgICByb3V0ZXIucHVzaCgnL2Rhc2hib2FyZCcpO1xuICAgIHNldFNob3dQcm9maWxlTWVudShmYWxzZSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlSW5wdXRDaGFuZ2UgPSAoZXZlbnQ6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB7XG4gICAgc2V0SW5wdXRUZXh0KGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlS2V5UHJlc3MgPSAoZXZlbnQ6IFJlYWN0LktleWJvYXJkRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICBoYW5kbGVTZW5kTWVzc2FnZSgpO1xuICAgIH1cbiAgfTtcblxuICAvLyBQbGF5IGF1ZGlvIHdoZW4gc3BlYWtlciBidXR0b24gaXMgY2xpY2tlZFxuICBjb25zdCBwbGF5TWVzc2FnZUF1ZGlvID0gKG1lc3NhZ2VJZDogbnVtYmVyLCBhdWRpb1VybD86IHN0cmluZykgPT4ge1xuICAgIGlmICghYXVkaW9VcmwpIHJldHVybjtcbiAgICBcbiAgICAvLyBTdG9wIGFueSBjdXJyZW50bHkgcGxheWluZyBhdWRpb1xuICAgIGlmIChhdWRpb1JlZi5jdXJyZW50KSB7XG4gICAgICBhdWRpb1JlZi5jdXJyZW50LnBhdXNlKCk7XG4gICAgICBhdWRpb1JlZi5jdXJyZW50LmN1cnJlbnRUaW1lID0gMDtcbiAgICAgIHNldElzUGxheWluZyhudWxsKTtcbiAgICB9XG4gICAgXG4gICAgLy8gSWYgY2xpY2tpbmcgb24gdGhlIGN1cnJlbnRseSBwbGF5aW5nIGF1ZGlvLCBqdXN0IHN0b3AgaXRcbiAgICBpZiAoaXNQbGF5aW5nID09PSBgbWVzc2FnZS0ke21lc3NhZ2VJZH1gKSB7XG4gICAgICBzZXRJc1BsYXlpbmcobnVsbCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIENyZWF0ZSBhbmQgcGxheSBuZXcgYXVkaW9cbiAgICBjb25zdCBhdWRpbyA9IG5ldyBBdWRpbyhgaHR0cDovL2xvY2FsaG9zdDo4MDAwJHthdWRpb1VybH1gKTtcbiAgICBhdWRpb1JlZi5jdXJyZW50ID0gYXVkaW87XG4gICAgXG4gICAgLy8gU2V0IHRoZSBjdXJyZW50bHkgcGxheWluZyBtZXNzYWdlIElEXG4gICAgc2V0SXNQbGF5aW5nKGBtZXNzYWdlLSR7bWVzc2FnZUlkfWApO1xuICAgIFxuICAgIC8vIFdoZW4gYXVkaW8gZW5kcywgcmVzZXQgdGhlIHBsYXlpbmcgc3RhdGVcbiAgICBhdWRpby5hZGRFdmVudExpc3RlbmVyKCdlbmRlZCcsICgpID0+IHtcbiAgICAgIHNldElzUGxheWluZyhudWxsKTtcbiAgICB9KTtcbiAgICBcbiAgICBhdWRpby5wbGF5KCkuY2F0Y2goZSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiQXVkaW8gcGxheWJhY2sgZXJyb3I6XCIsIGUpO1xuICAgICAgc2V0SXNQbGF5aW5nKG51bGwpO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVNlbmRNZXNzYWdlID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICghaW5wdXRUZXh0LnRyaW0oKSB8fCAhc2NlbmFyaW8pIHJldHVybjtcbiAgICBcbiAgICBjb25zdCB1c2VyTWVzc2FnZSA9IGlucHV0VGV4dC50cmltKCk7XG4gICAgc2V0TWVzc2FnZXMocHJldiA9PiBbLi4ucHJldiwgeyB0ZXh0OiB1c2VyTWVzc2FnZSwgc2VuZGVyOiAndXNlcicgfV0pO1xuICAgIHNldElucHV0VGV4dCgnJyk7XG4gICAgc2V0SXNMb2FkaW5nKHRydWUpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJuYW1lID0gdXNlciA/ICh1c2VyLmRpc3BsYXlOYW1lIHx8IHVzZXIuZW1haWw/LnNwbGl0KCdAJylbMF0gfHwgJ0d1ZXN0JykgOiAnR3Vlc3QnO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNlbmRDaGF0TWVzc2FnZShcbiAgICAgICAgdXNlcm5hbWUsXG4gICAgICAgIHVzZXJNZXNzYWdlLFxuICAgICAgICBzY2VuYXJpby50aXRsZSwgLy8gVXNpbmcgdGhlIHNjZW5hcmlvIHRpdGxlXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdXNlckxhbmd1YWdlXG4gICAgICApO1xuXG4gICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLmVycm9yKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBbLi4ucHJldiwgeyBcbiAgICAgICAgICB0ZXh0OiByZXNwb25zZS5kYXRhLnJlc3BvbnNlLCBcbiAgICAgICAgICBzZW5kZXI6ICdib3QnLFxuICAgICAgICAgIGF1ZGlvX3VybDogcmVzcG9uc2UuZGF0YS5hdWRpb191cmxcbiAgICAgICAgfV0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuYXVkaW9fdXJsKSB7XG4gICAgICAgICAgLy8gQ2xpY2sgdGhlIHNwZWFrZXIgYnV0dG9uIHRvIHBsYXkgbWVzc2FnZSBhdWRpb1xuICAgICAgICAgIHBsYXlNZXNzYWdlQXVkaW8obWVzc2FnZXMubGVuZ3RoLCByZXNwb25zZS5kYXRhLmF1ZGlvX3VybCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gRmV0Y2ggdXBkYXRlZCBzdWdnZXN0aW9ucyBhZnRlciBtZXNzYWdlXG4gICAgICBhd2FpdCBmZXRjaFN1Z2dlc3Rpb25zKHVzZXJuYW1lKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VuZGluZyBtZXNzYWdlOicsIGVycm9yKTtcbiAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gW1xuICAgICAgICAuLi5wcmV2LFxuICAgICAgICB7IHRleHQ6IFwiU29ycnksIEknbSBoYXZpbmcgdHJvdWJsZSBjb25uZWN0aW5nLiBQbGVhc2UgdHJ5IGFnYWluLlwiLCBzZW5kZXI6ICdib3QnIH1cbiAgICAgIF0pO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVFbmRTY2VuYXJpbyA9ICgpID0+IHtcbiAgICBzZXRTaG93TW9kYWwodHJ1ZSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlU2F2ZUNvbnZlcnNhdGlvbiA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFzY2VuYXJpbykgcmV0dXJuO1xuICAgICAgXG4gICAgICBjb25zdCBzY2VuYXJpb1R5cGUgPSBzY2VuYXJpby50aXRsZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccysvZywgJ18nKTtcbiAgICAgIGNvbnN0IHNhdmVkQ29udmVyc2F0aW9ucyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oc2NlbmFyaW9UeXBlKSB8fCAnW10nKTtcbiAgICAgIFxuICAgICAgc2F2ZWRDb252ZXJzYXRpb25zLnB1c2goe1xuICAgICAgICBpZDogRGF0ZS5ub3coKSxcbiAgICAgICAgZGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBzY2VuYXJpbzogc2NlbmFyaW8udGl0bGUsXG4gICAgICAgIG1lc3NhZ2VzOiBtZXNzYWdlcyxcbiAgICAgICAgdXNlck5hbWU6IHVzZXIgPyAodXNlci5kaXNwbGF5TmFtZSB8fCB1c2VyLmVtYWlsPy5zcGxpdCgnQCcpWzBdIHx8ICdHdWVzdCcpIDogJ0d1ZXN0JyxcbiAgICAgICAgbGFuZ3VhZ2U6IHVzZXJMYW5ndWFnZVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHNjZW5hcmlvVHlwZSwgSlNPTi5zdHJpbmdpZnkoc2F2ZWRDb252ZXJzYXRpb25zKSk7XG4gICAgICByb3V0ZXIucHVzaCgnL3RleHQnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHNhdmluZyBjb252ZXJzYXRpb246XCIsIGVycm9yKTtcbiAgICAgIHJvdXRlci5wdXNoKCcvdGV4dCcpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVEaXNjYXJkQ29udmVyc2F0aW9uID0gKCkgPT4ge1xuICAgIHJvdXRlci5wdXNoKCcvdGV4dCcpO1xuICB9O1xuXG4gIC8vIEFwcGx5IHN1Z2dlc3Rpb24gdG8gaW5wdXRcbiAgY29uc3QgaGFuZGxlU3VnZ2VzdGlvbkNsaWNrID0gKHN1Z2dlc3Rpb246IHN0cmluZykgPT4ge1xuICAgIHNldElucHV0VGV4dChzdWdnZXN0aW9uKTtcbiAgfTtcblxuICAvLyBUb2dnbGUgdm9pY2UgcmVjb3JkaW5nIChwbGFjZWhvbGRlcilcbiAgY29uc3QgdG9nZ2xlUmVjb3JkaW5nID0gKCkgPT4ge1xuICAgIHNldElzUmVjb3JkaW5nKCFpc1JlY29yZGluZyk7XG4gICAgLy8gQWRkIGFjdHVhbCByZWNvcmRpbmcgbG9naWMgaGVyZVxuICB9O1xuXG4gIGlmIChsb2FkaW5nKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCJcbiAgICAgICAgc3R5bGU9e3sgYmFja2dyb3VuZEltYWdlOiBcInVybCgnL2ljb25zL2JhY2tncm91bmQxLmpwZycpXCIsIGJhY2tncm91bmRTaXplOiBcImNvdmVyXCIgfX0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTEyIHctMTIgYm9yZGVyLXQtMiBib3JkZXItYi0yIGJvcmRlci1bIzQ4ZDFjY11cIj48L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGJnLWdyYXktOTAwIHRleHQtd2hpdGUgcmVsYXRpdmVcIlxuICAgICAgc3R5bGU9e3sgYmFja2dyb3VuZEltYWdlOiBcInVybCgnL2ljb25zL2JhY2tncm91bmQxLmpwZycpXCIgfX1cbiAgICA+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC04IGxlZnQtOCB6LTEwXCIgcmVmPXtwcm9maWxlTWVudVJlZn0+XG4gICAgICAgIDxidXR0b24gXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2hvd1Byb2ZpbGVNZW51KCFzaG93UHJvZmlsZU1lbnUpfVxuICAgICAgICAgIGNsYXNzTmFtZT1cInctMTAgaC0xMCByb3VuZGVkLWZ1bGwgYmctd2hpdGUvMTAgaG92ZXI6Ymctd2hpdGUvMjAgdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMjAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG92ZXJmbG93LWhpZGRlblwiXG4gICAgICAgID5cbiAgICAgICAgICB7dXNlcj8ucGhvdG9VUkwgPyAoXG4gICAgICAgICAgICA8SW1hZ2VcbiAgICAgICAgICAgICAgc3JjPXt1c2VyLnBob3RvVVJMfVxuICAgICAgICAgICAgICBhbHQ9XCJQcm9maWxlXCJcbiAgICAgICAgICAgICAgd2lkdGg9ezQwfVxuICAgICAgICAgICAgICBoZWlnaHQ9ezQwfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJvYmplY3QtY292ZXJcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1mdWxsIGJnLVsjNDhkMWNjXSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICB7dXNlcj8uZGlzcGxheU5hbWUgPyB1c2VyLmRpc3BsYXlOYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpIDogXG4gICAgICAgICAgICAgICB1c2VyPy5lbWFpbCA/IHVzZXIuZW1haWwuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgOiBcIkdcIn1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgICBcbiAgICAgICAge3Nob3dQcm9maWxlTWVudSAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtMTIgbGVmdC0wIGJnLXdoaXRlIHJvdW5kZWQtbGcgc2hhZG93LWxnIHB5LTIgbWluLXctWzE4MHB4XSB0ZXh0LWdyYXktODAwIHotMjBcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHgtNCBweS0yIGJvcmRlci1iIGJvcmRlci1ncmF5LTIwMFwiPlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJmb250LW1lZGl1bVwiPnt1c2VyPy5kaXNwbGF5TmFtZSB8fCBcIkd1ZXN0XCJ9PC9wPlxuICAgICAgICAgICAgICB7dXNlcj8uZW1haWwgJiYgKFxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMFwiPnt1c2VyLmVtYWlsfTwvcD5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJweC00IHB5LTIgYm9yZGVyLWIgYm9yZGVyLWdyYXktMjAwXCI+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMFwiPkxhbmd1YWdlOiB7dXNlckxhbmd1YWdlID09PSAnZW4nID8gJ0VuZ2xpc2gnIDogdXNlckxhbmd1YWdlID09PSAnemgtQ04nID8gJ0NoaW5lc2UnIDogJ0phcGFuZXNlJ308L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIHt1c2VyID8gKFxuICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e25hdmlnYXRlVG9EYXNoYm9hcmR9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHRleHQtbGVmdCBweC00IHB5LTIgaG92ZXI6YmctZ3JheS0xMDAgdHJhbnNpdGlvbi1jb2xvcnMgZmxleCBpdGVtcy1jZW50ZXJcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJ3LTQgaC00IG1yLTJcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cbiAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD1cIjJcIiBkPVwiTTE2IDdhNCA0IDAgMTEtOCAwIDQgNCAwIDAxOCAwek0xMiAxNGE3IDcgMCAwMC03IDdoMTRhNyA3IDAgMDAtNy03elwiIC8+XG4gICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgUHJvZmlsZSBEYXNoYm9hcmRcbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHJvdXRlci5wdXNoKCcvbG9naW4nKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgdGV4dC1sZWZ0IHB4LTQgcHktMiBob3ZlcjpiZy1ncmF5LTEwMCB0cmFuc2l0aW9uLWNvbG9ycyBmbGV4IGl0ZW1zLWNlbnRlclwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cInctNCBoLTQgbXItMlwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPVwiMlwiIGQ9XCJNMTEgMTZsLTQtNG0wIDBsNC00bS00IDRoMTRtLTUgNHYxYTMgMyAwIDAxLTMgM0g2YTMgMyAwIDAxLTMtM1Y3YTMgMyAwIDAxMy0zaDdhMyAzIDAgMDEzIDN2MVwiIC8+XG4gICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgU2lnbiBJblxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIFxuICAgICAgPGJ1dHRvbiBcbiAgICAgICAgb25DbGljaz17aGFuZGxlQmFja0NsaWNrfVxuICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtOCBsZWZ0LTI0IHctMTAgaC0xMCByb3VuZGVkLWZ1bGwgYmctd2hpdGUvMTAgaG92ZXI6Ymctd2hpdGUvMjAgdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMjAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCJcbiAgICAgID5cbiAgICAgICAgPEltYWdlXG4gICAgICAgICAgc3JjPVwiL2ljb25zL2JhY2sucG5nXCJcbiAgICAgICAgICBhbHQ9XCJCYWNrXCJcbiAgICAgICAgICB3aWR0aD17MjR9XG4gICAgICAgICAgaGVpZ2h0PXsyNH1cbiAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LXdoaXRlXCJcbiAgICAgICAgLz5cbiAgICAgIDwvYnV0dG9uPlxuICAgICAgXG4gICAgICA8YnV0dG9uIFxuICAgICAgICBvbkNsaWNrPXtoYW5kbGVFbmRTY2VuYXJpb31cbiAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTggcmlnaHQtOCBiZy1bIzIwYjJhYV0gaG92ZXI6YmctWyMwMDgwODBdIHB4LTYgcHktMiByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzIGR1cmF0aW9uLTIwMFwiXG4gICAgICA+XG4gICAgICAgIEVuZCBTY2VuYXJpb1xuICAgICAgPC9idXR0b24+XG4gICAgICBcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHQtMjQgcHgtNCBtYXgtdy02eGwgbXgtYXV0b1wiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZ2FwLTRcIj5cbiAgICAgICAgICB7LyogQ29udmVyc2F0aW9uIGFyZWEgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LVs2NSVdXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtWzcwdmhdIGJnLVsjZjBmOGZmXSByb3VuZGVkLXhsIHAtNiBvdmVyZmxvdy15LWF1dG8gbWItNFwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgc3BhY2UteS00XCI+XG4gICAgICAgICAgICAgICAge21lc3NhZ2VzLm1hcCgobWVzc2FnZSwgaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAga2V5PXtpbmRleH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgZmxleCAke21lc3NhZ2Uuc2VuZGVyID09PSAndXNlcicgPyAnanVzdGlmeS1lbmQnIDogJ2p1c3RpZnktc3RhcnQnfWB9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHttZXNzYWdlLnNlbmRlciA9PT0gJ2JvdCcgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy04IGgtOCBtci0yIGZsZXgtc2hyaW5rLTAgcm91bmRlZC1mdWxsIG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEltYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNyYz1cIi9pY29ucy9yb2JvdC5qcGdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBhbHQ9XCJSb2JvdFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPXszMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PXszMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwib2JqZWN0LWNvdmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BtYXgtdy1zbSByb3VuZGVkLWxnIHB4LTQgcHktMiAke1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zZW5kZXIgPT09ICd1c2VyJyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnYmctYmx1ZS01MDAgdGV4dC13aGl0ZScgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogJ2JnLWdyYXktMjAwIHRleHQtZ3JheS04MDAnXG4gICAgICAgICAgICAgICAgICAgICAgfSBncm91cCByZWxhdGl2ZWB9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICB7bWVzc2FnZS50ZXh0fVxuICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgIHsvKiBTcGVha2VyIGJ1dHRvbiBmb3IgYm90IG1lc3NhZ2VzICovfVxuICAgICAgICAgICAgICAgICAgICAgIHttZXNzYWdlLnNlbmRlciA9PT0gJ2JvdCcgJiYgbWVzc2FnZS5hdWRpb191cmwgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBwbGF5TWVzc2FnZUF1ZGlvKGluZGV4LCBtZXNzYWdlLmF1ZGlvX3VybCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIC1yaWdodC0xMCB0b3AtMS8yIHRyYW5zZm9ybSAtdHJhbnNsYXRlLXktMS8yIHctOCBoLTggYmctZ3JheS0xMDAgcm91bmRlZC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGhvdmVyOmJnLWdyYXktMjAwIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cIlBsYXkgbWVzc2FnZSBhdWRpb1wiXG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtpc1BsYXlpbmcgPT09IGBtZXNzYWdlLSR7aW5kZXh9YCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFuaW1hdGUtcHVsc2VcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbWFnZSBzcmM9XCIvaWNvbnMvc3BlYWtlci5qcGdcIiBhbHQ9XCJTcGVha2VyXCIgd2lkdGg9ezI0fSBoZWlnaHQ9ezI0fSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbWFnZSBzcmM9XCIvaWNvbnMvc3BlYWtlci5qcGdcIiBhbHQ9XCJTcGVha2VyXCIgd2lkdGg9ezI0fSBoZWlnaHQ9ezI0fSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIHttZXNzYWdlLnNlbmRlciA9PT0gJ3VzZXInICYmIChcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctOCBoLTggbWwtMiBmbGV4LXNocmluay0wIHJvdW5kZWQtZnVsbCBvdmVyZmxvdy1oaWRkZW4gYmctYmx1ZS0xMDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt1c2VyPy5waG90b1VSTCA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEltYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPXt1c2VyLnBob3RvVVJMfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdD1cIlVzZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPXszMn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9ezMyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm9iamVjdC1jb3ZlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBoLWZ1bGwgYmctWyM0OGQxY2NdIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtd2hpdGUgZm9udC1zZW1pYm9sZCB0ZXh0LXhzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3VzZXI/LmRpc3BsYXlOYW1lID8gdXNlci5kaXNwbGF5TmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSA6IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXI/LmVtYWlsID8gdXNlci5lbWFpbC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSA6IFwiVVwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICB7aXNMb2FkaW5nICYmIChcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LXN0YXJ0XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yIGJnLWdyYXktMTAwIHJvdW5kZWQtbGcgcHgtNCBweS0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTIgaC0yIGJnLWdyYXktNDAwIHJvdW5kZWQtZnVsbCBhbmltYXRlLWJvdW5jZVwiIHN0eWxlPXt7IGFuaW1hdGlvbkRlbGF5OiAnMHMnIH19PjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0yIGgtMiBiZy1ncmF5LTQwMCByb3VuZGVkLWZ1bGwgYW5pbWF0ZS1ib3VuY2VcIiBzdHlsZT17eyBhbmltYXRpb25EZWxheTogJzAuMnMnIH19PjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0yIGgtMiBiZy1ncmF5LTQwMCByb3VuZGVkLWZ1bGwgYW5pbWF0ZS1ib3VuY2VcIiBzdHlsZT17eyBhbmltYXRpb25EZWxheTogJzAuNHMnIH19PjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPGRpdiByZWY9e21lc3NhZ2VzRW5kUmVmfSAvPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZ2FwLTJcIj5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RvZ2dsZVJlY29yZGluZ31cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake1xuICAgICAgICAgICAgICAgICAgaXNSZWNvcmRpbmcgXG4gICAgICAgICAgICAgICAgICAgID8gJ2JnLXJlZC01MDAgaG92ZXI6YmctcmVkLTYwMCcgXG4gICAgICAgICAgICAgICAgICAgIDogJ2JnLWdyYXktMjAwIGhvdmVyOmJnLWdyYXktMzAwJ1xuICAgICAgICAgICAgICAgIH0gcHgtMyBweS0zIHJvdW5kZWQtbGcgdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMjAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHJlbGF0aXZlYH1cbiAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwiU3RhcnQgdm9pY2UgcmVjb3JkaW5nXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNiB3LTZcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2U9e2lzUmVjb3JkaW5nID8gXCJ3aGl0ZVwiIDogXCJibGFja1wifT5cbiAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD1cIk0xOSAxMWE3IDcgMCAwMS03IDdtMCAwYTcgNyAwIDAxLTctN203IDd2NG0wIDBIOG00IDBoNG0tNC04YTMgMyAwIDAxLTMtM1Y1YTMgMyAwIDExNiAwdjZhMyAzIDAgMDEtMyAzelwiIC8+XG4gICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAge2lzUmVjb3JkaW5nICYmIChcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0wIHJpZ2h0LTAgZmxleCBoLTMgdy0zXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImFuaW1hdGUtcGluZyBhYnNvbHV0ZSBpbmxpbmUtZmxleCBoLWZ1bGwgdy1mdWxsIHJvdW5kZWQtZnVsbCBiZy1yZWQtNDAwIG9wYWNpdHktNzVcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInJlbGF0aXZlIGlubGluZS1mbGV4IHJvdW5kZWQtZnVsbCBoLTMgdy0zIGJnLXJlZC01MDBcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9idXR0b24+XG5cbiAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgIHZhbHVlPXtpbnB1dFRleHR9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUlucHV0Q2hhbmdlfVxuICAgICAgICAgICAgICAgIG9uS2V5UHJlc3M9e2hhbmRsZUtleVByZXNzfVxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtpc1JlY29yZGluZyA/IFwiTGlzdGVuaW5nLi4uXCIgOiBcIlR5cGUgeW91ciBtZXNzYWdlLi4uXCJ9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgZmxleC0xIGJnLXdoaXRlIHRleHQtYmxhY2sgcHgtNCBweS0zIHJvdW5kZWQtbGcgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWJsdWUtNTAwICR7XG4gICAgICAgICAgICAgICAgICBpc1JlY29yZGluZyA/ICdhbmltYXRlLXB1bHNlIGJvcmRlci0yIGJvcmRlci1yZWQtNDAwJyA6ICcnXG4gICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzUmVjb3JkaW5nIHx8IGlzTG9hZGluZ31cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlU2VuZE1lc3NhZ2V9XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzUmVjb3JkaW5nIHx8IGlzTG9hZGluZyB8fCAhaW5wdXRUZXh0LnRyaW0oKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1bIzIwYjJhYV0gaG92ZXI6YmctWyMwMDgwODBdIHB4LTQgcHktMiByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzIGR1cmF0aW9uLTIwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBkaXNhYmxlZDpvcGFjaXR5LTUwXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtpc0xvYWRpbmcgPyAoXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFuaW1hdGUtc3BpbiByb3VuZGVkLWZ1bGwgaC01IHctNSBib3JkZXItdC0yIGJvcmRlci1iLTIgYm9yZGVyLXdoaXRlXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxJbWFnZSBzcmM9XCIvaWNvbnMvc2VuZC5wbmdcIiBhbHQ9XCJTZW5kXCIgd2lkdGg9ezI0fSBoZWlnaHQ9ezI0fSAvPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7LyogU3VnZ2VzdGlvbnMgcGFuZWwgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LVszNSVdXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtWzcwdmhdIGJnLVsjZjBmOGZmXSByb3VuZGVkLXhsIHAtNiBvdmVyZmxvdy15LWF1dG8gbWItNFwiPlxuXG4gICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTgwMCBtYi0zXCI+U3VnZ2VzdGVkIFJlc3BvbnNlczwvaDM+XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICB7c3VnZ2VzdGlvbkxpc3QubGVuZ3RoID4gMCA/IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktM1wiPlxuICAgICAgICAgICAgICAgICAge3N1Z2dlc3Rpb25MaXN0Lm1hcCgoc3VnZ2VzdGlvbiwgaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgIGtleT17aW5kZXh9XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLXdoaXRlIHJvdW5kZWQtbGcgcC0zIHNoYWRvdy1zbSBob3ZlcjpiZy1ncmF5LTUwIHRyYW5zaXRpb24tY29sb3JzIHRleHQtbGVmdCBmbGV4IGl0ZW1zLWNlbnRlclwiXG4gICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlU3VnZ2VzdGlvbkNsaWNrKHN1Z2dlc3Rpb24pfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZmxleC1zaHJpbmstMCB3LTYgaC02IGJnLVsjMjBiMmFhXSByb3VuZGVkLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC13aGl0ZSB0ZXh0LXhzIG1yLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtpbmRleCArIDF9XG4gICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtZ3JheS03MDBcIj57c3VnZ2VzdGlvbn08L3A+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1ncmF5LTUwIHJvdW5kZWQtbGcgcC00IHRleHQtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNTAwXCI+U3VnZ2VzdGlvbnMgd2lsbCBhcHBlYXIgaGVyZSBhZnRlciB5b3Ugc3RhcnQgY2hhdHRpbmcuPC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICBcbiAgICAgIHtzaG93TW9kYWwgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpeGVkIGluc2V0LTAgYmctYmxhY2svNzAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgei01MFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgcm91bmRlZC14bCBwLTYgbWF4LXctbWQgdy1mdWxsIG14LTRcIj5cbiAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LWdyYXktODAwIG1iLTRcIj5FbmQgU2NlbmFyaW88L2gzPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTYwMCBtYi02XCI+WW91ciBwcmFjdGljZSBzZXNzaW9uIHdpbGwgYmUgY2xvc2VkLiBEbyB5b3Ugd2FudCB0byBzYXZlIHRoaXMgY29udmVyc2F0aW9uIHRvIHlvdXIgcHJvZmlsZT88L3A+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBnYXAtNCBqdXN0aWZ5LWVuZFwiPlxuICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZURpc2NhcmRDb252ZXJzYXRpb259XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtNCBweS0yIGJnLWdyYXktMjAwIGhvdmVyOmJnLWdyYXktMzAwIHRleHQtZ3JheS04MDAgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBEb24ndCBTYXZlXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVNhdmVDb252ZXJzYXRpb259XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtNCBweS0yIGJnLWJsdWUtNTAwIGhvdmVyOmJnLWJsdWUtNjAwIHRleHQtd2hpdGUgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBTYXZlXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFJvbGVwbGF5UGFnZTsiXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZVJlZiIsIkltYWdlIiwidXNlUm91dGVyIiwiYXV0aCIsIm9uQXV0aFN0YXRlQ2hhbmdlZCIsInNlbmRDaGF0TWVzc2FnZSIsImdldFN1Z2dlc3Rpb25zIiwiUm9sZXBsYXlQYWdlIiwidXNlciIsInNldFVzZXIiLCJsb2FkaW5nIiwic2V0TG9hZGluZyIsInNob3dQcm9maWxlTWVudSIsInNldFNob3dQcm9maWxlTWVudSIsInVzZXJMYW5ndWFnZSIsInNldFVzZXJMYW5ndWFnZSIsImlucHV0VGV4dCIsInNldElucHV0VGV4dCIsIm1lc3NhZ2VzIiwic2V0TWVzc2FnZXMiLCJpc0xvYWRpbmciLCJzZXRJc0xvYWRpbmciLCJzY2VuYXJpbyIsInNldFNjZW5hcmlvIiwiaXNQbGF5aW5nIiwic2V0SXNQbGF5aW5nIiwic2hvd01vZGFsIiwic2V0U2hvd01vZGFsIiwiaXNSZWNvcmRpbmciLCJzZXRJc1JlY29yZGluZyIsInN1Z2dlc3Rpb25MaXN0Iiwic2V0U3VnZ2VzdGlvbkxpc3QiLCJwcm9maWxlTWVudVJlZiIsIm1lc3NhZ2VzRW5kUmVmIiwiYXVkaW9SZWYiLCJyb3V0ZXIiLCJzY3JvbGxUb0JvdHRvbSIsImN1cnJlbnQiLCJzY3JvbGxJbnRvVmlldyIsImJlaGF2aW9yIiwiaW5pdGlhbGl6ZUNvbnZlcnNhdGlvbiIsInVzZXJuYW1lIiwic2NlbmFyaW9SZXNwb25zZSIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJkYXRhIiwianNvbiIsImNvbnNvbGUiLCJsb2ciLCJ0ZXh0Iiwic2VuZGVyIiwiZmV0Y2hTdWdnZXN0aW9ucyIsImVycm9yIiwiZmV0Y2hVc2VyQW5kU2NlbmFyaW8iLCJzYXZlZFNjZW5hcmlvIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImFsZXJ0IiwicHVzaCIsInBhcnNlZFNjZW5hcmlvIiwicGFyc2UiLCJ1bnN1YnNjcmliZSIsImN1cnJlbnRVc2VyIiwic2F2ZWRMb2NhbGUiLCJkaXNwbGF5TmFtZSIsImVtYWlsIiwic3BsaXQiLCJzdWdnZXN0aW9ucyIsImhhbmRsZUNsaWNrT3V0c2lkZSIsImV2ZW50IiwiY29udGFpbnMiLCJ0YXJnZXQiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaGFuZGxlQmFja0NsaWNrIiwibmF2aWdhdGVUb0Rhc2hib2FyZCIsImhhbmRsZUlucHV0Q2hhbmdlIiwidmFsdWUiLCJoYW5kbGVLZXlQcmVzcyIsImtleSIsImhhbmRsZVNlbmRNZXNzYWdlIiwicGxheU1lc3NhZ2VBdWRpbyIsIm1lc3NhZ2VJZCIsImF1ZGlvVXJsIiwicGF1c2UiLCJjdXJyZW50VGltZSIsImF1ZGlvIiwiQXVkaW8iLCJwbGF5IiwiY2F0Y2giLCJlIiwidHJpbSIsInVzZXJNZXNzYWdlIiwicHJldiIsInRpdGxlIiwidW5kZWZpbmVkIiwiRXJyb3IiLCJhdWRpb191cmwiLCJsZW5ndGgiLCJoYW5kbGVFbmRTY2VuYXJpbyIsImhhbmRsZVNhdmVDb252ZXJzYXRpb24iLCJzY2VuYXJpb1R5cGUiLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJzYXZlZENvbnZlcnNhdGlvbnMiLCJpZCIsIkRhdGUiLCJub3ciLCJkYXRlIiwidG9JU09TdHJpbmciLCJ1c2VyTmFtZSIsImxhbmd1YWdlIiwic2V0SXRlbSIsImhhbmRsZURpc2NhcmRDb252ZXJzYXRpb24iLCJoYW5kbGVTdWdnZXN0aW9uQ2xpY2siLCJzdWdnZXN0aW9uIiwidG9nZ2xlUmVjb3JkaW5nIiwiZGl2IiwiY2xhc3NOYW1lIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJiYWNrZ3JvdW5kU2l6ZSIsInJlZiIsImJ1dHRvbiIsIm9uQ2xpY2siLCJwaG90b1VSTCIsInNyYyIsImFsdCIsIndpZHRoIiwiaGVpZ2h0IiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJwIiwic3ZnIiwiZmlsbCIsInN0cm9rZSIsInZpZXdCb3giLCJwYXRoIiwic3Ryb2tlTGluZWNhcCIsInN0cm9rZUxpbmVqb2luIiwic3Ryb2tlV2lkdGgiLCJkIiwibWFwIiwibWVzc2FnZSIsImluZGV4IiwiYXJpYS1sYWJlbCIsImFuaW1hdGlvbkRlbGF5IiwieG1sbnMiLCJzcGFuIiwiaW5wdXQiLCJ0eXBlIiwib25DaGFuZ2UiLCJvbktleVByZXNzIiwicGxhY2Vob2xkZXIiLCJkaXNhYmxlZCIsImgzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/roleplay/page.tsx\n"));
./NewUI/.next/static/webpack/app/roleplay/page.cb4e04a2dd5dba17.hot-update.js:eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/image */ \"(app-pages-browser)/./node_modules/next/dist/api/image.js\");\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/./node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var _server_firebase__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../server/firebase */ \"(app-pages-browser)/./server/firebase.js\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! firebase/auth */ \"(app-pages-browser)/./node_modules/firebase/auth/dist/esm/index.esm.js\");\n/* harmony import */ var _services_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/services/api */ \"(app-pages-browser)/./src/services/api.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\nconst RoleplayPage = ()=>{\n    _s();\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [showProfileMenu, setShowProfileMenu] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [userLanguage, setUserLanguage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('en');\n    const [inputText, setInputText] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [scenario, setScenario] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isPlaying, setIsPlaying] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [showModal, setShowModal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isRecording, setIsRecording] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [suggestionList, setSuggestionList] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const profileMenuRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const messagesEndRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const audioRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const router = (0,next_navigation__WEBPACK_IMPORTED_MODULE_3__.useRouter)();\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"RoleplayPage.useEffect\": ()=>{\n            scrollToBottom();\n        }\n    }[\"RoleplayPage.useEffect\"], [\n        messages\n    ]);\n    const scrollToBottom = ()=>{\n        var _messagesEndRef_current;\n        (_messagesEndRef_current = messagesEndRef.current) === null || _messagesEndRef_current === void 0 ? void 0 : _messagesEndRef_current.scrollIntoView({\n            behavior: \"smooth\"\n        });\n    };\n    const initializeConversation = async (username)=>{\n        try {\n            // Call backend to set scenario & get response\n            // const scenarioResponse = await setScenario(username);\n            // Fetch initial response from backend\n            const response = await fetch(\"/api/get_scenario_response\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    username\n                })\n            });\n            const data = await response.json();\n            console.log(\"ðŸ¤– LLM Response:\", data.response);\n            // Set initial message from backend\n            setMessages([\n                {\n                    text: data.response,\n                    sender: \"bot\"\n                }\n            ]);\n            // Fetch initial suggestions\n            fetchSuggestions(username);\n        } catch (error) {\n            console.error(\"Error initializing conversation:\", error);\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"RoleplayPage.useEffect\": ()=>{\n            setLoading(true);\n            const fetchUserAndScenario = {\n                \"RoleplayPage.useEffect.fetchUserAndScenario\": async ()=>{\n                    try {\n                        // Load scenario from localStorage\n                        const savedScenario = localStorage.getItem(\"currentScenario\");\n                        if (!savedScenario) {\n                            alert(\"No scenario selected. Please select a scenario first.\");\n                            router.push(\"/scenario\");\n                            return;\n                        }\n                        const parsedScenario = JSON.parse(savedScenario);\n                        setScenario(parsedScenario);\n                        // Authenticate user\n                        const unsubscribe = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_5__.onAuthStateChanged)(_server_firebase__WEBPACK_IMPORTED_MODULE_4__.auth, {\n                            \"RoleplayPage.useEffect.fetchUserAndScenario.unsubscribe\": async (currentUser)=>{\n                                setUser(currentUser);\n                                // Get language preference (from localStorage or backend)\n                                const savedLocale = localStorage.getItem(\"locale\") || \"en\";\n                                setUserLanguage(savedLocale);\n                                if (currentUser) {\n                                    var _currentUser_email;\n                                    const username = currentUser.displayName || ((_currentUser_email = currentUser.email) === null || _currentUser_email === void 0 ? void 0 : _currentUser_email.split(\"@\")[0]) || \"Guest\";\n                                    console.log(\"ðŸ‘¤ User authenticated:\", username);\n                                    // Initialize conversation (calls backend for scenario & LLM response)\n                                    await initializeConversation(username);\n                                }\n                                setLoading(false);\n                            }\n                        }[\"RoleplayPage.useEffect.fetchUserAndScenario.unsubscribe\"]);\n                        return ({\n                            \"RoleplayPage.useEffect.fetchUserAndScenario\": ()=>unsubscribe()\n                        })[\"RoleplayPage.useEffect.fetchUserAndScenario\"];\n                    } catch (error) {\n                        console.error(\"Error loading user scenario:\", error);\n                        alert(\"There was a problem loading the scenario. Please try again.\");\n                        router.push(\"/scenario\");\n                    }\n                }\n            }[\"RoleplayPage.useEffect.fetchUserAndScenario\"];\n            fetchUserAndScenario();\n        }\n    }[\"RoleplayPage.useEffect\"], []);\n    // // Initialize scenario conversation with backend\n    // const initializeConversation = async (username: string, scenarioTitle: string) => {\n    //   try {\n    //     const scenarioResponse = await setScenario(username, scenarioTitle);\n    //     fetchSuggestions(username); // Initial suggestions\n    //   } catch (error) {\n    //     console.error(\"Error initializing conversation:\", error);\n    //   }\n    // };\n    // useEffect(() => {\n    //   // Load the scenario from localStorage\n    //   const savedScenario = localStorage.getItem('currentScenario');\n    //   if (!savedScenario) {\n    //     // If no scenario is found, redirect back to scenario selection\n    //     alert(\"No scenario selected. Please select a scenario first.\");\n    //     router.push('/scenario');\n    //     return;\n    //   }\n    //   try {\n    //     const parsedScenario = JSON.parse(savedScenario);\n    //     setScenario(parsedScenario);\n    //     const unsubscribe = onAuthStateChanged(auth, async (currentUser) => {\n    //       setUser(currentUser);\n    //       const savedLocale = localStorage.getItem('locale') || 'en';\n    //       setUserLanguage(savedLocale);\n    //       if (currentUser) {\n    //         const username = currentUser.displayName || currentUser.email?.split('@')[0] || 'Guest';\n    //         await initializeConversation(username, parsedScenario.title);\n    //         setMessages([\n    //           { \n    //             text: `Hello${currentUser.displayName ? ', ' + currentUser.displayName : ''}! I'll be your conversation partner for this ${parsedScenario.title} scenario. How can I help you today?`, \n    //             sender: 'bot' \n    //           }\n    //         ]);\n    //       } else {\n    //         setMessages([\n    //           { \n    //             text: `Welcome to the ${parsedScenario.title} scenario! I'll be your conversation partner. How would you like to start?`, \n    //             sender: 'bot' \n    //           }\n    //         ]);\n    //       }\n    //       setLoading(false);\n    //     });\n    //     return () => unsubscribe();\n    //   } catch (error) {\n    //     console.error(\"Error parsing scenario:\", error);\n    //     alert(\"There was a problem loading the scenario. Please try again.\");\n    //     router.push('/scenario');\n    //   }\n    // }, []);\n    // Fetch updated conversation suggestions from backend\n    const fetchSuggestions = async (username)=>{\n        try {\n            const response = await (0,_services_api__WEBPACK_IMPORTED_MODULE_6__.getSuggestions)(username);\n            if (response && response.data && !response.error) {\n                setSuggestionList(response.data.suggestions);\n            } else if (response && response.error) {\n                console.error(\"Error fetching suggestions:\", response.error);\n            }\n        } catch (error) {\n            console.error(\"Error fetching suggestions:\", error);\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"RoleplayPage.useEffect\": ()=>{\n            function handleClickOutside(event) {\n                if (profileMenuRef.current && !profileMenuRef.current.contains(event.target)) {\n                    setShowProfileMenu(false);\n                }\n            }\n            document.addEventListener(\"mousedown\", handleClickOutside);\n            return ({\n                \"RoleplayPage.useEffect\": ()=>document.removeEventListener(\"mousedown\", handleClickOutside)\n            })[\"RoleplayPage.useEffect\"];\n        }\n    }[\"RoleplayPage.useEffect\"], []);\n    const handleBackClick = ()=>{\n        router.push('/scenario');\n    };\n    const navigateToDashboard = ()=>{\n        router.push('/dashboard');\n        setShowProfileMenu(false);\n    };\n    const handleInputChange = (event)=>{\n        setInputText(event.target.value);\n    };\n    const handleKeyPress = (event)=>{\n        if (event.key === 'Enter') {\n            handleSendMessage();\n        }\n    };\n    // Play audio when speaker button is clicked\n    const playMessageAudio = (messageId, audioUrl)=>{\n        if (!audioUrl) return;\n        // Stop any currently playing audio\n        if (audioRef.current) {\n            audioRef.current.pause();\n            audioRef.current.currentTime = 0;\n            setIsPlaying(null);\n        }\n        // If clicking on the currently playing audio, just stop it\n        if (isPlaying === \"message-\".concat(messageId)) {\n            setIsPlaying(null);\n            return;\n        }\n        // Create and play new audio\n        const audio = new Audio(\"http://localhost:8000\".concat(audioUrl));\n        audioRef.current = audio;\n        // Set the currently playing message ID\n        setIsPlaying(\"message-\".concat(messageId));\n        // When audio ends, reset the playing state\n        audio.addEventListener('ended', ()=>{\n            setIsPlaying(null);\n        });\n        audio.play().catch((e)=>{\n            console.error(\"Audio playback error:\", e);\n            setIsPlaying(null);\n        });\n    };\n    const handleSendMessage = async ()=>{\n        if (!inputText.trim() || !scenario) return;\n        const userMessage = inputText.trim();\n        setMessages((prev)=>[\n                ...prev,\n                {\n                    text: userMessage,\n                    sender: 'user'\n                }\n            ]);\n        setInputText('');\n        setIsLoading(true);\n        try {\n            var _user_email;\n            const username = user ? user.displayName || ((_user_email = user.email) === null || _user_email === void 0 ? void 0 : _user_email.split('@')[0]) || 'Guest' : 'Guest';\n            const response = await (0,_services_api__WEBPACK_IMPORTED_MODULE_6__.sendChatMessage)(username, userMessage, scenario.title, undefined, userLanguage);\n            if (response && response.error) {\n                throw new Error(response.error);\n            }\n            if (response && response.data) {\n                setMessages((prev)=>[\n                        ...prev,\n                        {\n                            text: response.data.response,\n                            sender: 'bot',\n                            audio_url: response.data.audio_url\n                        }\n                    ]);\n                if (response.data.audio_url) {\n                    // Click the speaker button to play message audio\n                    playMessageAudio(messages.length, response.data.audio_url);\n                }\n            }\n            // Fetch updated suggestions after message\n            await fetchSuggestions(username);\n        } catch (error) {\n            console.error('Error sending message:', error);\n            setMessages((prev)=>[\n                    ...prev,\n                    {\n                        text: \"Sorry, I'm having trouble connecting. Please try again.\",\n                        sender: 'bot'\n                    }\n                ]);\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    const handleEndScenario = ()=>{\n        setShowModal(true);\n    };\n    const handleSaveConversation = async ()=>{\n        try {\n            var _user_email;\n            if (!scenario) return;\n            const scenarioType = scenario.title.toLowerCase().replace(/\\s+/g, '_');\n            const savedConversations = JSON.parse(localStorage.getItem(scenarioType) || '[]');\n            savedConversations.push({\n                id: Date.now(),\n                date: new Date().toISOString(),\n                scenario: scenario.title,\n                messages: messages,\n                userName: user ? user.displayName || ((_user_email = user.email) === null || _user_email === void 0 ? void 0 : _user_email.split('@')[0]) || 'Guest' : 'Guest',\n                language: userLanguage\n            });\n            localStorage.setItem(scenarioType, JSON.stringify(savedConversations));\n            router.push('/text');\n        } catch (error) {\n            console.error(\"Error saving conversation:\", error);\n            router.push('/text');\n        }\n    };\n    const handleDiscardConversation = ()=>{\n        router.push('/text');\n    };\n    // Apply suggestion to input\n    const handleSuggestionClick = (suggestion)=>{\n        setInputText(suggestion);\n    };\n    // Toggle voice recording (placeholder)\n    const toggleRecording = ()=>{\n        setIsRecording(!isRecording);\n    // Add actual recording logic here\n    };\n    if (loading) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"min-h-screen flex items-center justify-center\",\n            style: {\n                backgroundImage: \"url('/icons/background1.jpg')\",\n                backgroundSize: \"cover\"\n            },\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#48d1cc]\"\n            }, void 0, false, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 362,\n                columnNumber: 9\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n            lineNumber: 360,\n            columnNumber: 7\n        }, undefined);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"min-h-screen bg-gray-900 text-white relative\",\n        style: {\n            backgroundImage: \"url('/icons/background1.jpg')\"\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute top-8 left-8 z-10\",\n                ref: profileMenuRef,\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>setShowProfileMenu(!showProfileMenu),\n                        className: \"w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 transition-colors duration-200 flex items-center justify-center overflow-hidden\",\n                        children: (user === null || user === void 0 ? void 0 : user.photoURL) ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                            src: user.photoURL,\n                            alt: \"Profile\",\n                            width: 40,\n                            height: 40,\n                            className: \"object-cover\"\n                        }, void 0, false, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 377,\n                            columnNumber: 13\n                        }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"w-full h-full bg-[#48d1cc] flex items-center justify-center text-white font-semibold text-sm\",\n                            children: (user === null || user === void 0 ? void 0 : user.displayName) ? user.displayName.charAt(0).toUpperCase() : (user === null || user === void 0 ? void 0 : user.email) ? user.email.charAt(0).toUpperCase() : \"G\"\n                        }, void 0, false, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 385,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                        lineNumber: 372,\n                        columnNumber: 9\n                    }, undefined),\n                    showProfileMenu && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"absolute top-12 left-0 bg-white rounded-lg shadow-lg py-2 min-w-[180px] text-gray-800 z-20\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"px-4 py-2 border-b border-gray-200\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        className: \"font-medium\",\n                                        children: (user === null || user === void 0 ? void 0 : user.displayName) || \"Guest\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 395,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    (user === null || user === void 0 ? void 0 : user.email) && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        className: \"text-xs text-gray-500\",\n                                        children: user.email\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 397,\n                                        columnNumber: 17\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                lineNumber: 394,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"px-4 py-2 border-b border-gray-200\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-xs text-gray-500\",\n                                    children: [\n                                        \"Language: \",\n                                        userLanguage === 'en' ? 'English' : userLanguage === 'zh-CN' ? 'Chinese' : 'Japanese'\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                    lineNumber: 401,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                lineNumber: 400,\n                                columnNumber: 13\n                            }, undefined),\n                            user ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: navigateToDashboard,\n                                className: \"w-full text-left px-4 py-2 hover:bg-gray-100 transition-colors flex items-center\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        className: \"w-4 h-4 mr-2\",\n                                        fill: \"none\",\n                                        stroke: \"currentColor\",\n                                        viewBox: \"0 0 24 24\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\",\n                                            strokeWidth: \"2\",\n                                            d: \"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 409,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 408,\n                                        columnNumber: 17\n                                    }, undefined),\n                                    \"Profile Dashboard\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                lineNumber: 404,\n                                columnNumber: 15\n                            }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>router.push('/login'),\n                                className: \"w-full text-left px-4 py-2 hover:bg-gray-100 transition-colors flex items-center\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        className: \"w-4 h-4 mr-2\",\n                                        fill: \"none\",\n                                        stroke: \"currentColor\",\n                                        viewBox: \"0 0 24 24\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\",\n                                            strokeWidth: \"2\",\n                                            d: \"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 419,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 418,\n                                        columnNumber: 17\n                                    }, undefined),\n                                    \"Sign In\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                lineNumber: 414,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                        lineNumber: 393,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 371,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: handleBackClick,\n                className: \"absolute top-8 left-24 w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 transition-colors duration-200 flex items-center justify-center\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                    src: \"/icons/back.png\",\n                    alt: \"Back\",\n                    width: 24,\n                    height: 24,\n                    className: \"text-white\"\n                }, void 0, false, {\n                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                    lineNumber: 432,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 428,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: handleEndScenario,\n                className: \"absolute top-8 right-8 bg-[#20b2aa] hover:bg-[#008080] px-6 py-2 rounded-lg transition-colors duration-200\",\n                children: \"End Scenario\"\n            }, void 0, false, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 441,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"pt-24 px-4 max-w-6xl mx-auto\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex gap-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"w-[65%]\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"h-[70vh] bg-[#f0f8ff] rounded-xl p-6 overflow-y-auto mb-4\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex flex-col space-y-4\",\n                                        children: [\n                                            messages.map((message, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex \".concat(message.sender === 'user' ? 'justify-end' : 'justify-start'),\n                                                    children: [\n                                                        message.sender === 'bot' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"w-8 h-8 mr-2 flex-shrink-0 rounded-full overflow-hidden\",\n                                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                                                src: \"/icons/robot.jpg\",\n                                                                alt: \"Robot\",\n                                                                width: 32,\n                                                                height: 32,\n                                                                className: \"object-cover\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                lineNumber: 461,\n                                                                columnNumber: 25\n                                                            }, undefined)\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 460,\n                                                            columnNumber: 23\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"max-w-sm rounded-lg px-4 py-2 \".concat(message.sender === 'user' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-800', \" group relative\"),\n                                                            children: [\n                                                                message.text,\n                                                                message.sender === 'bot' && message.audio_url && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                                    onClick: ()=>playMessageAudio(index, message.audio_url),\n                                                                    className: \"absolute -right-10 top-1/2 transform -translate-y-1/2 w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200 transition-colors\",\n                                                                    \"aria-label\": \"Play message audio\",\n                                                                    children: isPlaying === \"message-\".concat(index) ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                        className: \"animate-pulse\",\n                                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                                                            src: \"/icons/speaker.jpg\",\n                                                                            alt: \"Speaker\",\n                                                                            width: 24,\n                                                                            height: 24\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                            lineNumber: 488,\n                                                                            columnNumber: 31\n                                                                        }, undefined)\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                        lineNumber: 487,\n                                                                        columnNumber: 29\n                                                                    }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                                                        src: \"/icons/speaker.jpg\",\n                                                                        alt: \"Speaker\",\n                                                                        width: 24,\n                                                                        height: 24\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                        lineNumber: 491,\n                                                                        columnNumber: 29\n                                                                    }, undefined)\n                                                                }, void 0, false, {\n                                                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                    lineNumber: 481,\n                                                                    columnNumber: 25\n                                                                }, undefined)\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 470,\n                                                            columnNumber: 21\n                                                        }, undefined),\n                                                        message.sender === 'user' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"w-8 h-8 ml-2 flex-shrink-0 rounded-full overflow-hidden bg-blue-100 flex items-center justify-center\",\n                                                            children: (user === null || user === void 0 ? void 0 : user.photoURL) ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                                                src: user.photoURL,\n                                                                alt: \"User\",\n                                                                width: 32,\n                                                                height: 32,\n                                                                className: \"object-cover\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                lineNumber: 499,\n                                                                columnNumber: 27\n                                                            }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"w-full h-full bg-[#48d1cc] flex items-center justify-center text-white font-semibold text-xs\",\n                                                                children: (user === null || user === void 0 ? void 0 : user.displayName) ? user.displayName.charAt(0).toUpperCase() : (user === null || user === void 0 ? void 0 : user.email) ? user.email.charAt(0).toUpperCase() : \"U\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                                lineNumber: 507,\n                                                                columnNumber: 27\n                                                            }, undefined)\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 497,\n                                                            columnNumber: 23\n                                                        }, undefined)\n                                                    ]\n                                                }, index, true, {\n                                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                    lineNumber: 455,\n                                                    columnNumber: 19\n                                                }, undefined)),\n                                            isLoading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex justify-start\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex items-center space-x-2 bg-gray-100 rounded-lg px-4 py-2\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",\n                                                            style: {\n                                                                animationDelay: '0s'\n                                                            }\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 519,\n                                                            columnNumber: 23\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",\n                                                            style: {\n                                                                animationDelay: '0.2s'\n                                                            }\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 520,\n                                                            columnNumber: 23\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",\n                                                            style: {\n                                                                animationDelay: '0.4s'\n                                                            }\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 521,\n                                                            columnNumber: 23\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                    lineNumber: 518,\n                                                    columnNumber: 21\n                                                }, undefined)\n                                            }, void 0, false, {\n                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                lineNumber: 517,\n                                                columnNumber: 19\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                ref: messagesEndRef\n                                            }, void 0, false, {\n                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                lineNumber: 525,\n                                                columnNumber: 17\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 453,\n                                        columnNumber: 15\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                    lineNumber: 452,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex gap-2\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: toggleRecording,\n                                            className: \"\".concat(isRecording ? 'bg-red-500 hover:bg-red-600' : 'bg-gray-200 hover:bg-gray-300', \" px-3 py-3 rounded-lg transition-colors duration-200 flex items-center justify-center relative\"),\n                                            \"aria-label\": \"Start voice recording\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                    xmlns: \"http://www.w3.org/2000/svg\",\n                                                    className: \"h-6 w-6\",\n                                                    fill: \"none\",\n                                                    viewBox: \"0 0 24 24\",\n                                                    stroke: isRecording ? \"white\" : \"black\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                        strokeLinecap: \"round\",\n                                                        strokeLinejoin: \"round\",\n                                                        strokeWidth: 2,\n                                                        d: \"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                        lineNumber: 540,\n                                                        columnNumber: 19\n                                                    }, undefined)\n                                                }, void 0, false, {\n                                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                    lineNumber: 539,\n                                                    columnNumber: 17\n                                                }, undefined),\n                                                isRecording && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"absolute top-0 right-0 flex h-3 w-3\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 544,\n                                                            columnNumber: 21\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"relative inline-flex rounded-full h-3 w-3 bg-red-500\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                            lineNumber: 545,\n                                                            columnNumber: 21\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                    lineNumber: 543,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 530,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                            type: \"text\",\n                                            value: inputText,\n                                            onChange: handleInputChange,\n                                            onKeyPress: handleKeyPress,\n                                            placeholder: isRecording ? \"Listening...\" : \"Type your message...\",\n                                            className: \"flex-1 bg-white text-black px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 \".concat(isRecording ? 'animate-pulse border-2 border-red-400' : ''),\n                                            disabled: isRecording || isLoading\n                                        }, void 0, false, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 550,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: handleSendMessage,\n                                            disabled: isRecording || isLoading || !inputText.trim(),\n                                            className: \"bg-[#20b2aa] hover:bg-[#008080] px-4 py-2 rounded-lg transition-colors duration-200 flex items-center justify-center disabled:opacity-50\",\n                                            children: isLoading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                lineNumber: 568,\n                                                columnNumber: 19\n                                            }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_image__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                                src: \"/icons/send.png\",\n                                                alt: \"Send\",\n                                                width: 24,\n                                                height: 24\n                                            }, void 0, false, {\n                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                lineNumber: 570,\n                                                columnNumber: 19\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 562,\n                                            columnNumber: 15\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                    lineNumber: 529,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 451,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"w-[35%]\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"h-[70vh] bg-[#f0f8ff] rounded-xl p-6 overflow-y-auto mb-4\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                        className: \"text-lg font-semibold text-gray-800 mb-3\",\n                                        children: \"Suggested Responses\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 580,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    suggestionList.length > 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"space-y-3\",\n                                        children: suggestionList.map((suggestion, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                className: \"w-full bg-white rounded-lg p-3 shadow-sm hover:bg-gray-50 transition-colors text-left flex items-center\",\n                                                onClick: ()=>handleSuggestionClick(suggestion),\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"flex-shrink-0 w-6 h-6 bg-[#20b2aa] rounded-full flex items-center justify-center text-white text-xs mr-3\",\n                                                        children: index + 1\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                        lineNumber: 590,\n                                                        columnNumber: 23\n                                                    }, undefined),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                        className: \"text-gray-700\",\n                                                        children: suggestion\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                        lineNumber: 593,\n                                                        columnNumber: 23\n                                                    }, undefined)\n                                                ]\n                                            }, index, true, {\n                                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                                lineNumber: 585,\n                                                columnNumber: 21\n                                            }, undefined))\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 583,\n                                        columnNumber: 17\n                                    }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"bg-gray-50 rounded-lg p-4 text-center\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                            className: \"text-gray-500\",\n                                            children: \"Suggestions will appear here after you start chatting.\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                            lineNumber: 599,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                        lineNumber: 598,\n                                        columnNumber: 17\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                lineNumber: 578,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 577,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                    lineNumber: 449,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 448,\n                columnNumber: 7\n            }, undefined),\n            showModal && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"fixed inset-0 bg-black/70 flex items-center justify-center z-50\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"bg-white rounded-xl p-6 max-w-md w-full mx-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                            className: \"text-xl font-bold text-gray-800 mb-4\",\n                            children: \"End Scenario\"\n                        }, void 0, false, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 610,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-gray-600 mb-6\",\n                            children: \"Your practice session will be closed. Do you want to save this conversation to your profile?\"\n                        }, void 0, false, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 611,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex gap-4 justify-end\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: handleDiscardConversation,\n                                    className: \"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg transition-colors\",\n                                    children: \"Don't Save\"\n                                }, void 0, false, {\n                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                    lineNumber: 614,\n                                    columnNumber: 15\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: handleSaveConversation,\n                                    className: \"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors\",\n                                    children: \"Save\"\n                                }, void 0, false, {\n                                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                                    lineNumber: 620,\n                                    columnNumber: 15\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                            lineNumber: 613,\n                            columnNumber: 13\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                    lineNumber: 609,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n                lineNumber: 608,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/hyang/CS239_new/NewUI+Backend/NewUI/src/app/roleplay/page.tsx\",\n        lineNumber: 368,\n        columnNumber: 5\n    }, undefined);\n};\n_s(RoleplayPage, \"fANFO5dSlYyXonWO2Eh02d0WKSk=\", false, function() {\n    return [\n        next_navigation__WEBPACK_IMPORTED_MODULE_3__.useRouter\n    ];\n});\n_c = RoleplayPage;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RoleplayPage);\nvar _c;\n$RefreshReg$(_c, \"RoleplayPage\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvcm9sZXBsYXkvcGFnZS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFDMkQ7QUFDNUI7QUFDYTtBQUNJO0FBQ1M7QUFDcUI7QUFnQjlFLE1BQU1VLGVBQWU7O0lBQ25CLE1BQU0sQ0FBQ0MsTUFBTUMsUUFBUSxHQUFHWCwrQ0FBUUEsQ0FBYztJQUM5QyxNQUFNLENBQUNZLFNBQVNDLFdBQVcsR0FBR2IsK0NBQVFBLENBQUM7SUFDdkMsTUFBTSxDQUFDYyxpQkFBaUJDLG1CQUFtQixHQUFHZiwrQ0FBUUEsQ0FBQztJQUN2RCxNQUFNLENBQUNnQixjQUFjQyxnQkFBZ0IsR0FBR2pCLCtDQUFRQSxDQUFTO0lBQ3pELE1BQU0sQ0FBQ2tCLFdBQVdDLGFBQWEsR0FBR25CLCtDQUFRQSxDQUFDO0lBQzNDLE1BQU0sQ0FBQ29CLFVBQVVDLFlBQVksR0FBR3JCLCtDQUFRQSxDQUFZLEVBQUU7SUFDdEQsTUFBTSxDQUFDc0IsV0FBV0MsYUFBYSxHQUFHdkIsK0NBQVFBLENBQUM7SUFDM0MsTUFBTSxDQUFDd0IsVUFBVUMsWUFBWSxHQUFHekIsK0NBQVFBLENBQWtCO0lBQzFELE1BQU0sQ0FBQzBCLFdBQVdDLGFBQWEsR0FBRzNCLCtDQUFRQSxDQUFnQjtJQUMxRCxNQUFNLENBQUM0QixXQUFXQyxhQUFhLEdBQUc3QiwrQ0FBUUEsQ0FBQztJQUMzQyxNQUFNLENBQUM4QixhQUFhQyxlQUFlLEdBQUcvQiwrQ0FBUUEsQ0FBQztJQUMvQyxNQUFNLENBQUNnQyxnQkFBZ0JDLGtCQUFrQixHQUFHakMsK0NBQVFBLENBQVcsRUFBRTtJQUVqRSxNQUFNa0MsaUJBQWlCaEMsNkNBQU1BLENBQWlCO0lBQzlDLE1BQU1pQyxpQkFBaUJqQyw2Q0FBTUEsQ0FBaUI7SUFDOUMsTUFBTWtDLFdBQVdsQyw2Q0FBTUEsQ0FBMEI7SUFDakQsTUFBTW1DLFNBQVNqQywwREFBU0E7SUFFeEJILGdEQUFTQTtrQ0FBQztZQUNScUM7UUFD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L05ld1VJL3NyYy9hcHAvcm9sZXBsYXkvcGFnZS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCJcbmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgSW1hZ2UgZnJvbSAnbmV4dC9pbWFnZSc7XG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICduZXh0L25hdmlnYXRpb24nO1xuaW1wb3J0IHsgYXV0aCB9IGZyb20gXCIuLi8uLi8uLi9zZXJ2ZXIvZmlyZWJhc2VcIjtcbmltcG9ydCB7IG9uQXV0aFN0YXRlQ2hhbmdlZCwgVXNlciB9IGZyb20gXCJmaXJlYmFzZS9hdXRoXCI7XG5pbXBvcnQgeyBzZW5kQ2hhdE1lc3NhZ2UsIGdldFN1Z2dlc3Rpb25zLCBzZXRTY2VuYXJpbyB9IGZyb20gJ0Avc2VydmljZXMvYXBpJztcblxuaW50ZXJmYWNlIFNjZW5hcmlvIHtcbiAgaWQ6IHN0cmluZztcbiAgdGl0bGU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICBjdXN0b206IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBNZXNzYWdlIHtcbiAgdGV4dDogc3RyaW5nO1xuICBzZW5kZXI6ICd1c2VyJyB8ICdib3QnO1xuICBhdWRpb191cmw/OiBzdHJpbmc7XG59XG5cbmNvbnN0IFJvbGVwbGF5UGFnZSA9ICgpID0+IHtcbiAgY29uc3QgW3VzZXIsIHNldFVzZXJdID0gdXNlU3RhdGU8VXNlciB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW3Nob3dQcm9maWxlTWVudSwgc2V0U2hvd1Byb2ZpbGVNZW51XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3VzZXJMYW5ndWFnZSwgc2V0VXNlckxhbmd1YWdlXSA9IHVzZVN0YXRlPHN0cmluZz4oJ2VuJyk7XG4gIGNvbnN0IFtpbnB1dFRleHQsIHNldElucHV0VGV4dF0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGU8TWVzc2FnZVtdPihbXSk7XG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzY2VuYXJpbywgc2V0U2NlbmFyaW9dID0gdXNlU3RhdGU8U2NlbmFyaW8gfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2lzUGxheWluZywgc2V0SXNQbGF5aW5nXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbc2hvd01vZGFsLCBzZXRTaG93TW9kYWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaXNSZWNvcmRpbmcsIHNldElzUmVjb3JkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3N1Z2dlc3Rpb25MaXN0LCBzZXRTdWdnZXN0aW9uTGlzdF0gPSB1c2VTdGF0ZTxzdHJpbmdbXT4oW10pO1xuICBcbiAgY29uc3QgcHJvZmlsZU1lbnVSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xuICBjb25zdCBtZXNzYWdlc0VuZFJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCk7XG4gIGNvbnN0IGF1ZGlvUmVmID0gdXNlUmVmPEhUTUxBdWRpb0VsZW1lbnQgfCBudWxsPihudWxsKTtcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzY3JvbGxUb0JvdHRvbSgpO1xuICB9LCBbbWVzc2FnZXNdKTtcbiAgXG4gIGNvbnN0IHNjcm9sbFRvQm90dG9tID0gKCkgPT4ge1xuICAgIG1lc3NhZ2VzRW5kUmVmLmN1cnJlbnQ/LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6IFwic21vb3RoXCIgfSk7XG4gIH07XG4gIGNvbnN0IGluaXRpYWxpemVDb252ZXJzYXRpb24gPSBhc3luYyAodXNlcm5hbWU6IHN0cmluZykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBDYWxsIGJhY2tlbmQgdG8gc2V0IHNjZW5hcmlvICYgZ2V0IHJlc3BvbnNlXG4gICAgICAvLyBjb25zdCBzY2VuYXJpb1Jlc3BvbnNlID0gYXdhaXQgc2V0U2NlbmFyaW8odXNlcm5hbWUpO1xuICAgICAgXG4gICAgICAvLyBGZXRjaCBpbml0aWFsIHJlc3BvbnNlIGZyb20gYmFja2VuZFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcIi9hcGkvZ2V0X3NjZW5hcmlvX3Jlc3BvbnNlXCIsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHVzZXJuYW1lIH0pLFxuICAgICAgfSk7XG4gIFxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGNvbnNvbGUubG9nKFwi8J+kliBMTE0gUmVzcG9uc2U6XCIsIGRhdGEucmVzcG9uc2UpO1xuICBcbiAgICAgIC8vIFNldCBpbml0aWFsIG1lc3NhZ2UgZnJvbSBiYWNrZW5kXG4gICAgICBzZXRNZXNzYWdlcyhbeyB0ZXh0OiBkYXRhLnJlc3BvbnNlLCBzZW5kZXI6IFwiYm90XCIgfV0pO1xuICBcbiAgICAgIC8vIEZldGNoIGluaXRpYWwgc3VnZ2VzdGlvbnNcbiAgICAgIGZldGNoU3VnZ2VzdGlvbnModXNlcm5hbWUpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW5pdGlhbGl6aW5nIGNvbnZlcnNhdGlvbjpcIiwgZXJyb3IpO1xuICAgIH1cbiAgfTtcbiAgXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0TG9hZGluZyh0cnVlKTtcbiAgXG4gICAgY29uc3QgZmV0Y2hVc2VyQW5kU2NlbmFyaW8gPSBhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBMb2FkIHNjZW5hcmlvIGZyb20gbG9jYWxTdG9yYWdlXG4gICAgICAgIGNvbnN0IHNhdmVkU2NlbmFyaW8gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImN1cnJlbnRTY2VuYXJpb1wiKTtcbiAgXG4gICAgICAgIGlmICghc2F2ZWRTY2VuYXJpbykge1xuICAgICAgICAgIGFsZXJ0KFwiTm8gc2NlbmFyaW8gc2VsZWN0ZWQuIFBsZWFzZSBzZWxlY3QgYSBzY2VuYXJpbyBmaXJzdC5cIik7XG4gICAgICAgICAgcm91dGVyLnB1c2goXCIvc2NlbmFyaW9cIik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gIFxuICAgICAgICBjb25zdCBwYXJzZWRTY2VuYXJpbyA9IEpTT04ucGFyc2Uoc2F2ZWRTY2VuYXJpbyk7XG4gICAgICAgIHNldFNjZW5hcmlvKHBhcnNlZFNjZW5hcmlvKTtcbiAgXG4gICAgICAgIC8vIEF1dGhlbnRpY2F0ZSB1c2VyXG4gICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gb25BdXRoU3RhdGVDaGFuZ2VkKGF1dGgsIGFzeW5jIChjdXJyZW50VXNlcikgPT4ge1xuICAgICAgICAgIHNldFVzZXIoY3VycmVudFVzZXIpO1xuICBcbiAgICAgICAgICAvLyBHZXQgbGFuZ3VhZ2UgcHJlZmVyZW5jZSAoZnJvbSBsb2NhbFN0b3JhZ2Ugb3IgYmFja2VuZClcbiAgICAgICAgICBjb25zdCBzYXZlZExvY2FsZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwibG9jYWxlXCIpIHx8IFwiZW5cIjtcbiAgICAgICAgICBzZXRVc2VyTGFuZ3VhZ2Uoc2F2ZWRMb2NhbGUpO1xuICBcbiAgICAgICAgICBpZiAoY3VycmVudFVzZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJuYW1lID1cbiAgICAgICAgICAgICAgY3VycmVudFVzZXIuZGlzcGxheU5hbWUgfHxcbiAgICAgICAgICAgICAgY3VycmVudFVzZXIuZW1haWw/LnNwbGl0KFwiQFwiKVswXSB8fFxuICAgICAgICAgICAgICBcIkd1ZXN0XCI7XG4gIFxuICAgICAgICAgICAgY29uc29sZS5sb2coXCLwn5GkIFVzZXIgYXV0aGVudGljYXRlZDpcIiwgdXNlcm5hbWUpO1xuICBcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgY29udmVyc2F0aW9uIChjYWxscyBiYWNrZW5kIGZvciBzY2VuYXJpbyAmIExMTSByZXNwb25zZSlcbiAgICAgICAgICAgIGF3YWl0IGluaXRpYWxpemVDb252ZXJzYXRpb24odXNlcm5hbWUpO1xuICAgICAgICAgIH1cbiAgXG4gICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgIH0pO1xuICBcbiAgICAgICAgcmV0dXJuICgpID0+IHVuc3Vic2NyaWJlKCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbG9hZGluZyB1c2VyIHNjZW5hcmlvOlwiLCBlcnJvcik7XG4gICAgICAgIGFsZXJ0KFwiVGhlcmUgd2FzIGEgcHJvYmxlbSBsb2FkaW5nIHRoZSBzY2VuYXJpby4gUGxlYXNlIHRyeSBhZ2Fpbi5cIik7XG4gICAgICAgIHJvdXRlci5wdXNoKFwiL3NjZW5hcmlvXCIpO1xuICAgICAgfVxuICAgIH07XG4gIFxuICAgIGZldGNoVXNlckFuZFNjZW5hcmlvKCk7XG4gIH0sIFtdKTtcbiAgXG4gIC8vIC8vIEluaXRpYWxpemUgc2NlbmFyaW8gY29udmVyc2F0aW9uIHdpdGggYmFja2VuZFxuICAvLyBjb25zdCBpbml0aWFsaXplQ29udmVyc2F0aW9uID0gYXN5bmMgKHVzZXJuYW1lOiBzdHJpbmcsIHNjZW5hcmlvVGl0bGU6IHN0cmluZykgPT4ge1xuICAvLyAgIHRyeSB7XG4gIC8vICAgICBjb25zdCBzY2VuYXJpb1Jlc3BvbnNlID0gYXdhaXQgc2V0U2NlbmFyaW8odXNlcm5hbWUsIHNjZW5hcmlvVGl0bGUpO1xuICAvLyAgICAgZmV0Y2hTdWdnZXN0aW9ucyh1c2VybmFtZSk7IC8vIEluaXRpYWwgc3VnZ2VzdGlvbnNcbiAgLy8gICB9IGNhdGNoIChlcnJvcikge1xuICAvLyAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluaXRpYWxpemluZyBjb252ZXJzYXRpb246XCIsIGVycm9yKTtcbiAgLy8gICB9XG4gIC8vIH07XG5cbiAgLy8gdXNlRWZmZWN0KCgpID0+IHtcbiAgLy8gICAvLyBMb2FkIHRoZSBzY2VuYXJpbyBmcm9tIGxvY2FsU3RvcmFnZVxuICAvLyAgIGNvbnN0IHNhdmVkU2NlbmFyaW8gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY3VycmVudFNjZW5hcmlvJyk7XG4gICAgXG4gIC8vICAgaWYgKCFzYXZlZFNjZW5hcmlvKSB7XG4gIC8vICAgICAvLyBJZiBubyBzY2VuYXJpbyBpcyBmb3VuZCwgcmVkaXJlY3QgYmFjayB0byBzY2VuYXJpbyBzZWxlY3Rpb25cbiAgLy8gICAgIGFsZXJ0KFwiTm8gc2NlbmFyaW8gc2VsZWN0ZWQuIFBsZWFzZSBzZWxlY3QgYSBzY2VuYXJpbyBmaXJzdC5cIik7XG4gIC8vICAgICByb3V0ZXIucHVzaCgnL3NjZW5hcmlvJyk7XG4gIC8vICAgICByZXR1cm47XG4gIC8vICAgfVxuICAgIFxuICAvLyAgIHRyeSB7XG4gIC8vICAgICBjb25zdCBwYXJzZWRTY2VuYXJpbyA9IEpTT04ucGFyc2Uoc2F2ZWRTY2VuYXJpbyk7XG4gIC8vICAgICBzZXRTY2VuYXJpbyhwYXJzZWRTY2VuYXJpbyk7XG4gICAgICBcbiAgLy8gICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gb25BdXRoU3RhdGVDaGFuZ2VkKGF1dGgsIGFzeW5jIChjdXJyZW50VXNlcikgPT4ge1xuICAvLyAgICAgICBzZXRVc2VyKGN1cnJlbnRVc2VyKTtcbiAgICAgICAgXG4gIC8vICAgICAgIGNvbnN0IHNhdmVkTG9jYWxlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xvY2FsZScpIHx8ICdlbic7XG4gIC8vICAgICAgIHNldFVzZXJMYW5ndWFnZShzYXZlZExvY2FsZSk7XG4gICAgICAgIFxuICAvLyAgICAgICBpZiAoY3VycmVudFVzZXIpIHtcbiAgLy8gICAgICAgICBjb25zdCB1c2VybmFtZSA9IGN1cnJlbnRVc2VyLmRpc3BsYXlOYW1lIHx8IGN1cnJlbnRVc2VyLmVtYWlsPy5zcGxpdCgnQCcpWzBdIHx8ICdHdWVzdCc7XG4gICAgICAgICAgXG4gIC8vICAgICAgICAgYXdhaXQgaW5pdGlhbGl6ZUNvbnZlcnNhdGlvbih1c2VybmFtZSwgcGFyc2VkU2NlbmFyaW8udGl0bGUpO1xuICAvLyAgICAgICAgIHNldE1lc3NhZ2VzKFtcbiAgLy8gICAgICAgICAgIHsgXG4gIC8vICAgICAgICAgICAgIHRleHQ6IGBIZWxsbyR7Y3VycmVudFVzZXIuZGlzcGxheU5hbWUgPyAnLCAnICsgY3VycmVudFVzZXIuZGlzcGxheU5hbWUgOiAnJ30hIEknbGwgYmUgeW91ciBjb252ZXJzYXRpb24gcGFydG5lciBmb3IgdGhpcyAke3BhcnNlZFNjZW5hcmlvLnRpdGxlfSBzY2VuYXJpby4gSG93IGNhbiBJIGhlbHAgeW91IHRvZGF5P2AsIFxuICAvLyAgICAgICAgICAgICBzZW5kZXI6ICdib3QnIFxuICAvLyAgICAgICAgICAgfVxuICAvLyAgICAgICAgIF0pO1xuICAvLyAgICAgICB9IGVsc2Uge1xuICAvLyAgICAgICAgIHNldE1lc3NhZ2VzKFtcbiAgLy8gICAgICAgICAgIHsgXG4gIC8vICAgICAgICAgICAgIHRleHQ6IGBXZWxjb21lIHRvIHRoZSAke3BhcnNlZFNjZW5hcmlvLnRpdGxlfSBzY2VuYXJpbyEgSSdsbCBiZSB5b3VyIGNvbnZlcnNhdGlvbiBwYXJ0bmVyLiBIb3cgd291bGQgeW91IGxpa2UgdG8gc3RhcnQ/YCwgXG4gIC8vICAgICAgICAgICAgIHNlbmRlcjogJ2JvdCcgXG4gIC8vICAgICAgICAgICB9XG4gIC8vICAgICAgICAgXSk7XG4gIC8vICAgICAgIH1cbiAgICAgICAgXG4gIC8vICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAvLyAgICAgfSk7XG4gICAgICBcbiAgLy8gICAgIHJldHVybiAoKSA9PiB1bnN1YnNjcmliZSgpO1xuICAvLyAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gIC8vICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgcGFyc2luZyBzY2VuYXJpbzpcIiwgZXJyb3IpO1xuICAvLyAgICAgYWxlcnQoXCJUaGVyZSB3YXMgYSBwcm9ibGVtIGxvYWRpbmcgdGhlIHNjZW5hcmlvLiBQbGVhc2UgdHJ5IGFnYWluLlwiKTtcbiAgLy8gICAgIHJvdXRlci5wdXNoKCcvc2NlbmFyaW8nKTtcbiAgLy8gICB9XG4gIC8vIH0sIFtdKTtcblxuICAvLyBGZXRjaCB1cGRhdGVkIGNvbnZlcnNhdGlvbiBzdWdnZXN0aW9ucyBmcm9tIGJhY2tlbmRcbiAgY29uc3QgZmV0Y2hTdWdnZXN0aW9ucyA9IGFzeW5jICh1c2VybmFtZTogc3RyaW5nKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0U3VnZ2VzdGlvbnModXNlcm5hbWUpO1xuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuZGF0YSAmJiAhcmVzcG9uc2UuZXJyb3IpIHtcbiAgICAgICAgc2V0U3VnZ2VzdGlvbkxpc3QocmVzcG9uc2UuZGF0YS5zdWdnZXN0aW9ucyk7XG4gICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBzdWdnZXN0aW9uczpcIiwgcmVzcG9uc2UuZXJyb3IpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgc3VnZ2VzdGlvbnM6XCIsIGVycm9yKTtcbiAgICB9XG4gIH07XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmdW5jdGlvbiBoYW5kbGVDbGlja091dHNpZGUoZXZlbnQ6IE1vdXNlRXZlbnQpIHtcbiAgICAgIGlmIChwcm9maWxlTWVudVJlZi5jdXJyZW50ICYmICFwcm9maWxlTWVudVJlZi5jdXJyZW50LmNvbnRhaW5zKGV2ZW50LnRhcmdldCBhcyBOb2RlKSkge1xuICAgICAgICBzZXRTaG93UHJvZmlsZU1lbnUoZmFsc2UpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGhhbmRsZUNsaWNrT3V0c2lkZSk7XG4gICAgcmV0dXJuICgpID0+IGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgaGFuZGxlQ2xpY2tPdXRzaWRlKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IGhhbmRsZUJhY2tDbGljayA9ICgpID0+IHtcbiAgICByb3V0ZXIucHVzaCgnL3NjZW5hcmlvJyk7XG4gIH07XG4gIFxuICBjb25zdCBuYXZpZ2F0ZVRvRGFzaGJvYXJkID0gKCkgPT4ge1xuICAgIHJvdXRlci5wdXNoKCcvZGFzaGJvYXJkJyk7XG4gICAgc2V0U2hvd1Byb2ZpbGVNZW51KGZhbHNlKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVJbnB1dENoYW5nZSA9IChldmVudDogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICBzZXRJbnB1dFRleHQoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVLZXlQcmVzcyA9IChldmVudDogUmVhY3QuS2V5Ym9hcmRFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgIGlmIChldmVudC5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgIGhhbmRsZVNlbmRNZXNzYWdlKCk7XG4gICAgfVxuICB9O1xuXG4gIC8vIFBsYXkgYXVkaW8gd2hlbiBzcGVha2VyIGJ1dHRvbiBpcyBjbGlja2VkXG4gIGNvbnN0IHBsYXlNZXNzYWdlQXVkaW8gPSAobWVzc2FnZUlkOiBudW1iZXIsIGF1ZGlvVXJsPzogc3RyaW5nKSA9PiB7XG4gICAgaWYgKCFhdWRpb1VybCkgcmV0dXJuO1xuICAgIFxuICAgIC8vIFN0b3AgYW55IGN1cnJlbnRseSBwbGF5aW5nIGF1ZGlvXG4gICAgaWYgKGF1ZGlvUmVmLmN1cnJlbnQpIHtcbiAgICAgIGF1ZGlvUmVmLmN1cnJlbnQucGF1c2UoKTtcbiAgICAgIGF1ZGlvUmVmLmN1cnJlbnQuY3VycmVudFRpbWUgPSAwO1xuICAgICAgc2V0SXNQbGF5aW5nKG51bGwpO1xuICAgIH1cbiAgICBcbiAgICAvLyBJZiBjbGlja2luZyBvbiB0aGUgY3VycmVudGx5IHBsYXlpbmcgYXVkaW8sIGp1c3Qgc3RvcCBpdFxuICAgIGlmIChpc1BsYXlpbmcgPT09IGBtZXNzYWdlLSR7bWVzc2FnZUlkfWApIHtcbiAgICAgIHNldElzUGxheWluZyhudWxsKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgLy8gQ3JlYXRlIGFuZCBwbGF5IG5ldyBhdWRpb1xuICAgIGNvbnN0IGF1ZGlvID0gbmV3IEF1ZGlvKGBodHRwOi8vbG9jYWxob3N0OjgwMDAke2F1ZGlvVXJsfWApO1xuICAgIGF1ZGlvUmVmLmN1cnJlbnQgPSBhdWRpbztcbiAgICBcbiAgICAvLyBTZXQgdGhlIGN1cnJlbnRseSBwbGF5aW5nIG1lc3NhZ2UgSURcbiAgICBzZXRJc1BsYXlpbmcoYG1lc3NhZ2UtJHttZXNzYWdlSWR9YCk7XG4gICAgXG4gICAgLy8gV2hlbiBhdWRpbyBlbmRzLCByZXNldCB0aGUgcGxheWluZyBzdGF0ZVxuICAgIGF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgKCkgPT4ge1xuICAgICAgc2V0SXNQbGF5aW5nKG51bGwpO1xuICAgIH0pO1xuICAgIFxuICAgIGF1ZGlvLnBsYXkoKS5jYXRjaChlID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJBdWRpbyBwbGF5YmFjayBlcnJvcjpcIiwgZSk7XG4gICAgICBzZXRJc1BsYXlpbmcobnVsbCk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlU2VuZE1lc3NhZ2UgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFpbnB1dFRleHQudHJpbSgpIHx8ICFzY2VuYXJpbykgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IHVzZXJNZXNzYWdlID0gaW5wdXRUZXh0LnRyaW0oKTtcbiAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCB7IHRleHQ6IHVzZXJNZXNzYWdlLCBzZW5kZXI6ICd1c2VyJyB9XSk7XG4gICAgc2V0SW5wdXRUZXh0KCcnKTtcbiAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlcm5hbWUgPSB1c2VyID8gKHVzZXIuZGlzcGxheU5hbWUgfHwgdXNlci5lbWFpbD8uc3BsaXQoJ0AnKVswXSB8fCAnR3Vlc3QnKSA6ICdHdWVzdCc7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2VuZENoYXRNZXNzYWdlKFxuICAgICAgICB1c2VybmFtZSxcbiAgICAgICAgdXNlck1lc3NhZ2UsXG4gICAgICAgIHNjZW5hcmlvLnRpdGxlLCAvLyBVc2luZyB0aGUgc2NlbmFyaW8gdGl0bGVcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB1c2VyTGFuZ3VhZ2VcbiAgICAgICk7XG5cbiAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5lcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2UuZXJyb3IpO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCB7IFxuICAgICAgICAgIHRleHQ6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UsIFxuICAgICAgICAgIHNlbmRlcjogJ2JvdCcsXG4gICAgICAgICAgYXVkaW9fdXJsOiByZXNwb25zZS5kYXRhLmF1ZGlvX3VybFxuICAgICAgICB9XSk7XG4gICAgICAgIFxuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5hdWRpb191cmwpIHtcbiAgICAgICAgICAvLyBDbGljayB0aGUgc3BlYWtlciBidXR0b24gdG8gcGxheSBtZXNzYWdlIGF1ZGlvXG4gICAgICAgICAgcGxheU1lc3NhZ2VBdWRpbyhtZXNzYWdlcy5sZW5ndGgsIHJlc3BvbnNlLmRhdGEuYXVkaW9fdXJsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBGZXRjaCB1cGRhdGVkIHN1Z2dlc3Rpb25zIGFmdGVyIG1lc3NhZ2VcbiAgICAgIGF3YWl0IGZldGNoU3VnZ2VzdGlvbnModXNlcm5hbWUpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZW5kaW5nIG1lc3NhZ2U6JywgZXJyb3IpO1xuICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBbXG4gICAgICAgIC4uLnByZXYsXG4gICAgICAgIHsgdGV4dDogXCJTb3JyeSwgSSdtIGhhdmluZyB0cm91YmxlIGNvbm5lY3RpbmcuIFBsZWFzZSB0cnkgYWdhaW4uXCIsIHNlbmRlcjogJ2JvdCcgfVxuICAgICAgXSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUVuZFNjZW5hcmlvID0gKCkgPT4ge1xuICAgIHNldFNob3dNb2RhbCh0cnVlKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVTYXZlQ29udmVyc2F0aW9uID0gYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXNjZW5hcmlvKSByZXR1cm47XG4gICAgICBcbiAgICAgIGNvbnN0IHNjZW5hcmlvVHlwZSA9IHNjZW5hcmlvLnRpdGxlLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzKy9nLCAnXycpO1xuICAgICAgY29uc3Qgc2F2ZWRDb252ZXJzYXRpb25zID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShzY2VuYXJpb1R5cGUpIHx8ICdbXScpO1xuICAgICAgXG4gICAgICBzYXZlZENvbnZlcnNhdGlvbnMucHVzaCh7XG4gICAgICAgIGlkOiBEYXRlLm5vdygpLFxuICAgICAgICBkYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHNjZW5hcmlvOiBzY2VuYXJpby50aXRsZSxcbiAgICAgICAgbWVzc2FnZXM6IG1lc3NhZ2VzLFxuICAgICAgICB1c2VyTmFtZTogdXNlciA/ICh1c2VyLmRpc3BsYXlOYW1lIHx8IHVzZXIuZW1haWw/LnNwbGl0KCdAJylbMF0gfHwgJ0d1ZXN0JykgOiAnR3Vlc3QnLFxuICAgICAgICBsYW5ndWFnZTogdXNlckxhbmd1YWdlXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oc2NlbmFyaW9UeXBlLCBKU09OLnN0cmluZ2lmeShzYXZlZENvbnZlcnNhdGlvbnMpKTtcbiAgICAgIHJvdXRlci5wdXNoKCcvdGV4dCcpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igc2F2aW5nIGNvbnZlcnNhdGlvbjpcIiwgZXJyb3IpO1xuICAgICAgcm91dGVyLnB1c2goJy90ZXh0Jyk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZURpc2NhcmRDb252ZXJzYXRpb24gPSAoKSA9PiB7XG4gICAgcm91dGVyLnB1c2goJy90ZXh0Jyk7XG4gIH07XG5cbiAgLy8gQXBwbHkgc3VnZ2VzdGlvbiB0byBpbnB1dFxuICBjb25zdCBoYW5kbGVTdWdnZXN0aW9uQ2xpY2sgPSAoc3VnZ2VzdGlvbjogc3RyaW5nKSA9PiB7XG4gICAgc2V0SW5wdXRUZXh0KHN1Z2dlc3Rpb24pO1xuICB9O1xuXG4gIC8vIFRvZ2dsZSB2b2ljZSByZWNvcmRpbmcgKHBsYWNlaG9sZGVyKVxuICBjb25zdCB0b2dnbGVSZWNvcmRpbmcgPSAoKSA9PiB7XG4gICAgc2V0SXNSZWNvcmRpbmcoIWlzUmVjb3JkaW5nKTtcbiAgICAvLyBBZGQgYWN0dWFsIHJlY29yZGluZyBsb2dpYyBoZXJlXG4gIH07XG5cbiAgaWYgKGxvYWRpbmcpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtaW4taC1zY3JlZW4gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIlxuICAgICAgICBzdHlsZT17eyBiYWNrZ3JvdW5kSW1hZ2U6IFwidXJsKCcvaWNvbnMvYmFja2dyb3VuZDEuanBnJylcIiwgYmFja2dyb3VuZFNpemU6IFwiY292ZXJcIiB9fT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbmltYXRlLXNwaW4gcm91bmRlZC1mdWxsIGgtMTIgdy0xMiBib3JkZXItdC0yIGJvcmRlci1iLTIgYm9yZGVyLVsjNDhkMWNjXVwiPjwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJtaW4taC1zY3JlZW4gYmctZ3JheS05MDAgdGV4dC13aGl0ZSByZWxhdGl2ZVwiXG4gICAgICBzdHlsZT17eyBiYWNrZ3JvdW5kSW1hZ2U6IFwidXJsKCcvaWNvbnMvYmFja2dyb3VuZDEuanBnJylcIiB9fVxuICAgID5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTggbGVmdC04IHotMTBcIiByZWY9e3Byb2ZpbGVNZW51UmVmfT5cbiAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93UHJvZmlsZU1lbnUoIXNob3dQcm9maWxlTWVudSl9XG4gICAgICAgICAgY2xhc3NOYW1lPVwidy0xMCBoLTEwIHJvdW5kZWQtZnVsbCBiZy13aGl0ZS8xMCBob3ZlcjpiZy13aGl0ZS8yMCB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0yMDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgb3ZlcmZsb3ctaGlkZGVuXCJcbiAgICAgICAgPlxuICAgICAgICAgIHt1c2VyPy5waG90b1VSTCA/IChcbiAgICAgICAgICAgIDxJbWFnZVxuICAgICAgICAgICAgICBzcmM9e3VzZXIucGhvdG9VUkx9XG4gICAgICAgICAgICAgIGFsdD1cIlByb2ZpbGVcIlxuICAgICAgICAgICAgICB3aWR0aD17NDB9XG4gICAgICAgICAgICAgIGhlaWdodD17NDB9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm9iamVjdC1jb3ZlclwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBoLWZ1bGwgYmctWyM0OGQxY2NdIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtd2hpdGUgZm9udC1zZW1pYm9sZCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgIHt1c2VyPy5kaXNwbGF5TmFtZSA/IHVzZXIuZGlzcGxheU5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgOiBcbiAgICAgICAgICAgICAgIHVzZXI/LmVtYWlsID8gdXNlci5lbWFpbC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSA6IFwiR1wifVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9idXR0b24+XG4gICAgICAgIFxuICAgICAgICB7c2hvd1Byb2ZpbGVNZW51ICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0xMiBsZWZ0LTAgYmctd2hpdGUgcm91bmRlZC1sZyBzaGFkb3ctbGcgcHktMiBtaW4tdy1bMTgwcHhdIHRleHQtZ3JheS04MDAgei0yMFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJweC00IHB5LTIgYm9yZGVyLWIgYm9yZGVyLWdyYXktMjAwXCI+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtXCI+e3VzZXI/LmRpc3BsYXlOYW1lIHx8IFwiR3Vlc3RcIn08L3A+XG4gICAgICAgICAgICAgIHt1c2VyPy5lbWFpbCAmJiAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+e3VzZXIuZW1haWx9PC9wPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB4LTQgcHktMiBib3JkZXItYiBib3JkZXItZ3JheS0yMDBcIj5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+TGFuZ3VhZ2U6IHt1c2VyTGFuZ3VhZ2UgPT09ICdlbicgPyAnRW5nbGlzaCcgOiB1c2VyTGFuZ3VhZ2UgPT09ICd6aC1DTicgPyAnQ2hpbmVzZScgOiAnSmFwYW5lc2UnfTwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAge3VzZXIgPyAoXG4gICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgb25DbGljaz17bmF2aWdhdGVUb0Rhc2hib2FyZH1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgdGV4dC1sZWZ0IHB4LTQgcHktMiBob3ZlcjpiZy1ncmF5LTEwMCB0cmFuc2l0aW9uLWNvbG9ycyBmbGV4IGl0ZW1zLWNlbnRlclwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cInctNCBoLTQgbXItMlwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPVwiMlwiIGQ9XCJNMTYgN2E0IDQgMCAxMS04IDAgNCA0IDAgMDE4IDB6TTEyIDE0YTcgNyAwIDAwLTcgN2gxNGE3IDcgMCAwMC03LTd6XCIgLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICBQcm9maWxlIERhc2hib2FyZFxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gcm91dGVyLnB1c2goJy9sb2dpbicpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCB0ZXh0LWxlZnQgcHgtNCBweS0yIGhvdmVyOmJnLWdyYXktMTAwIHRyYW5zaXRpb24tY29sb3JzIGZsZXggaXRlbXMtY2VudGVyXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxzdmcgY2xhc3NOYW1lPVwidy00IGgtNCBtci0yXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XG4gICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9XCIyXCIgZD1cIk0xMSAxNmwtNC00bTAgMGw0LTRtLTQgNGgxNG0tNSA0djFhMyAzIDAgMDEtMyAzSDZhMyAzIDAgMDEtMy0zVjdhMyAzIDAgMDEzLTNoN2EzIDMgMCAwMTMgM3YxXCIgLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICBTaWduIEluXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgICAgXG4gICAgICA8YnV0dG9uIFxuICAgICAgICBvbkNsaWNrPXtoYW5kbGVCYWNrQ2xpY2t9XG4gICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC04IGxlZnQtMjQgdy0xMCBoLTEwIHJvdW5kZWQtZnVsbCBiZy13aGl0ZS8xMCBob3ZlcjpiZy13aGl0ZS8yMCB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0yMDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIlxuICAgICAgPlxuICAgICAgICA8SW1hZ2VcbiAgICAgICAgICBzcmM9XCIvaWNvbnMvYmFjay5wbmdcIlxuICAgICAgICAgIGFsdD1cIkJhY2tcIlxuICAgICAgICAgIHdpZHRoPXsyNH1cbiAgICAgICAgICBoZWlnaHQ9ezI0fVxuICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtd2hpdGVcIlxuICAgICAgICAvPlxuICAgICAgPC9idXR0b24+XG4gICAgICBcbiAgICAgIDxidXR0b24gXG4gICAgICAgIG9uQ2xpY2s9e2hhbmRsZUVuZFNjZW5hcmlvfVxuICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtOCByaWdodC04IGJnLVsjMjBiMmFhXSBob3ZlcjpiZy1bIzAwODA4MF0gcHgtNiBweS0yIHJvdW5kZWQtbGcgdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMjAwXCJcbiAgICAgID5cbiAgICAgICAgRW5kIFNjZW5hcmlvXG4gICAgICA8L2J1dHRvbj5cbiAgICAgIFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwdC0yNCBweC00IG1heC13LTZ4bCBteC1hdXRvXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBnYXAtNFwiPlxuICAgICAgICAgIHsvKiBDb252ZXJzYXRpb24gYXJlYSAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctWzY1JV1cIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1bNzB2aF0gYmctWyNmMGY4ZmZdIHJvdW5kZWQteGwgcC02IG92ZXJmbG93LXktYXV0byBtYi00XCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBzcGFjZS15LTRcIj5cbiAgICAgICAgICAgICAgICB7bWVzc2FnZXMubWFwKChtZXNzYWdlLCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBrZXk9e2luZGV4fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BmbGV4ICR7bWVzc2FnZS5zZW5kZXIgPT09ICd1c2VyJyA/ICdqdXN0aWZ5LWVuZCcgOiAnanVzdGlmeS1zdGFydCd9YH1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge21lc3NhZ2Uuc2VuZGVyID09PSAnYm90JyAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTggaC04IG1yLTIgZmxleC1zaHJpbmstMCByb3VuZGVkLWZ1bGwgb3ZlcmZsb3ctaGlkZGVuXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8SW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPVwiL2ljb25zL3JvYm90LmpwZ1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFsdD1cIlJvYm90XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9ezMyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9ezMyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJvYmplY3QtY292ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YG1heC13LXNtIHJvdW5kZWQtbGcgcHgtNCBweS0yICR7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnNlbmRlciA9PT0gJ3VzZXInIFxuICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdiZy1ibHVlLTUwMCB0ZXh0LXdoaXRlJyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnYmctZ3JheS0yMDAgdGV4dC1ncmF5LTgwMCdcbiAgICAgICAgICAgICAgICAgICAgICB9IGdyb3VwIHJlbGF0aXZlYH1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIHttZXNzYWdlLnRleHR9XG4gICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgey8qIFNwZWFrZXIgYnV0dG9uIGZvciBib3QgbWVzc2FnZXMgKi99XG4gICAgICAgICAgICAgICAgICAgICAge21lc3NhZ2Uuc2VuZGVyID09PSAnYm90JyAmJiBtZXNzYWdlLmF1ZGlvX3VybCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHBsYXlNZXNzYWdlQXVkaW8oaW5kZXgsIG1lc3NhZ2UuYXVkaW9fdXJsKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgLXJpZ2h0LTEwIHRvcC0xLzIgdHJhbnNmb3JtIC10cmFuc2xhdGUteS0xLzIgdy04IGgtOCBiZy1ncmF5LTEwMCByb3VuZGVkLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgaG92ZXI6YmctZ3JheS0yMDAgdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwiUGxheSBtZXNzYWdlIGF1ZGlvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2lzUGxheWluZyA9PT0gYG1lc3NhZ2UtJHtpbmRleH1gID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1wdWxzZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEltYWdlIHNyYz1cIi9pY29ucy9zcGVha2VyLmpwZ1wiIGFsdD1cIlNwZWFrZXJcIiB3aWR0aD17MjR9IGhlaWdodD17MjR9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEltYWdlIHNyYz1cIi9pY29ucy9zcGVha2VyLmpwZ1wiIGFsdD1cIlNwZWFrZXJcIiB3aWR0aD17MjR9IGhlaWdodD17MjR9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAge21lc3NhZ2Uuc2VuZGVyID09PSAndXNlcicgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy04IGgtOCBtbC0yIGZsZXgtc2hyaW5rLTAgcm91bmRlZC1mdWxsIG92ZXJmbG93LWhpZGRlbiBiZy1ibHVlLTEwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge3VzZXI/LnBob3RvVVJMID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8SW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM9e3VzZXIucGhvdG9VUkx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0PVwiVXNlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9ezMyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD17MzJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwib2JqZWN0LWNvdmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCBiZy1bIzQ4ZDFjY10gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC13aGl0ZSBmb250LXNlbWlib2xkIHRleHQteHNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dXNlcj8uZGlzcGxheU5hbWUgPyB1c2VyLmRpc3BsYXlOYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpIDogXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcj8uZW1haWwgPyB1c2VyLmVtYWlsLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpIDogXCJVXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgIHtpc0xvYWRpbmcgJiYgKFxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktc3RhcnRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTIgYmctZ3JheS0xMDAgcm91bmRlZC1sZyBweC00IHB5LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMiBoLTIgYmctZ3JheS00MDAgcm91bmRlZC1mdWxsIGFuaW1hdGUtYm91bmNlXCIgc3R5bGU9e3sgYW5pbWF0aW9uRGVsYXk6ICcwcycgfX0+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTIgaC0yIGJnLWdyYXktNDAwIHJvdW5kZWQtZnVsbCBhbmltYXRlLWJvdW5jZVwiIHN0eWxlPXt7IGFuaW1hdGlvbkRlbGF5OiAnMC4ycycgfX0+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTIgaC0yIGJnLWdyYXktNDAwIHJvdW5kZWQtZnVsbCBhbmltYXRlLWJvdW5jZVwiIHN0eWxlPXt7IGFuaW1hdGlvbkRlbGF5OiAnMC40cycgfX0+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8ZGl2IHJlZj17bWVzc2FnZXNFbmRSZWZ9IC8+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBnYXAtMlwiPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17dG9nZ2xlUmVjb3JkaW5nfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7XG4gICAgICAgICAgICAgICAgICBpc1JlY29yZGluZyBcbiAgICAgICAgICAgICAgICAgICAgPyAnYmctcmVkLTUwMCBob3ZlcjpiZy1yZWQtNjAwJyBcbiAgICAgICAgICAgICAgICAgICAgOiAnYmctZ3JheS0yMDAgaG92ZXI6YmctZ3JheS0zMDAnXG4gICAgICAgICAgICAgICAgfSBweC0zIHB5LTMgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0yMDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcmVsYXRpdmVgfVxuICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJTdGFydCB2b2ljZSByZWNvcmRpbmdcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3NOYW1lPVwiaC02IHctNlwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZT17aXNSZWNvcmRpbmcgPyBcIndoaXRlXCIgOiBcImJsYWNrXCJ9PlxuICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTE5IDExYTcgNyAwIDAxLTcgN20wIDBhNyA3IDAgMDEtNy03bTcgN3Y0bTAgMEg4bTQgMGg0bS00LThhMyAzIDAgMDEtMy0zVjVhMyAzIDAgMTE2IDB2NmEzIDMgMCAwMS0zIDN6XCIgLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICB7aXNSZWNvcmRpbmcgJiYgKFxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTAgcmlnaHQtMCBmbGV4IGgtMyB3LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYW5pbWF0ZS1waW5nIGFic29sdXRlIGlubGluZS1mbGV4IGgtZnVsbCB3LWZ1bGwgcm91bmRlZC1mdWxsIGJnLXJlZC00MDAgb3BhY2l0eS03NVwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwicmVsYXRpdmUgaW5saW5lLWZsZXggcm91bmRlZC1mdWxsIGgtMyB3LTMgYmctcmVkLTUwMFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cblxuICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgdmFsdWU9e2lucHV0VGV4dH1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlSW5wdXRDaGFuZ2V9XG4gICAgICAgICAgICAgICAgb25LZXlQcmVzcz17aGFuZGxlS2V5UHJlc3N9XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2lzUmVjb3JkaW5nID8gXCJMaXN0ZW5pbmcuLi5cIiA6IFwiVHlwZSB5b3VyIG1lc3NhZ2UuLi5cIn1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BmbGV4LTEgYmctd2hpdGUgdGV4dC1ibGFjayBweC00IHB5LTMgcm91bmRlZC1sZyBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctYmx1ZS01MDAgJHtcbiAgICAgICAgICAgICAgICAgIGlzUmVjb3JkaW5nID8gJ2FuaW1hdGUtcHVsc2UgYm9yZGVyLTIgYm9yZGVyLXJlZC00MDAnIDogJydcbiAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17aXNSZWNvcmRpbmcgfHwgaXNMb2FkaW5nfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVTZW5kTWVzc2FnZX1cbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17aXNSZWNvcmRpbmcgfHwgaXNMb2FkaW5nIHx8ICFpbnB1dFRleHQudHJpbSgpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLVsjMjBiMmFhXSBob3ZlcjpiZy1bIzAwODA4MF0gcHgtNCBweS0yIHJvdW5kZWQtbGcgdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMjAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGRpc2FibGVkOm9wYWNpdHktNTBcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge2lzTG9hZGluZyA/IChcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTUgdy01IGJvcmRlci10LTIgYm9yZGVyLWItMiBib3JkZXItd2hpdGVcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPEltYWdlIHNyYz1cIi9pY29ucy9zZW5kLnBuZ1wiIGFsdD1cIlNlbmRcIiB3aWR0aD17MjR9IGhlaWdodD17MjR9IC8+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIHsvKiBTdWdnZXN0aW9ucyBwYW5lbCAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctWzM1JV1cIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1bNzB2aF0gYmctWyNmMGY4ZmZdIHJvdW5kZWQteGwgcC02IG92ZXJmbG93LXktYXV0byBtYi00XCI+XG5cbiAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktODAwIG1iLTNcIj5TdWdnZXN0ZWQgUmVzcG9uc2VzPC9oMz5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHtzdWdnZXN0aW9uTGlzdC5sZW5ndGggPiAwID8gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0zXCI+XG4gICAgICAgICAgICAgICAgICB7c3VnZ2VzdGlvbkxpc3QubWFwKChzdWdnZXN0aW9uLCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAga2V5PXtpbmRleH1cbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctd2hpdGUgcm91bmRlZC1sZyBwLTMgc2hhZG93LXNtIGhvdmVyOmJnLWdyYXktNTAgdHJhbnNpdGlvbi1jb2xvcnMgdGV4dC1sZWZ0IGZsZXggaXRlbXMtY2VudGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVTdWdnZXN0aW9uQ2xpY2soc3VnZ2VzdGlvbil9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmbGV4LXNocmluay0wIHctNiBoLTYgYmctWyMyMGIyYWFdIHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXdoaXRlIHRleHQteHMgbXItM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2luZGV4ICsgMX1cbiAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTcwMFwiPntzdWdnZXN0aW9ufTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWdyYXktNTAgcm91bmRlZC1sZyBwLTQgdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtZ3JheS01MDBcIj5TdWdnZXN0aW9ucyB3aWxsIGFwcGVhciBoZXJlIGFmdGVyIHlvdSBzdGFydCBjaGF0dGluZy48L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIFxuICAgICAge3Nob3dNb2RhbCAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgaW5zZXQtMCBiZy1ibGFjay83MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB6LTUwXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSByb3VuZGVkLXhsIHAtNiBtYXgtdy1tZCB3LWZ1bGwgbXgtNFwiPlxuICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQteGwgZm9udC1ib2xkIHRleHQtZ3JheS04MDAgbWItNFwiPkVuZCBTY2VuYXJpbzwvaDM+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNjAwIG1iLTZcIj5Zb3VyIHByYWN0aWNlIHNlc3Npb24gd2lsbCBiZSBjbG9zZWQuIERvIHlvdSB3YW50IHRvIHNhdmUgdGhpcyBjb252ZXJzYXRpb24gdG8geW91ciBwcm9maWxlPzwvcD5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGdhcC00IGp1c3RpZnktZW5kXCI+XG4gICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlRGlzY2FyZENvbnZlcnNhdGlvbn1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC00IHB5LTIgYmctZ3JheS0yMDAgaG92ZXI6YmctZ3JheS0zMDAgdGV4dC1ncmF5LTgwMCByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIERvbid0IFNhdmVcbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlU2F2ZUNvbnZlcnNhdGlvbn1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC00IHB5LTIgYmctYmx1ZS01MDAgaG92ZXI6YmctYmx1ZS02MDAgdGV4dC13aGl0ZSByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIFNhdmVcbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgUm9sZXBsYXlQYWdlOyJdLCJuYW1lcyI6WyJSZWFjdCIsInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlUmVmIiwiSW1hZ2UiLCJ1c2VSb3V0ZXIiLCJhdXRoIiwib25BdXRoU3RhdGVDaGFuZ2VkIiwic2VuZENoYXRNZXNzYWdlIiwiZ2V0U3VnZ2VzdGlvbnMiLCJSb2xlcGxheVBhZ2UiLCJ1c2VyIiwic2V0VXNlciIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwic2hvd1Byb2ZpbGVNZW51Iiwic2V0U2hvd1Byb2ZpbGVNZW51IiwidXNlckxhbmd1YWdlIiwic2V0VXNlckxhbmd1YWdlIiwiaW5wdXRUZXh0Iiwic2V0SW5wdXRUZXh0IiwibWVzc2FnZXMiLCJzZXRNZXNzYWdlcyIsImlzTG9hZGluZyIsInNldElzTG9hZGluZyIsInNjZW5hcmlvIiwic2V0U2NlbmFyaW8iLCJpc1BsYXlpbmciLCJzZXRJc1BsYXlpbmciLCJzaG93TW9kYWwiLCJzZXRTaG93TW9kYWwiLCJpc1JlY29yZGluZyIsInNldElzUmVjb3JkaW5nIiwic3VnZ2VzdGlvbkxpc3QiLCJzZXRTdWdnZXN0aW9uTGlzdCIsInByb2ZpbGVNZW51UmVmIiwibWVzc2FnZXNFbmRSZWYiLCJhdWRpb1JlZiIsInJvdXRlciIsInNjcm9sbFRvQm90dG9tIiwiY3VycmVudCIsInNjcm9sbEludG9WaWV3IiwiYmVoYXZpb3IiLCJpbml0aWFsaXplQ29udmVyc2F0aW9uIiwidXNlcm5hbWUiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0YSIsImpzb24iLCJjb25zb2xlIiwibG9nIiwidGV4dCIsInNlbmRlciIsImZldGNoU3VnZ2VzdGlvbnMiLCJlcnJvciIsImZldGNoVXNlckFuZFNjZW5hcmlvIiwic2F2ZWRTY2VuYXJpbyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJhbGVydCIsInB1c2giLCJwYXJzZWRTY2VuYXJpbyIsInBhcnNlIiwidW5zdWJzY3JpYmUiLCJjdXJyZW50VXNlciIsInNhdmVkTG9jYWxlIiwiZGlzcGxheU5hbWUiLCJlbWFpbCIsInNwbGl0Iiwic3VnZ2VzdGlvbnMiLCJoYW5kbGVDbGlja091dHNpZGUiLCJldmVudCIsImNvbnRhaW5zIiwidGFyZ2V0IiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhbmRsZUJhY2tDbGljayIsIm5hdmlnYXRlVG9EYXNoYm9hcmQiLCJoYW5kbGVJbnB1dENoYW5nZSIsInZhbHVlIiwiaGFuZGxlS2V5UHJlc3MiLCJrZXkiLCJoYW5kbGVTZW5kTWVzc2FnZSIsInBsYXlNZXNzYWdlQXVkaW8iLCJtZXNzYWdlSWQiLCJhdWRpb1VybCIsInBhdXNlIiwiY3VycmVudFRpbWUiLCJhdWRpbyIsIkF1ZGlvIiwicGxheSIsImNhdGNoIiwiZSIsInRyaW0iLCJ1c2VyTWVzc2FnZSIsInByZXYiLCJ0aXRsZSIsInVuZGVmaW5lZCIsIkVycm9yIiwiYXVkaW9fdXJsIiwibGVuZ3RoIiwiaGFuZGxlRW5kU2NlbmFyaW8iLCJoYW5kbGVTYXZlQ29udmVyc2F0aW9uIiwic2NlbmFyaW9UeXBlIiwidG9Mb3dlckNhc2UiLCJyZXBsYWNlIiwic2F2ZWRDb252ZXJzYXRpb25zIiwiaWQiLCJEYXRlIiwibm93IiwiZGF0ZSIsInRvSVNPU3RyaW5nIiwidXNlck5hbWUiLCJsYW5ndWFnZSIsInNldEl0ZW0iLCJoYW5kbGVEaXNjYXJkQ29udmVyc2F0aW9uIiwiaGFuZGxlU3VnZ2VzdGlvbkNsaWNrIiwic3VnZ2VzdGlvbiIsInRvZ2dsZVJlY29yZGluZyIsImRpdiIsImNsYXNzTmFtZSIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiYmFja2dyb3VuZFNpemUiLCJyZWYiLCJidXR0b24iLCJvbkNsaWNrIiwicGhvdG9VUkwiLCJzcmMiLCJhbHQiLCJ3aWR0aCIsImhlaWdodCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwicCIsInN2ZyIsImZpbGwiLCJzdHJva2UiLCJ2aWV3Qm94IiwicGF0aCIsInN0cm9rZUxpbmVjYXAiLCJzdHJva2VMaW5lam9pbiIsInN0cm9rZVdpZHRoIiwiZCIsIm1hcCIsIm1lc3NhZ2UiLCJpbmRleCIsImFyaWEtbGFiZWwiLCJhbmltYXRpb25EZWxheSIsInhtbG5zIiwic3BhbiIsImlucHV0IiwidHlwZSIsIm9uQ2hhbmdlIiwib25LZXlQcmVzcyIsInBsYWNlaG9sZGVyIiwiZGlzYWJsZWQiLCJoMyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/roleplay/page.tsx\n"));
